{"version":3,"sources":["webpack://AgoraSDK/webpack/universalModuleDefinition","webpack://AgoraSDK/webpack/bootstrap","webpack://AgoraSDK/./src/ChannelMediaRelay.ts","webpack://AgoraSDK/./src/Log.js","webpack://AgoraSDK/./src/utils/Check.js","webpack://AgoraSDK/./src/Helper.js","webpack://AgoraSDK/./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://AgoraSDK/./node_modules/@babel/runtime/helpers/createClass.js","webpack://AgoraSDK/./src/Config.js","webpack://AgoraSDK/./node_modules/@babel/runtime/regenerator/index.js","webpack://AgoraSDK/./report_service/Thrift/thrift.js","webpack://AgoraSDK/./node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack://AgoraSDK/./node_modules/@babel/runtime/helpers/asyncToGenerator.js","webpack://AgoraSDK/./node_modules/@babel/runtime/helpers/arrayLikeToArray.js","webpack://AgoraSDK/(webpack)/buildin/global.js","webpack://AgoraSDK/./report_service/gen-js/report_item_miniapp_types.js","webpack://AgoraSDK/./report_service/gen-js/VosdkCommon_types.js","webpack://AgoraSDK/./node_modules/uuid/v4.js","webpack://AgoraSDK/./node_modules/@babel/runtime/helpers/typeof.js","webpack://AgoraSDK/./node_modules/uuid/lib/rng-browser.js","webpack://AgoraSDK/./node_modules/uuid/lib/bytesToUuid.js","webpack://AgoraSDK/./node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js","webpack://AgoraSDK/./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack://AgoraSDK/./node_modules/@babel/runtime/helpers/iterableToArray.js","webpack://AgoraSDK/./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","webpack://AgoraSDK/./node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack://AgoraSDK/./node_modules/timers-browserify/main.js","webpack://AgoraSDK/./node_modules/setimmediate/setImmediate.js","webpack://AgoraSDK/./node_modules/process/browser.js","webpack://AgoraSDK/./node_modules/wolfy87-eventemitter/EventEmitter.js","webpack://AgoraSDK/./report_service/gen-js/ReportService.js","webpack://AgoraSDK/./report_service/gen-js/miniapp_types.js","webpack://AgoraSDK/./node_modules/mitt/dist/mitt.es.js","webpack://AgoraSDK/./src/ChooseServer.js","webpack://AgoraSDK/./src/WXSocket.js","webpack://AgoraSDK/./src/Message.js","webpack://AgoraSDK/./src/Worker.js","webpack://AgoraSDK/./src/Report.js","webpack://AgoraSDK/./src/Client.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__importDefault","mod","wolfy87_eventemitter_1","Config_1","Log_1","Check_1","Helper_1","ChannelMediaRelayController","default","joinInfo","clientId","super","_state","CHANNEL_MEDIA_RELAY_STATE","RELAY_STATE_IDLE","_onStatus","debug","JSON","stringify","command","emit","CHANNEL_MEDIA_RELAY_EVENT","PACKET_RECEIVED_AUDIO_FROM_SRC","PACKET_RECEIVED_VIDEO_FROM_SRC","RELAY_STATE_FAILURE","CHANNEL_MEDIA_RELAY_ERROR","SRC_TOKEN_EXPIRED","DEST_TOKEN_EXPIRED","channelName","came","_onClose","NETWORK_DISCONNECTED","state","_prevChannelMediaConfig","startChannelMediaRelay","ChannelMediaError","message","CHANNEL_MEDIA_ERROR","WS_ABORT","AP_REQUEST_ABORT","SERVER_CONNECTION_LOST","token","appId","cname","uid","sid","prvState","channelMediaRelayConfiguration","BAD_STATE","RELAY_STATE_CONNECTING","_connect","_sendStartRelayMessage","RELAY_STATE_RUNNING","_sendUpdateMessage","_sendStopRelayMessage","dispose","_signal","removeEvent","url","payload","ts","Date","version","VERSION","seq","requestId","data","service_name","json_body","path","wx","request","header","method","success","res","resData","resBody","error","AP_JSON_PARSE_ERROR","code","AP_REQUEST_ERROR","parse","servers","fail","err","UAP_AP","setTimeout","AP_REQUEST_TIMEOUT","on","forEach","_requestOneAP","server","arr","address","split","length","serverURL","ws","catch","ChannelMediaSocket","connect","_requestAP","_connectWebsocket","NETWORK_CONNECTED","_checkSignal","stopPacketMsg","_genMessage","MESSAGE_TYPE","StopPacketTransfer","all","waitStatus","setSdkProfileMsg","SetSdkProfile","setSourceChannelMsg","SetSourceChannel","PACKET_JOINED_SRC_CHANNEL","setSourceUserIdMsg","SetSourceUserId","setDestChannelMsg","SetDestChannel","PACKET_JOINED_DEST_CHANNEL","startPacketTransferMsg","StartPacketTransfer","PACKET_SENT_TO_DEST_CHANNEL","reconnectMsg","Reconnect","updateMsg","UpdateDestChannel","PACKET_UPDATE_DEST_CHANNEL","messageType","cnames","uids","tokens","sdkVersion","allocate","clientRequest","destInfos","srcInfo","type","getSrcChannelMediaInfo","getDestChannelMediaInfos","push","isConnect","WS_DISCONNECTED","ChannelMediaRelayConfiguration","destChannelMediaInfos","Map","checkValidObject","isValidToken","Error","isValidChannelName","is32Uint","srcChannelMediaInfo","destInfo","set","delete","_onOpen","_onMessage","console","log","blind","serverStatus","replace","_requestId","_ws","readyState","send","status","timer","WAIT_STATUS_TIMEOUT","once","clearTimeout","WAIT_STATUS_ERROR","sendMessage","removeAllListeners","REQUEST_TIMEOUT","REQUEST_FAILED","connectSocket","onOpen","profile","_prvUrl","onMessage","onClose","_startHeartBeatCheck","CONNECT_FAILED","close","CONNECT_TIMEOUT","_clearHeartBeatCheck","_heartBeatTimer","setInterval","_sendPing","clearInterval","Log","level","onLog","args","Array","slice","arguments","LOG","checkValidEnum","list","checkValidString","string","lenMin","lenMax","ascii","isEmpty","isValidString","checkValidNumber","number","isValidNumber","checkValidFloatNumber","isValidFloatNumber","checkValidBoolean","boolean","isValidBoolean","Number","MAX_SAFE_INTEGER","isString","isASCII","minimum","maximum","isInteger","isNumber","test","chr","charCodeAt","isArray","array","random","isNaN","seed","rnd","Math","ceil","generateSessionId","uuidv4","toUpperCase","shouldUseHttps","document","location","protocol","isWeiXin","instance","Constructor","TypeError","_defineProperties","target","props","descriptor","configurable","writable","protoProps","staticProps","SDK_VERSION","DOMAIN_NAME","Thrift","Version","Type","STOP","VOID","BOOL","BYTE","I08","DOUBLE","I16","I32","I64","STRING","UTF7","STRUCT","MAP","SET","LIST","UTF8","UTF16","MessageType","CALL","REPLY","EXCEPTION","ONEWAY","objectLength","obj","k","inherits","constructor","superConstructor","F","copyList","copyMap","TException","getMessage","TApplicationExceptionType","UNKNOWN","UNKNOWN_METHOD","INVALID_MESSAGE_TYPE","WRONG_METHOD_NAME","BAD_SEQUENCE_ID","MISSING_RESULT","INTERNAL_ERROR","PROTOCOL_ERROR","INVALID_TRANSFORM","INVALID_PROTOCOL","UNSUPPORTED_CLIENT_TYPE","TApplicationException","read","input","ret","readFieldBegin","ftype","fid","readString","skip","readI32","readFieldEnd","readStructEnd","write","output","writeStructBegin","writeFieldBegin","writeString","writeFieldEnd","writeI32","writeFieldStop","writeStructEnd","getCode","TProtocolExceptionType","INVALID_DATA","NEGATIVE_SIZE","SIZE_LIMIT","BAD_VERSION","NOT_IMPLEMENTED","DEPTH_LIMIT","TProtocolException","captureStackTrace","Transport","TXHRTransport","options","wpos","rpos","useCORS","customHeaders","send_buf","recv_buf","getXmlHttpRequestObject","XMLHttpRequest","e1","ActiveXObject","e2","e3","flush","async","callback","self","undefined","clientCallback","req","MediaType","responseText","setRecvBuffer","statusCode","keys","prop","jqRequest","client","postData","recv_method","jQuery","Deferred","thriftTransport","ajax","cache","contentType","dataType","converters","responseData","context","makeArray","pop","buf","recv_buf_sz","isOpen","open","len","avail","give","read_buf","substr","readAll","getSendBuffer","TWebSocketTransport","__reset","socket","callbacks","send_pending","rb_wpos","rb_rpos","msg","cb","__onOpen","elem","__onClose","evt","__onMessage","shift","__onError","toString","OPEN","CLOSED","WebSocket","onopen","onmessage","onerror","onclose","TJSONProtocol","Protocol","transport","tstack","tpos","RType","tf","i8","i16","i32","i64","dbl","rec","str","map","lst","getTransport","writeMessageBegin","seqid","writeMessageEnd","wobj","wbuf","join","struct","first","fieldType","fieldId","fieldInfo","writeMapBegin","keyType","valType","size","writeMapEnd","v","writeListBegin","elemType","writeListEnd","tmpVal","splice","writeSetBegin","writeSetEnd","writeBool","writeByte","writeI16","writeI64","writeDouble","escapedString","ch","charAt","writeBinary","binary","Uint8Array","String","fromCharCode","btoa","readMessageBegin","rstack","a","robj","parseJSON","eval","fname","mtype","rseqid","readMessageEnd","readStructBegin","f","parseInt","field","pos","readMapBegin","ktype","vtype","readMapEnd","readListBegin","etype","readListEnd","readSetBegin","readSetEnd","readBool","readByte","readI16","readI64","readDouble","readBinary","atob","MultiplexProtocol","srvName","trans","strictRead","strictWrite","serviceName","Multiplexer","createClient","SCl","Client","new_seqid","types","val","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","asyncGeneratorStep","gen","_next","_throw","arg","info","fn","arr2","g","Function","require","MiniappSDK","MiniappSession","MiniappJoinChooseServer","MiniappConnectWebSocket","MiniappJoin","MiniappPublish","MiniappUnpublish","MiniappSubscribe","MiniappUnsubscribe","MiniappLeave","MiniappServerEvent","MiniappPusherState","MiniappPlayerState","ReportItem","uri","miniappSession","miniappJoinChooseServer","miniappConnectWebSocket","miniappJoin","miniappPublish","miniappUnpublish","miniappSubscribe","miniappUnsubscribe","miniappLeave","miniappServerEvent","miniappPusherState","miniappPlayerState","miniappPusherStateEvent","MiniappPusherStateEvent","miniappPlayerStateEvent","MiniappPlayerStateEvent","VosdkHeader","cid","lts","ip","elapse","peer","VosdkCounterItem","id","tagErrorCode","VosdkCounter","items","_size0","_rtmp34","_i5","elem6","iter7","rng","bytesToUuid","offset","rnds","ii","_typeof","iterator","getRandomValues","crypto","msCrypto","rnds8","byteToHex","bth","runtime","Op","hasOwn","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","Context","_invoke","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","makeInvokeMethod","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","invoke","__await","unwrapped","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","iter","reverse","skipTempReset","prev","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","arrayLikeToArray","from","minLen","Timeout","clearFn","_id","_clearFn","scope","timeout","unref","ref","enroll","item","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","setImmediate","global","clearImmediate","registerImmediate","html","channel","messagePrefix","onGlobalMessage","nextHandle","tasksByHandle","currentlyRunningATask","doc","attachTo","process","nextTick","runIfPresent","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","canUsePostMessage","MessageChannel","port1","event","port2","createElement","documentElement","script","onreadystatechange","removeChild","appendChild","source","indexOf","addEventListener","attachEvent","task","run","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","marker","runClearTimeout","Item","noop","title","browser","env","argv","versions","addListener","off","removeListener","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","EventEmitter","proto","originalGlobalValue","indexOfListener","listener","alias","getListeners","response","events","_getEvents","RegExp","flattenListeners","flatListeners","getListenersAsObject","isValidListener","listenerIsWrapped","addOnceListener","defineEvent","defineEvents","evts","index","addListeners","manipulateListeners","removeListeners","remove","single","multiple","_events","emitEvent","listenersMap","_getOnceReturnValue","trigger","setOnceReturnValue","_onceReturnValue","noConflict","ReportService_Report_args","ReportService_Report_result","ReportServiceClient","Report","send_Report","recv_Report","x","appid","uname","ver","dk","details","csurl","ec","gatewaylist","gateway","wsurl","isrejoin","pushurl","pullurl","peerid","action","req_ts","handler","CHOOSE_SERVER_LIST","getServerList","option","reportManager","floor","now","failedCounter","failed","report","body","reason","addressRedirect","serverlist","errMsg","Socket","emitter","isInit","hasInvokeClose","connectWorker","_onopen","_onmessage","establishWSTimeoutTimer","connectNextWorker","_onclose","isConnected","closeCallback","MessageManager","opt","_getWorkerManagerMsg","role","dynamicKey","key_vocs","key_vos","channel_name","known_speakers","mute","Worker","channelKey","timers","Set","clientEmitter","mitt","msgManager","_ping","isWSConnected","getWSUrl","handleResponse","serverResponse","add","pingTimer","ping","_sendMessage","setRole","rejoin","updatePushUrl","publish","unpublish","subscribe","unsubscribe","unmute","muteLocal","unmuteLocal","leave","destroy","config","channelMediaRelayController","RELAY_ALREADY_START","onEvent","onState","stateCode","channelMediaConfig","RELAY_NOT_START","updateChannelMediaRelay","PACKET_UPDATE_DEST_CHANNEL_REFUSED","stopChannelMediaRelay","ReportManager","seqId","_cache","isReporting","retryCount","startTime","eventName","generateHeader","eventItem","_report","delay","nextEventItem","pushUrl","playUrls","onSuccess","onFailure","toLowerCase","trim","worker","updateURL","_checkWorker","_checkUid","rotation","detail","playUrl"],"mappings":"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","file":"mini-app-sdk-production.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"AgoraSDK\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"AgoraSDK\"] = factory();\n\telse\n\t\troot[\"AgoraSDK\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 30);\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst wolfy87_eventemitter_1 = __importDefault(require(\"wolfy87-eventemitter\"));\nconst Config_1 = require(\"./Config\");\nconst Log_1 = __importDefault(require(\"./Log\"));\nconst Check_1 = require(\"./utils/Check\");\nconst Helper_1 = require(\"./Helper\");\nconst CLOSED = 3;\nconst CLOSING = 2;\nconst CONNECTING = 0;\nconst OPEN = 1;\nclass ChannelMediaRelayController extends wolfy87_eventemitter_1.default {\n    constructor(joinInfo, clientId) {\n        super();\n        this._state = CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE;\n        this._onStatus = (e) => {\n            Log_1.default.debug(`[${this.clientId}] ChannelMediaStatus: ${JSON.stringify(e)}`);\n            if (e && e.command) {\n                if (e.command === \"onAudioPacketReceived\") {\n                    this.emit(\"event\", CHANNEL_MEDIA_RELAY_EVENT.PACKET_RECEIVED_AUDIO_FROM_SRC);\n                }\n                if (e.command === \"onVideoPacketReceived\") {\n                    this.emit(\"event\", CHANNEL_MEDIA_RELAY_EVENT.PACKET_RECEIVED_VIDEO_FROM_SRC);\n                }\n                if (e.command === \"onSrcTokenPrivilegeDidExpire\") {\n                    this._state = CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE;\n                    this.emit(\"state\", CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE, CHANNEL_MEDIA_RELAY_ERROR.SRC_TOKEN_EXPIRED);\n                }\n                if (e.command === \"onDestTokenPrivilegeDidExpire\") {\n                    this._state = CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE;\n                    this.emit(\"state\", CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE, CHANNEL_MEDIA_RELAY_ERROR.DEST_TOKEN_EXPIRED, e.channelName ? { came: e.channelName } : null);\n                }\n            }\n        };\n        this._onClose = () => __awaiter(this, void 0, void 0, function* () {\n            Log_1.default.debug(`[${this.clientId}] ChannelMediaSocket onClose`);\n            this.emit(\"event\", CHANNEL_MEDIA_RELAY_EVENT.NETWORK_DISCONNECTED);\n            this.state = CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE;\n            if (this._prevChannelMediaConfig) {\n                try {\n                    yield this.startChannelMediaRelay(this._prevChannelMediaConfig);\n                }\n                catch (e) {\n                    if (e instanceof ChannelMediaError) {\n                        if (e.message === CHANNEL_MEDIA_ERROR.WS_ABORT || e.message === CHANNEL_MEDIA_ERROR.AP_REQUEST_ABORT) {\n                            return;\n                        }\n                    }\n                    this.emit(\"state\", CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE, CHANNEL_MEDIA_RELAY_ERROR.SERVER_CONNECTION_LOST);\n                }\n            }\n        });\n        this.token = joinInfo.appId;\n        this.appId = joinInfo.appId;\n        this.cname = joinInfo.cname;\n        this.uid = joinInfo.uid;\n        this.sid = joinInfo.sid;\n        this.clientId = clientId;\n    }\n    set state(state) {\n        const prvState = this._state;\n        this._state = state;\n        if (prvState !== state) {\n            this.emit(\"state\", state);\n        }\n    }\n    get state() {\n        return this._state;\n    }\n    startChannelMediaRelay(channelMediaRelayConfiguration) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.state !== CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE) {\n                throw new ChannelMediaError(CHANNEL_MEDIA_ERROR.BAD_STATE);\n            }\n            this.state = CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_CONNECTING;\n            yield this._connect();\n            Log_1.default.debug(`[${this.clientId}] startChannelMediaRelay: connect success`);\n            yield this._sendStartRelayMessage(channelMediaRelayConfiguration);\n            this._prevChannelMediaConfig = channelMediaRelayConfiguration;\n        });\n    }\n    updateChannelMediaRelay(channelMediaRelayConfiguration) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.state !== CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_RUNNING) {\n                throw new ChannelMediaError(CHANNEL_MEDIA_ERROR.BAD_STATE);\n            }\n            yield this._sendUpdateMessage(channelMediaRelayConfiguration);\n            this._prevChannelMediaConfig = channelMediaRelayConfiguration;\n        });\n    }\n    stopChannelMediaRelay() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this._sendStopRelayMessage();\n            Log_1.default.debug(`[${this.clientId}] stopChannelMediaRelay: send stop message success`);\n            this.state = CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE;\n            this.dispose();\n        });\n    }\n    dispose() {\n        Log_1.default.debug(`[${this.clientId}] disposeChannelMediaRelay`);\n        this.state = CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE;\n        this.emit(\"dispose\");\n        // this._signal && this._signal.isConnect() && this.emit(\"event\", CHANNEL_MEDIA_RELAY_EVENT.NETWORK_DISCONNECTED);\n        if (this._signal) {\n            this._signal.dispose();\n        }\n        this._prevChannelMediaConfig = null;\n        this.removeEvent();\n    }\n    /**\n     * APPCenter  httpsAPappCenterappCenterAP\n     * AP   header  data \n     * APPCenterhttps://uap-doc.agoralab.co/modules/app_center.html#_2_x2e3_x2e3_x2e2-%E6%B1%87%E8%81%9A%E5%88%86%E9%85%8D%E5%8D%8F%E8%AE%AE\n     */\n    _requestOneAP(url) {\n        return new Promise((resolve, reject) => {\n            const payload = {\n                command: \"convergeAllocateEdge\",\n                sid: this.sid,\n                appId: this.appId,\n                token: \"\",\n                ts: +new Date(),\n                version: Config_1.VERSION,\n                cname: this.cname,\n                uid: this.uid + \"\",\n                seq: 1,\n                requestId: 1,\n            };\n            const data = {\n                // test: service_name: \"cross_channel\",\n                service_name: \"tele_channel\",\n                json_body: JSON.stringify(payload),\n            };\n            const path = `https://${url}`;\n            // @ts-ignore\n            wx.request({\n                url: path,\n                data: data,\n                header: {\n                    'content-type': 'application/json',\n                    \"X-Packet-Service-Type\": 0,\n                    \"X-Packet-URI\": 61,\n                },\n                method: 'POST',\n                success: (res) => {\n                    let resData = null;\n                    let resBody = null;\n                    try {\n                        resData = res.data;\n                    }\n                    catch (error) {\n                        reject(new ChannelMediaError(CHANNEL_MEDIA_ERROR.AP_JSON_PARSE_ERROR, error));\n                    }\n                    if (resData.code !== 0) {\n                        reject(new ChannelMediaError(CHANNEL_MEDIA_ERROR.AP_REQUEST_ERROR, resData));\n                    }\n                    try {\n                        resBody = JSON.parse(resData.json_body);\n                    }\n                    catch (error) {\n                        reject(new ChannelMediaError(CHANNEL_MEDIA_ERROR.AP_JSON_PARSE_ERROR, error));\n                    }\n                    if (resBody.code !== 200) {\n                        reject(new ChannelMediaError(CHANNEL_MEDIA_ERROR.AP_REQUEST_ERROR, resBody));\n                    }\n                    if (resBody.servers) {\n                        resolve(resBody.servers);\n                    }\n                    else {\n                        reject(new ChannelMediaError(CHANNEL_MEDIA_ERROR.AP_JSON_PARSE_ERROR, resBody));\n                    }\n                },\n                fail: (err) => reject(err)\n            });\n        });\n    }\n    _requestAP() {\n        const UAP_AP = [\n            \"ap-web-test.agora.io\",\n            \"ap-web-test.agora.io\",\n            \"ap-web-test.agora.io\",\n            \"ap-web-test.agora.io\",\n        ];\n        return new Promise((resolve, reject) => {\n            setTimeout(() => {\n                reject(new ChannelMediaError(CHANNEL_MEDIA_ERROR.AP_REQUEST_TIMEOUT));\n            }, 3000);\n            this.on(\"dispose\", () => {\n                reject(new ChannelMediaError(CHANNEL_MEDIA_ERROR.AP_REQUEST_ABORT));\n            });\n            UAP_AP.forEach((url) => {\n                url += \"/api/v1\";\n                this._requestOneAP(url).then((res) => {\n                    Log_1.default.debug(`[${this.clientId}] startChannelMediaRelay request AP ${url} success: ${JSON.stringify(res)}`);\n                    const server = res[0];\n                    url = server.address;\n                    let arr = url.split('.');\n                    let length = arr.length;\n                    const serverURL = `wss://miniapp.agoraio.cn/${arr[length - 4]}-${arr[length - 3]}-${arr[length - 2]}-${arr[length - 1]}-${server.ws}/`;\n                    // const serverURL = `wss://${server.address.replace(/\\./g, \"-\")}.edge.agora.io:${server.wss}`;\n                    // const serverURL = `ws://${res[0].address}:${res[0].ws}`;\n                    resolve(serverURL);\n                }).catch((e) => {\n                    Log_1.default.debug(`[${this.clientId}] startChannelMediaRelay request AP ${url} failed: ${JSON.stringify(e)}`);\n                });\n            });\n        });\n    }\n    _connectWebsocket(url) {\n        this._signal = new ChannelMediaSocket(this.appId, this.cname, this.uid, this.sid);\n        return this._signal.connect(url);\n    }\n    _connect() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const serverURL = yield this._requestAP();\n            yield this._connectWebsocket(serverURL);\n            this._signal.on(\"close\", this._onClose.bind(this));\n            this._signal.on(\"status\", this._onStatus.bind(this));\n            this.emit(\"event\", CHANNEL_MEDIA_RELAY_EVENT.NETWORK_CONNECTED);\n            return;\n        });\n    }\n    /**\n     *  SetSdkProfileSetSourceChannelSetSourceUserIdSetDestChannelStartPacketTransferStatus \n     * 1SetSdkProfile(.....)\n     *   SetSdkProfiletypemulti_channel\n     * 2SetSdkProfileresponseSetSourceChannel\n     *   SetSourceChanneluid0channel\n     * 3SetSourceChannelcallback status SetSourceUserId\n     *   SetSourceUserIduiduid\n     * 4SetSourceUserIdresponseSetDestChannel\n     *   SetDestChanneluid\n     * 5SetDestChannelcallback statusStartPacketTransferStatus\n     *   \n     * 6StartPacketTransferStatusresponse\n     * PS:  callback status  response\n     */\n    _sendStartRelayMessage(channelMediaRelayConfiguration) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._checkSignal();\n            /**\n             * serverSDKserver\n             * serverSDKstopstart\n             * stopserver\n             */\n            const stopPacketMsg = this._genMessage(MESSAGE_TYPE.StopPacketTransfer);\n            yield Promise.all([this._signal.request(stopPacketMsg), this._signal.waitStatus(\"Normal Quit\")]);\n            Log_1.default.debug(`[${this.clientId}] startChannelMediaRelay: StopPacketTransfer success`);\n            const setSdkProfileMsg = this._genMessage(MESSAGE_TYPE.SetSdkProfile, channelMediaRelayConfiguration);\n            yield this._signal.request(setSdkProfileMsg);\n            Log_1.default.debug(`[${this.clientId}] startChannelMediaRelay: SetSdkProfile success`);\n            const setSourceChannelMsg = this._genMessage(MESSAGE_TYPE.SetSourceChannel, channelMediaRelayConfiguration);\n            yield Promise.all([this._signal.request(setSourceChannelMsg), this._signal.waitStatus(\"SetSourceChannelStatus\")]);\n            this.emit(\"event\", CHANNEL_MEDIA_RELAY_EVENT.PACKET_JOINED_SRC_CHANNEL);\n            Log_1.default.debug(`[${this.clientId}] startChannelMediaRelay: SetSourceChannel success`);\n            const setSourceUserIdMsg = this._genMessage(MESSAGE_TYPE.SetSourceUserId, channelMediaRelayConfiguration);\n            yield this._signal.request(setSourceUserIdMsg);\n            Log_1.default.debug(`[${this.clientId}] startChannelMediaRelay: SetSourceUserId success`);\n            const setDestChannelMsg = this._genMessage(MESSAGE_TYPE.SetDestChannel, channelMediaRelayConfiguration);\n            yield Promise.all([this._signal.request(setDestChannelMsg), this._signal.waitStatus(\"SetDestChannelStatus\")]);\n            this.emit(\"event\", CHANNEL_MEDIA_RELAY_EVENT.PACKET_JOINED_DEST_CHANNEL);\n            Log_1.default.debug(`[${this.clientId}] startChannelMediaRelay: SetDestChannel success`);\n            const startPacketTransferMsg = this._genMessage(MESSAGE_TYPE.StartPacketTransfer, channelMediaRelayConfiguration);\n            yield this._signal.request(startPacketTransferMsg);\n            this.emit(\"event\", CHANNEL_MEDIA_RELAY_EVENT.PACKET_SENT_TO_DEST_CHANNEL);\n            this.state = CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_RUNNING;\n            Log_1.default.debug(`[${this.clientId}] startChannelMediaRelay: StartPacketTransfer success`);\n        });\n    }\n    /**\n     * stopstart\n     */\n    _sendReconnectMessage(channelMediaRelayConfiguration) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._checkSignal();\n            const reconnectMsg = this._genMessage(MESSAGE_TYPE.Reconnect, channelMediaRelayConfiguration);\n            yield this._signal.request(reconnectMsg);\n        });\n    }\n    _sendUpdateMessage(channelMediaRelayConfiguration) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._checkSignal();\n            const updateMsg = this._genMessage(MESSAGE_TYPE.UpdateDestChannel, channelMediaRelayConfiguration);\n            yield this._signal.request(updateMsg);\n            this.emit(\"event\", CHANNEL_MEDIA_RELAY_EVENT.PACKET_UPDATE_DEST_CHANNEL);\n            Log_1.default.debug(`[${this.clientId}] sendUpdateMessage: UpdateDestChannel success`);\n        });\n    }\n    _sendStopRelayMessage() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._checkSignal();\n            const stopPacketMsg = this._genMessage(MESSAGE_TYPE.StopPacketTransfer);\n            yield this._signal.request(stopPacketMsg);\n            Log_1.default.debug(`[${this.clientId}] sendStopRelayMessage: StopPacketTransfer success`);\n        });\n    }\n    _genMessage(messageType, channelMediaRelayConfiguration) {\n        // use in UpdateDestChannel and SetDestChannel\n        const cnames = [];\n        const uids = [];\n        const tokens = [];\n        const message = {\n            appId: this.appId,\n            cname: this.cname,\n            uid: this.uid + \"\",\n            sdkVersion: Config_1.VERSION,\n            sid: this.sid,\n            ts: +new Date(),\n            requestId: 0,\n            seq: 0,\n            allocate: true,\n            clientRequest: {},\n        };\n        let destInfos = null;\n        let srcInfo = null;\n        switch (messageType) {\n            case MESSAGE_TYPE.SetSdkProfile:\n                message.clientRequest = {\n                    command: \"SetSdkProfile\",\n                    type: \"multi_channel\",\n                };\n                return message;\n            case MESSAGE_TYPE.SetSourceChannel:\n                srcInfo = channelMediaRelayConfiguration.getSrcChannelMediaInfo();\n                message.clientRequest = {\n                    command: \"SetSourceChannel\",\n                    uid: srcInfo.uid + \"\",\n                    channelName: srcInfo.channelName,\n                    token: srcInfo.token || this.appId,\n                };\n                return message;\n            case MESSAGE_TYPE.SetSourceUserId:\n                srcInfo = channelMediaRelayConfiguration.getSrcChannelMediaInfo();\n                message.clientRequest = {\n                    command: \"SetSourceUserId\",\n                    uid: this.uid + \"\",\n                };\n                return message;\n            case MESSAGE_TYPE.SetDestChannel:\n                destInfos = channelMediaRelayConfiguration.getDestChannelMediaInfos();\n                destInfos.forEach((value) => {\n                    cnames.push(value.channelName);\n                    uids.push(value.uid + \"\");\n                    tokens.push(value.token || this.appId);\n                });\n                message.clientRequest = {\n                    command: \"SetDestChannel\",\n                    channelName: cnames,\n                    uid: uids,\n                    token: tokens,\n                };\n                return message;\n            case MESSAGE_TYPE.StartPacketTransfer:\n                message.clientRequest = {\n                    command: \"StartPacketTransfer\",\n                };\n                return message;\n            case MESSAGE_TYPE.Reconnect:\n                message.clientRequest = {\n                    command: \"Reconnect\",\n                };\n                return message;\n            case MESSAGE_TYPE.StopPacketTransfer:\n                message.clientRequest = {\n                    command: \"StopPacketTransfer\",\n                };\n                return message;\n            case MESSAGE_TYPE.UpdateDestChannel:\n                destInfos = channelMediaRelayConfiguration.getDestChannelMediaInfos();\n                destInfos.forEach((value) => {\n                    cnames.push(value.channelName);\n                    uids.push(value.uid + \"\");\n                    tokens.push(value.token || this.appId);\n                });\n                message.clientRequest = {\n                    command: \"UpdateDestChannel\",\n                    channelName: cnames,\n                    uid: uids,\n                    token: tokens,\n                };\n                return message;\n        }\n    }\n    _checkSignal() {\n        if (!this._signal || !this._signal.isConnect()) {\n            throw new ChannelMediaError(CHANNEL_MEDIA_ERROR.WS_DISCONNECTED);\n        }\n    }\n}\nexports.default = ChannelMediaRelayController;\n/**\n * 10.16\n * token\n * token\n * tokenappid\n * APPID\n * tokentoken\n * 11.6\n * WebTokennativeTokenToken\n * token\n * 11.28\n * \"nativechannelMediaRelayToken\"\n * Token\n * TokenToken\n * token\n */\nclass ChannelMediaRelayConfiguration {\n    constructor() {\n        this.destChannelMediaInfos = new Map();\n    }\n    setSrcChannelInfo(srcInfo) {\n        Check_1.checkValidObject(srcInfo, \"srcInfo\");\n        const { uid, channelName, token, } = srcInfo;\n        if (token && !Check_1.isValidToken(token)) {\n            throw new Error(`Invalid token in SrcChannelInfo`);\n        }\n        if (!Check_1.isValidChannelName(channelName)) {\n            throw new Error(`Invalid channelName in SrcChannelInfo`);\n        }\n        if (!Helper_1.is32Uint(uid)) {\n            throw new Error(`Invalid uid in SrcChannelInfo`);\n        }\n        this.srcChannelMediaInfo = srcInfo;\n    }\n    setDestChannelInfo(channelName, destInfo) {\n        if (!Check_1.isValidChannelName(channelName)) {\n            throw new Error(`Invalid channelName in DestChannelInfo`);\n        }\n        Check_1.checkValidObject(destInfo, \"destInfo\");\n        const { uid, token, } = destInfo;\n        const cname = destInfo.channelName;\n        if (token && !Check_1.isValidToken(token)) {\n            throw new Error(`Invalid token in DestChannelInfo`);\n        }\n        if (!Check_1.isValidChannelName(cname)) {\n            throw new Error(`Invalid channelName in DestChannelInfo`);\n        }\n        if (!Helper_1.is32Uint(uid)) {\n            throw new Error(`Invalid uid in DestChannelInfo`);\n        }\n        this.destChannelMediaInfos.set(channelName, destInfo);\n    }\n    removeDestChannelInfo(channelName) {\n        if (!Check_1.isValidChannelName(channelName)) {\n            throw new Error(`Invalid channelName when invoke removeDestChannelInfo`);\n        }\n        this.destChannelMediaInfos.delete(channelName);\n    }\n    getSrcChannelMediaInfo() {\n        return this.srcChannelMediaInfo;\n    }\n    getDestChannelMediaInfos() {\n        return this.destChannelMediaInfos;\n    }\n}\nexports.ChannelMediaRelayConfiguration = ChannelMediaRelayConfiguration;\nclass ChannelMediaSocket extends wolfy87_eventemitter_1.default {\n    constructor(appId, cname, uid, sid) {\n        super();\n        this._onOpen = () => {\n            Log_1.default.debug(`[ChannelMediaRelay] onOpen`);\n            this.emit(\"open\");\n        };\n        this._onClose = (e) => {\n            Log_1.default.debug(`[ChannelMediaRelay] onClose`);\n            this.emit(\"close\");\n            this.dispose();\n        };\n        this._onMessage = (e) => {\n            console.log(\"------------\", e);\n            Log_1.default.blind(\"ChannelMediaRelay receive message\", e);\n            const res = JSON.parse(e.data);\n            if (res && res.command === \"serverResponse\") {\n                if (res.requestId) {\n                    this.emit(`req_${res.requestId}`, res);\n                    return;\n                }\n            }\n            if (res && res.command === \"serverStatus\") {\n                console.log('--------------', res.serverStatus, res.serverStatus.command);\n                if (res.serverStatus && res.serverStatus.command) {\n                    console.log('--------------2');\n                    this.emit(\"status\", res.serverStatus);\n                    const c = res.serverStatus.command.replace(\" \", \"\");\n                    console.log('=============', c, res.serverStatus);\n                    this.emit(c, res.serverStatus);\n                    return;\n                }\n            }\n        };\n        this._requestId = 1;\n        this.appId = appId;\n        this.cname = cname;\n        this.uid = uid;\n        this.sid = sid;\n    }\n    isConnect() {\n        return this._ws && this._ws.readyState === OPEN;\n    }\n    sendMessage(message) {\n        if (!this._ws || this._ws.readyState !== OPEN) {\n            throw new ChannelMediaError(CHANNEL_MEDIA_ERROR.WS_DISCONNECTED);\n        }\n        const requestId = this._requestId++;\n        message.requestId = requestId;\n        message.seq = requestId;\n        this._ws.send({\n            // @ts-ignore\n            data: JSON.stringify(message)\n        });\n        return requestId;\n    }\n    waitStatus(status) {\n        return new Promise((resolve, reject) => {\n            // \n            // if(message.clientRequest.command === \"SetSdkProfile\") reject(new ChannelMediaError(CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT, res));\n            const timer = setTimeout(() => {\n                reject(new ChannelMediaError(CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT, status));\n            }, 5000);\n            status = status.replace(\" \", \"\");\n            console.log('this.once(status, (', status);\n            this.once(status, (e) => {\n                console.log('---------', status);\n                clearTimeout(timer);\n                if (e.state && e.state !== 0) {\n                    reject(new ChannelMediaError(CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR, status));\n                }\n                else {\n                    resolve();\n                }\n            });\n            this.once(\"dispose\", () => {\n                clearTimeout(timer);\n                reject(new ChannelMediaError(CHANNEL_MEDIA_ERROR.WS_ABORT));\n            });\n        });\n    }\n    request(message) {\n        return new Promise((resolve, reject) => {\n            // \n            // if(message.clientRequest.command === \"SetSdkProfile\") reject(new ChannelMediaError(CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT, res));\n            const requestId = this.sendMessage(message);\n            const timer = setTimeout(() => {\n                this.removeAllListeners(`req_${requestId}`);\n                reject(new ChannelMediaError(CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT));\n            }, 3000);\n            this.once(`req_${requestId}`, (res) => {\n                clearTimeout(timer);\n                if (res && res.code === 200) {\n                    resolve(res);\n                }\n                else {\n                    reject(new ChannelMediaError(CHANNEL_MEDIA_ERROR.REQUEST_FAILED, res));\n                }\n            });\n            this.once(\"dispose\", () => {\n                clearTimeout(timer);\n                reject(new ChannelMediaError(CHANNEL_MEDIA_ERROR.WS_ABORT));\n            });\n        });\n    }\n    connect(url) {\n        return new Promise((resolve, reject) => {\n            //@ts-ignore\n            this._ws = wx.connectSocket({\n                url: url,\n            });\n            //@ts-ignore\n            this._ws.onOpen((header, profile) => {\n                Log_1.default.debug(`[ChannelMediaRelay] ws.onOpen`);\n                this._onOpen();\n                this._prvUrl = url;\n                //@ts-ignore\n                this._ws.onMessage(this._onMessage);\n                //@ts-ignore\n                this._ws.onClose(this._onClose);\n                this._startHeartBeatCheck();\n                resolve();\n            });\n            //@ts-ignore\n            this._ws.onClose((e) => {\n                Log_1.default.debug(`[ChannelMediaRelay] ws.onClose`, e);\n                this.dispose();\n                reject(new ChannelMediaError(CHANNEL_MEDIA_ERROR.CONNECT_FAILED, `websocket error code: ${e.code}`));\n            });\n            setTimeout(() => {\n                if (this._ws && this._ws.readyState !== OPEN) {\n                    //@ts-ignore\n                    this._ws.onMessage(null);\n                    //@ts-ignore\n                    this._ws.onClose(null);\n                    //@ts-ignore\n                    this._ws.close();\n                    this._ws = null;\n                    reject(new ChannelMediaError(CHANNEL_MEDIA_ERROR.CONNECT_TIMEOUT));\n                }\n            }, 5000);\n            this.once(\"dispose\", () => {\n                reject(new ChannelMediaError(CHANNEL_MEDIA_ERROR.WS_ABORT));\n            });\n        });\n    }\n    dispose() {\n        Log_1.default.debug(`[ChannelMediaRelay] dispose`);\n        this._clearHeartBeatCheck();\n        this.emit(\"dispose\");\n        this.removeEvent();\n        if (this._ws) {\n            //@ts-ignore\n            this._ws.onOpen(null);\n            //@ts-ignore\n            this._ws.onClose(null);\n            //@ts-ignore\n            this._ws.onMessage(null);\n            //@ts-ignore\n            this._ws.close(null);\n        }\n        this._ws = null;\n    }\n    _sendPing(message) {\n        if (!this._ws || this._ws.readyState !== OPEN) {\n            throw new ChannelMediaError(CHANNEL_MEDIA_ERROR.WS_DISCONNECTED);\n        }\n        const requestId = this._requestId++;\n        message.requestId = requestId;\n        this._ws.send({\n            // @ts-ignore\n            data: JSON.stringify(message)\n        });\n        return requestId;\n    }\n    _startHeartBeatCheck() {\n        this._heartBeatTimer = setInterval(() => {\n            this._sendPing({\n                command: \"ping\",\n                appId: this.appId,\n                cname: this.cname,\n                uid: this.uid + \"\",\n                sid: this.sid,\n                ts: +new Date(),\n                requestId: 0,\n            });\n        }, 3000);\n    }\n    _clearHeartBeatCheck() {\n        clearInterval(this._heartBeatTimer);\n    }\n}\nclass ChannelMediaError {\n    // private readonly name: string = \"ChannelMediaError\";\n    constructor(message = \"\", data, code) {\n        this.code = code;\n        this.data = data;\n        this.message = message;\n    }\n}\nexports.ChannelMediaError = ChannelMediaError;\n/**\n * \n */\nvar CHANNEL_MEDIA_ERROR;\n(function (CHANNEL_MEDIA_ERROR) {\n    CHANNEL_MEDIA_ERROR[\"CONNECT_FAILED\"] = \"connect failed\";\n    CHANNEL_MEDIA_ERROR[\"CONNECT_TIMEOUT\"] = \"connect timeout\";\n    CHANNEL_MEDIA_ERROR[\"WS_DISCONNECTED\"] = \"websocket disconnected\";\n    CHANNEL_MEDIA_ERROR[\"REQUEST_TIMEOUT\"] = \"request timeout\";\n    CHANNEL_MEDIA_ERROR[\"REQUEST_FAILED\"] = \"request failed\";\n    CHANNEL_MEDIA_ERROR[\"WAIT_STATUS_TIMEOUT\"] = \"wait status timeout\";\n    CHANNEL_MEDIA_ERROR[\"WAIT_STATUS_ERROR\"] = \"wait status error\";\n    CHANNEL_MEDIA_ERROR[\"BAD_STATE\"] = \"bad state\";\n    CHANNEL_MEDIA_ERROR[\"WS_ABORT\"] = \"ws abort\";\n    CHANNEL_MEDIA_ERROR[\"AP_REQUEST_TIMEOUT\"] = \"AP request timeout\";\n    CHANNEL_MEDIA_ERROR[\"AP_JSON_PARSE_ERROR\"] = \"AP json parse error\";\n    CHANNEL_MEDIA_ERROR[\"AP_REQUEST_ERROR\"] = \"AP request error\";\n    CHANNEL_MEDIA_ERROR[\"AP_REQUEST_ABORT\"] = \"AP request abort\";\n})(CHANNEL_MEDIA_ERROR = exports.CHANNEL_MEDIA_ERROR || (exports.CHANNEL_MEDIA_ERROR = {}));\nvar MESSAGE_TYPE;\n(function (MESSAGE_TYPE) {\n    MESSAGE_TYPE[MESSAGE_TYPE[\"SetSdkProfile\"] = 0] = \"SetSdkProfile\";\n    MESSAGE_TYPE[MESSAGE_TYPE[\"SetSourceChannel\"] = 1] = \"SetSourceChannel\";\n    MESSAGE_TYPE[MESSAGE_TYPE[\"SetSourceUserId\"] = 2] = \"SetSourceUserId\";\n    MESSAGE_TYPE[MESSAGE_TYPE[\"SetDestChannel\"] = 3] = \"SetDestChannel\";\n    MESSAGE_TYPE[MESSAGE_TYPE[\"StartPacketTransfer\"] = 4] = \"StartPacketTransfer\";\n    MESSAGE_TYPE[MESSAGE_TYPE[\"StopPacketTransfer\"] = 5] = \"StopPacketTransfer\";\n    MESSAGE_TYPE[MESSAGE_TYPE[\"UpdateDestChannel\"] = 6] = \"UpdateDestChannel\";\n    MESSAGE_TYPE[MESSAGE_TYPE[\"Reconnect\"] = 7] = \"Reconnect\";\n    MESSAGE_TYPE[MESSAGE_TYPE[\"SetVideoProfile\"] = 8] = \"SetVideoProfile\";\n})(MESSAGE_TYPE || (MESSAGE_TYPE = {}));\nvar CHANNEL_MEDIA_RELAY_EVENT;\n(function (CHANNEL_MEDIA_RELAY_EVENT) {\n    CHANNEL_MEDIA_RELAY_EVENT[CHANNEL_MEDIA_RELAY_EVENT[\"NETWORK_DISCONNECTED\"] = 0] = \"NETWORK_DISCONNECTED\";\n    CHANNEL_MEDIA_RELAY_EVENT[CHANNEL_MEDIA_RELAY_EVENT[\"NETWORK_CONNECTED\"] = 1] = \"NETWORK_CONNECTED\";\n    CHANNEL_MEDIA_RELAY_EVENT[CHANNEL_MEDIA_RELAY_EVENT[\"PACKET_JOINED_SRC_CHANNEL\"] = 2] = \"PACKET_JOINED_SRC_CHANNEL\";\n    CHANNEL_MEDIA_RELAY_EVENT[CHANNEL_MEDIA_RELAY_EVENT[\"PACKET_JOINED_DEST_CHANNEL\"] = 3] = \"PACKET_JOINED_DEST_CHANNEL\";\n    CHANNEL_MEDIA_RELAY_EVENT[CHANNEL_MEDIA_RELAY_EVENT[\"PACKET_SENT_TO_DEST_CHANNEL\"] = 4] = \"PACKET_SENT_TO_DEST_CHANNEL\";\n    CHANNEL_MEDIA_RELAY_EVENT[CHANNEL_MEDIA_RELAY_EVENT[\"PACKET_RECEIVED_VIDEO_FROM_SRC\"] = 5] = \"PACKET_RECEIVED_VIDEO_FROM_SRC\";\n    CHANNEL_MEDIA_RELAY_EVENT[CHANNEL_MEDIA_RELAY_EVENT[\"PACKET_RECEIVED_AUDIO_FROM_SRC\"] = 6] = \"PACKET_RECEIVED_AUDIO_FROM_SRC\";\n    CHANNEL_MEDIA_RELAY_EVENT[CHANNEL_MEDIA_RELAY_EVENT[\"PACKET_UPDATE_DEST_CHANNEL\"] = 7] = \"PACKET_UPDATE_DEST_CHANNEL\";\n    CHANNEL_MEDIA_RELAY_EVENT[CHANNEL_MEDIA_RELAY_EVENT[\"PACKET_UPDATE_DEST_CHANNEL_REFUSED\"] = 8] = \"PACKET_UPDATE_DEST_CHANNEL_REFUSED\";\n    CHANNEL_MEDIA_RELAY_EVENT[CHANNEL_MEDIA_RELAY_EVENT[\"PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE\"] = 9] = \"PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE\";\n})(CHANNEL_MEDIA_RELAY_EVENT = exports.CHANNEL_MEDIA_RELAY_EVENT || (exports.CHANNEL_MEDIA_RELAY_EVENT = {}));\nvar CHANNEL_MEDIA_RELAY_STATE;\n(function (CHANNEL_MEDIA_RELAY_STATE) {\n    CHANNEL_MEDIA_RELAY_STATE[CHANNEL_MEDIA_RELAY_STATE[\"RELAY_STATE_IDLE\"] = 0] = \"RELAY_STATE_IDLE\";\n    CHANNEL_MEDIA_RELAY_STATE[CHANNEL_MEDIA_RELAY_STATE[\"RELAY_STATE_CONNECTING\"] = 1] = \"RELAY_STATE_CONNECTING\";\n    CHANNEL_MEDIA_RELAY_STATE[CHANNEL_MEDIA_RELAY_STATE[\"RELAY_STATE_RUNNING\"] = 2] = \"RELAY_STATE_RUNNING\";\n    CHANNEL_MEDIA_RELAY_STATE[CHANNEL_MEDIA_RELAY_STATE[\"RELAY_STATE_FAILURE\"] = 3] = \"RELAY_STATE_FAILURE\";\n})(CHANNEL_MEDIA_RELAY_STATE = exports.CHANNEL_MEDIA_RELAY_STATE || (exports.CHANNEL_MEDIA_RELAY_STATE = {}));\n/**\n * Native\n */\nvar CHANNEL_MEDIA_RELAY_ERROR;\n(function (CHANNEL_MEDIA_RELAY_ERROR) {\n    CHANNEL_MEDIA_RELAY_ERROR[CHANNEL_MEDIA_RELAY_ERROR[\"RELAY_OK\"] = 0] = \"RELAY_OK\";\n    CHANNEL_MEDIA_RELAY_ERROR[CHANNEL_MEDIA_RELAY_ERROR[\"SERVER_ERROR_RESPONSE\"] = 1] = \"SERVER_ERROR_RESPONSE\";\n    CHANNEL_MEDIA_RELAY_ERROR[CHANNEL_MEDIA_RELAY_ERROR[\"SERVER_NO_RESPONSE\"] = 2] = \"SERVER_NO_RESPONSE\";\n    CHANNEL_MEDIA_RELAY_ERROR[CHANNEL_MEDIA_RELAY_ERROR[\"NO_RESOURCE_AVAILABLE\"] = 3] = \"NO_RESOURCE_AVAILABLE\";\n    //   SetSourceChannelStatus\n    CHANNEL_MEDIA_RELAY_ERROR[CHANNEL_MEDIA_RELAY_ERROR[\"FAILED_JOIN_SRC\"] = 4] = \"FAILED_JOIN_SRC\";\n    //   SetDestChannelStatus\n    CHANNEL_MEDIA_RELAY_ERROR[CHANNEL_MEDIA_RELAY_ERROR[\"FAILED_JOIN_DEST\"] = 5] = \"FAILED_JOIN_DEST\";\n    // \n    CHANNEL_MEDIA_RELAY_ERROR[CHANNEL_MEDIA_RELAY_ERROR[\"FAILED_PACKET_RECEIVED_FROM_SRC\"] = 6] = \"FAILED_PACKET_RECEIVED_FROM_SRC\";\n    //   StartPacketTransfer\n    CHANNEL_MEDIA_RELAY_ERROR[CHANNEL_MEDIA_RELAY_ERROR[\"FAILED_PACKET_SENT_TO_DEST\"] = 7] = \"FAILED_PACKET_SENT_TO_DEST\";\n    CHANNEL_MEDIA_RELAY_ERROR[CHANNEL_MEDIA_RELAY_ERROR[\"SERVER_CONNECTION_LOST\"] = 8] = \"SERVER_CONNECTION_LOST\";\n    CHANNEL_MEDIA_RELAY_ERROR[CHANNEL_MEDIA_RELAY_ERROR[\"INTERNAL_ERROR\"] = 9] = \"INTERNAL_ERROR\";\n    CHANNEL_MEDIA_RELAY_ERROR[CHANNEL_MEDIA_RELAY_ERROR[\"SRC_TOKEN_EXPIRED\"] = 10] = \"SRC_TOKEN_EXPIRED\";\n    CHANNEL_MEDIA_RELAY_ERROR[CHANNEL_MEDIA_RELAY_ERROR[\"DEST_TOKEN_EXPIRED\"] = 11] = \"DEST_TOKEN_EXPIRED\";\n    // WebSDK\n    CHANNEL_MEDIA_RELAY_ERROR[CHANNEL_MEDIA_RELAY_ERROR[\"RELAY_ALREADY_START\"] = 12] = \"RELAY_ALREADY_START\";\n    CHANNEL_MEDIA_RELAY_ERROR[CHANNEL_MEDIA_RELAY_ERROR[\"RELAY_NOT_START\"] = 13] = \"RELAY_NOT_START\";\n    CHANNEL_MEDIA_RELAY_ERROR[CHANNEL_MEDIA_RELAY_ERROR[\"OPERATION_ABORT\"] = 14] = \"OPERATION_ABORT\";\n})(CHANNEL_MEDIA_RELAY_ERROR = exports.CHANNEL_MEDIA_RELAY_ERROR || (exports.CHANNEL_MEDIA_RELAY_ERROR = {}));\n","const BLIND = -1;\nconst DEBUG = 0;\nconst INFO = 1;\nconst WARN = 2;\nconst ERROR = 3;\nconst NONE = 4;\n\nclass Log{\n  constructor() {\n    this.level = ERROR;\n    this.onLog = null;\n  }\n\n  setLogLevel(level) {\n    if(typeof level !=  \"number\" || !(level <= 4 && level >= -1)) {\n      throw Error('Invaild level');\n    } else {\n      this.level = level; \n    }\n  }\n  log() {\n    let args = Array.prototype.slice.call(arguments);\n    this.onLog && this.onLog(JSON.stringify(args));\n    console.log(...args);\n  }\n  error() {\n    let args = Array.prototype.slice.call(arguments);\n    this.onLog && this.onLog(JSON.stringify(args));\n    console.error(...args);\n  }\n\n  blind() {\n    let args = Array.prototype.slice.call(arguments);\n    this.level <= BLIND && this.log(`${new Date()} [BLIND]: `, ...args);\n  } \n\n  debug() {\n    let args = Array.prototype.slice.call(arguments);\n    this.level <= DEBUG && this.log(`${new Date()} [DEBUG]: `, ...args);\n  }\n\n  info(log) {\n    this.level <= INFO && this.log(`${new Date()} [INFO]: ${log}`);\n  }\n\n  warn(log) {\n    this.level <= WARN && this.log(`${new Date()} [WARN]: ${log}`);\n  }\n\n  error(log) {\n    this.level <= ERROR && this.error(`${new Date()} [ERROR]: ${log}`);\n  }\n\n}\n\n\nconst LOG = new Log();\n\nexport default LOG;\nexport {\n  Log\n}\n","const checkValidEnum = function(value, name, list) {\n  for(var i=0; i < list.length; i++) {\n    if(value === list[i]) return true;\n  }\n  throw new Error(`${name} can only be set as ${JSON.stringify(list)}`);\n}\n\nconst checkValidObject = function(object, name) {\n  if(!object) {\n    throw new Error(`Invalid param: ${name || 'param'} cannot be empty`);\n  } else if(typeof object !== 'object') {\n    throw new Error(`${name || 'This paramter'} is of the object type`);\n  }\n  return true;\n}\n\nconst checkValidString = function(string, name, lenMin, lenMax, ascii) {\n  if(isEmpty(lenMin)) {\n    lenMin = 1;\n  }\n  lenMax = lenMax || 255;\n  if (isEmpty(ascii)){\n    ascii = true;\n  }\n\n  if(isEmpty(string)) {\n    throw new Error(`${name || 'param'} cannot be empty`);\n  } else {\n    if(!isValidString(string, lenMin, lenMax, ascii)) {\n      throw new Error(`Invalid ${name || 'string param'}: Length of the string: [${lenMin},${lenMax}].${ascii ? \" ASCII characters only.\": \"\"}`);\n    }\n  }\n}\n\nconst checkValidNumber = function(number, name, lenMin, lenMax) {\n  if(isEmpty(lenMin)) {\n    lenMin = 1;\n  }\n  lenMax = lenMax || 10000;\n\n  if(isEmpty(number)) {\n    throw new Error(`${name || 'param'} cannot be empty`);\n  } else {\n    if(!isValidNumber(number, lenMin, lenMax)) {\n      throw new Error(`Invalid ${name || 'number param'}: The value range is [${lenMin},${lenMax}]. integer only`);\n    }\n  }\n}\n\nconst checkValidFloatNumber = function(number, name, lenMin, lenMax) {\n  if (number == null) {\n    throw new Error(`${name || 'param'} cannot be null`);\n  }\n\n  if(isEmpty(lenMin)) {\n    lenMin = 0;\n  }\n  lenMax = lenMax || 10000;\n\n  if(isEmpty(number)) {\n    throw new Error(`${name || 'param'} cannot be empty`);\n  } else {\n    if(!isValidFloatNumber(number, lenMin, lenMax)) {\n      throw new Error(`Invalid ${name || 'number param'}: The value range is [${lenMin},${lenMax}].`);\n    }\n  }\n}\n\nconst checkValidBoolean = function(boolean, name) {\n  if(isEmpty(boolean)) {\n    throw new Error(`${name || 'param'} cannot be empty`);\n  } else {\n    if(!isValidBoolean(boolean)) {\n      throw new Error(`Invalid ${name || 'boolean param'}: The value is of the boolean type.`);\n    }\n  }\n}\n\nconst isValidString = function(string, lenMin, lenMax, ascii) {\n  if (!lenMin){\n    lenMin = 0;\n  }\n  if (!lenMax){\n    lenMax = Number.MAX_SAFE_INTEGER;\n  }\n  if (isEmpty(ascii)){\n    ascii = true;\n  }\n  return isString(string) && (ascii ? isASCII(string) : true) && string.length >= lenMin && string.length <= lenMax;\n}\n\nconst isValidNumber = function(number, minimum, maximum) {\n  return isInteger(number) && number >= minimum && number <= maximum;\n}\n\nconst isValidFloatNumber = function(number, minimum, maximum) {\n  return isNumber(number) && number >= minimum && number <= maximum;\n}\n\nconst isValidBoolean = function(boolean) {\n  return typeof boolean === 'boolean';\n}\n\nconst isValidToken = function(token) {\n  return isValidString(token, 1, 2047)\n}\n\nconst isValidChannelName = function(cname) {\n  // https://docs.agora.io/en/Voice/API%20Reference/web/interfaces/agorartc.client.html#join\n  return isString(cname) && /^[a-zA-Z0-9 \\!\\#\\$\\%\\&\\(\\)\\+\\-\\:\\;\\<\\=\\.\\>\\?\\@\\[\\]\\^\\_\\{\\}\\|\\~\\,]{1,64}$/.test(cname);\n}\n\nconst isASCII = function(string) {\n  if(typeof string !== 'string') return;\n  for( var i = 0; i < string.length; i++) {\n    var chr = string.charCodeAt(i);\n    if( chr < 0 || chr > 255 ) {\n      return false;\n    }\n  }\n  return true;\n}\n\nconst isInteger= function(number) {\n  return typeof number === 'number' && number % 1 === 0;\n}\n\nconst isNumber= function(number) {\n  return typeof number === 'number';\n}\n\nconst isString = function(string) {\n  return typeof string === 'string';\n}\n\nconst isArray = function(array) {\n  return array instanceof Array\n}\n\nconst isEmpty = function(object) {\n  return object === null || object === undefined;\n}\n\nexport {\n  checkValidObject,\n  checkValidString,\n  checkValidNumber,\n  checkValidFloatNumber,\n  checkValidBoolean,\n  checkValidEnum,\n\n  isValidString,\n  isValidNumber,\n  isValidBoolean,\n\n  isASCII,\n  isInteger,\n  isNumber,\n  isString,\n  isArray,\n  isEmpty,\n\n  isValidToken,\n  isValidChannelName\n}\n","import uuidv4 from 'uuid/v4';\n\nconst random = (number) => {\n  if(isNaN(number)) {\n    number = 1000;\n  }\n  var seed = +new Date();\n  // https://www.zhihu.com/question/22818104\n  seed = (seed * 9301 + 49297) % 233280;\n  var rnd = seed / (233280.0);\n  return Math.ceil(rnd * number);\n}\n\nconst generateSessionId = () => {\n  return uuidv4().replace(/-/g,\"\").toUpperCase();\n}\n\nvar shouldUseHttps = () => {\n  return \"https:\" == document.location.protocol ? true : false;\n}\n\nconst isWeiXin = () => {\n  try {\n    wx\n    return true;\n  } catch (error) {\n    return false\n  }\n}\n\nconst is32Uint = (n) => {\n  return !!(0 <= n && n <= 4294967296-1);\n}\n\nexport {\n  generateSessionId,\n  shouldUseHttps,\n  random,\n  isWeiXin,\n  is32Uint\n}","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","// SDKworker1.1.0\nconst VERSION = '1.1.0';\nconst SDK_VERSION = '2.4.2';\nconst DOMAIN_NAME = 'mini-app.broadcastapp.agoraio.cn';\n\nexport {\n  VERSION,\n  SDK_VERSION,\n  DOMAIN_NAME\n}","module.exports = require(\"regenerator-runtime\");\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements. See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership. The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License. You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied. See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/*jshint evil:true*/\n\n/**\n * The Thrift namespace houses the Apache Thrift JavaScript library\n * elements providing JavaScript bindings for the Apache Thrift RPC\n * system. End users will typically only directly make use of the\n * Transport (TXHRTransport/TWebSocketTransport) and Protocol\n * (TJSONPRotocol/TBinaryProtocol) constructors.\n *\n * Object methods beginning with a __ (e.g. __onOpen()) are internal\n * and should not be called outside of the object's own methods.\n *\n * This library creates one global object: Thrift\n * Code in this library must never create additional global identifiers,\n * all features must be scoped within the Thrift namespace.\n * @namespace\n * @example\n *     var transport = new Thrift.Transport('http://localhost:8585');\n *     var protocol  = new Thrift.Protocol(transport);\n *     var client = new MyThriftSvcClient(protocol);\n *     var result = client.MyMethod();\n */\nvar Thrift = {\n    /**\n     * Thrift JavaScript library version.\n     * @readonly\n     * @const {string} Version\n     * @memberof Thrift\n     */\n    Version: '0.11.0',\n\n    /**\n     * Thrift IDL type string to Id mapping.\n     * @readonly\n     * @property {number}  STOP   - End of a set of fields.\n     * @property {number}  VOID   - No value (only legal for return types).\n     * @property {number}  BOOL   - True/False integer.\n     * @property {number}  BYTE   - Signed 8 bit integer.\n     * @property {number}  I08    - Signed 8 bit integer.\n     * @property {number}  DOUBLE - 64 bit IEEE 854 floating point.\n     * @property {number}  I16    - Signed 16 bit integer.\n     * @property {number}  I32    - Signed 32 bit integer.\n     * @property {number}  I64    - Signed 64 bit integer.\n     * @property {number}  STRING - Array of bytes representing a string of characters.\n     * @property {number}  UTF7   - Array of bytes representing a string of UTF7 encoded characters.\n     * @property {number}  STRUCT - A multifield type.\n     * @property {number}  MAP    - A collection type (map/associative-array/dictionary).\n     * @property {number}  SET    - A collection type (unordered and without repeated values).\n     * @property {number}  LIST   - A collection type (unordered).\n     * @property {number}  UTF8   - Array of bytes representing a string of UTF8 encoded characters.\n     * @property {number}  UTF16  - Array of bytes representing a string of UTF16 encoded characters.\n     */\n    Type: {\n        STOP: 0,\n        VOID: 1,\n        BOOL: 2,\n        BYTE: 3,\n        I08: 3,\n        DOUBLE: 4,\n        I16: 6,\n        I32: 8,\n        I64: 10,\n        STRING: 11,\n        UTF7: 11,\n        STRUCT: 12,\n        MAP: 13,\n        SET: 14,\n        LIST: 15,\n        UTF8: 16,\n        UTF16: 17\n    },\n\n    /**\n     * Thrift RPC message type string to Id mapping.\n     * @readonly\n     * @property {number}  CALL      - RPC call sent from client to server.\n     * @property {number}  REPLY     - RPC call normal response from server to client.\n     * @property {number}  EXCEPTION - RPC call exception response from server to client.\n     * @property {number}  ONEWAY    - Oneway RPC call from client to server with no response.\n     */\n    MessageType: {\n        CALL: 1,\n        REPLY: 2,\n        EXCEPTION: 3,\n        ONEWAY: 4\n    },\n\n    /**\n     * Utility function returning the count of an object's own properties.\n     * @param {object} obj - Object to test.\n     * @returns {number} number of object's own properties\n     */\n    objectLength: function(obj) {\n        var length = 0;\n        for (var k in obj) {\n            if (obj.hasOwnProperty(k)) {\n                length++;\n            }\n        }\n        return length;\n    },\n\n    /**\n     * Utility function to establish prototype inheritance.\n     * @see {@link http://javascript.crockford.com/prototypal.html|Prototypal Inheritance}\n     * @param {function} constructor - Contstructor function to set as derived.\n     * @param {function} superConstructor - Contstructor function to set as base.\n     * @param {string} [name] - Type name to set as name property in derived prototype.\n     */\n    inherits: function(constructor, superConstructor, name) {\n      function F() {}\n      F.prototype = superConstructor.prototype;\n      constructor.prototype = new F();\n      constructor.prototype.name = name || '';\n    }\n};\n\n/**\n * Initializes a Thrift TException instance.\n * @constructor\n * @augments Error\n * @param {string} message - The TException message (distinct from the Error message).\n * @classdesc TException is the base class for all Thrift exceptions types.\n */\nThrift.TException = function(message) {\n    this.message = message;\n};\nThrift.inherits(Thrift.TException, Error, 'TException');\n\n/**\n * Returns the message set on the exception.\n * @readonly\n * @returns {string} exception message\n */\nThrift.TException.prototype.getMessage = function() {\n    return this.message;\n};\n\n/**\n * Thrift Application Exception type string to Id mapping.\n * @readonly\n * @property {number}  UNKNOWN                 - Unknown/undefined.\n * @property {number}  UNKNOWN_METHOD          - Client attempted to call a method unknown to the server.\n * @property {number}  INVALID_MESSAGE_TYPE    - Client passed an unknown/unsupported MessageType.\n * @property {number}  WRONG_METHOD_NAME       - Unused.\n * @property {number}  BAD_SEQUENCE_ID         - Unused in Thrift RPC, used to flag proprietary sequence number errors.\n * @property {number}  MISSING_RESULT          - Raised by a server processor if a handler fails to supply the required return result.\n * @property {number}  INTERNAL_ERROR          - Something bad happened.\n * @property {number}  PROTOCOL_ERROR          - The protocol layer failed to serialize or deserialize data.\n * @property {number}  INVALID_TRANSFORM       - Unused.\n * @property {number}  INVALID_PROTOCOL        - The protocol (or version) is not supported.\n * @property {number}  UNSUPPORTED_CLIENT_TYPE - Unused.\n */\nThrift.TApplicationExceptionType = {\n    UNKNOWN: 0,\n    UNKNOWN_METHOD: 1,\n    INVALID_MESSAGE_TYPE: 2,\n    WRONG_METHOD_NAME: 3,\n    BAD_SEQUENCE_ID: 4,\n    MISSING_RESULT: 5,\n    INTERNAL_ERROR: 6,\n    PROTOCOL_ERROR: 7,\n    INVALID_TRANSFORM: 8,\n    INVALID_PROTOCOL: 9,\n    UNSUPPORTED_CLIENT_TYPE: 10\n};\n\n/**\n * Initializes a Thrift TApplicationException instance.\n * @constructor\n * @augments Thrift.TException\n * @param {string} message - The TApplicationException message (distinct from the Error message).\n * @param {Thrift.TApplicationExceptionType} [code] - The TApplicationExceptionType code.\n * @classdesc TApplicationException is the exception class used to propagate exceptions from an RPC server back to a calling client.\n*/\nThrift.TApplicationException = function(message, code) {\n    this.message = message;\n    this.code = typeof code === 'number' ? code : 0;\n};\nThrift.inherits(Thrift.TApplicationException, Thrift.TException, 'TApplicationException');\n\n/**\n * Read a TApplicationException from the supplied protocol.\n * @param {object} input - The input protocol to read from.\n */\nThrift.TApplicationException.prototype.read = function(input) {\n    while (1) {\n        var ret = input.readFieldBegin();\n\n        if (ret.ftype == Thrift.Type.STOP) {\n            break;\n        }\n\n        var fid = ret.fid;\n\n        switch (fid) {\n            case 1:\n                if (ret.ftype == Thrift.Type.STRING) {\n                    ret = input.readString();\n                    this.message = ret.value;\n                } else {\n                    ret = input.skip(ret.ftype);\n                }\n                break;\n            case 2:\n                if (ret.ftype == Thrift.Type.I32) {\n                    ret = input.readI32();\n                    this.code = ret.value;\n                } else {\n                    ret = input.skip(ret.ftype);\n                }\n                break;\n           default:\n                ret = input.skip(ret.ftype);\n                break;\n        }\n\n        input.readFieldEnd();\n    }\n\n    input.readStructEnd();\n};\n\n/**\n * Wite a TApplicationException to the supplied protocol.\n * @param {object} output - The output protocol to write to.\n */\nThrift.TApplicationException.prototype.write = function(output) {\n    output.writeStructBegin('TApplicationException');\n\n    if (this.message) {\n        output.writeFieldBegin('message', Thrift.Type.STRING, 1);\n        output.writeString(this.getMessage());\n        output.writeFieldEnd();\n    }\n\n    if (this.code) {\n        output.writeFieldBegin('type', Thrift.Type.I32, 2);\n        output.writeI32(this.code);\n        output.writeFieldEnd();\n    }\n\n    output.writeFieldStop();\n    output.writeStructEnd();\n};\n\n/**\n * Returns the application exception code set on the exception.\n * @readonly\n * @returns {Thrift.TApplicationExceptionType} exception code\n */\nThrift.TApplicationException.prototype.getCode = function() {\n    return this.code;\n};\n\nThrift.TProtocolExceptionType = {\n    UNKNOWN: 0,\n    INVALID_DATA: 1,\n    NEGATIVE_SIZE: 2,\n    SIZE_LIMIT: 3,\n    BAD_VERSION: 4,\n    NOT_IMPLEMENTED: 5,\n    DEPTH_LIMIT: 6\n};\n\nThrift.TProtocolException = function TProtocolException(type, message) {\n    Error.call(this);\n    Error.captureStackTrace(this, this.constructor);\n    this.name = this.constructor.name;\n    this.type = type;\n    this.message = message;\n};\nThrift.inherits(Thrift.TProtocolException, Thrift.TException, 'TProtocolException');\n\n/**\n * Constructor Function for the XHR transport.\n * If you do not specify a url then you must handle XHR operations on\n * your own. This type can also be constructed using the Transport alias\n * for backward compatibility.\n * @constructor\n * @param {string} [url] - The URL to connect to.\n * @classdesc The Apache Thrift Transport layer performs byte level I/O\n * between RPC clients and servers. The JavaScript TXHRTransport object\n * uses Http[s]/XHR. Target servers must implement the http[s] transport\n * (see: node.js example server_http.js).\n * @example\n *     var transport = new Thrift.TXHRTransport(\"http://localhost:8585\");\n */\nThrift.Transport = Thrift.TXHRTransport = function(url, options) {\n    this.url = url;\n    this.wpos = 0;\n    this.rpos = 0;\n    this.useCORS = (options && options.useCORS);\n    this.customHeaders = options ? (options.customHeaders ? options.customHeaders : {}): {};\n    this.send_buf = '';\n    this.recv_buf = '';\n};\n\nThrift.TXHRTransport.prototype = {\n    /**\n     * Gets the browser specific XmlHttpRequest Object.\n     * @returns {object} the browser XHR interface object\n     */\n    getXmlHttpRequestObject: function() {\n        try { return new XMLHttpRequest(); } catch (e1) { }\n        try { return new ActiveXObject('Msxml2.XMLHTTP'); } catch (e2) { }\n        try { return new ActiveXObject('Microsoft.XMLHTTP'); } catch (e3) { }\n\n        throw \"Your browser doesn't support XHR.\";\n    },\n\n    /**\n     * Sends the current XRH request if the transport was created with a URL\n     * and the async parameter is false. If the transport was not created with\n     * a URL, or the async parameter is True and no callback is provided, or\n     * the URL is an empty string, the current send buffer is returned.\n     * @param {object} async - If true the current send buffer is returned.\n     * @param {object} callback - Optional async completion callback\n     * @returns {undefined|string} Nothing or the current send buffer.\n     * @throws {string} If XHR fails.\n     */\n    flush: function(async, callback) {\n        var self = this;\n        if ((async && !callback) || this.url === undefined || this.url === '') {\n            return this.send_buf;\n        }\n\n        // var xreq = this.getXmlHttpRequestObject();\n        var req = {};\n        req.header = {};\n        req.method = 'POST';\n        req.header.MediaType = 'application/vnd.apache.thrift.json; charset=utf-8';\n\n        // if (xreq.overrideMimeType) {\n        //     xreq.overrideMimeType('application/vnd.apache.thrift.json; charset=utf-8');\n        // }\n\n        if (callback) {\n            //Ignore XHR callbacks until the data arrives, then call the\n            //  client's callback\n            // xreq.onreadystatechange =\n            //   (function() {\n            //     var clientCallback = callback;\n            //     return function() {\n            //       if (this.readyState == 4 && this.status == 200) {\n            //         self.setRecvBuffer(this.responseText);\n            //         clientCallback();\n            //       }\n            //     };\n            //   }());\n            req.success = (function() {\n                var clientCallback = callback;\n                return function(data) {\n                    self.responseText = JSON.stringify(data.data);\n                    self.setRecvBuffer(self.responseText);\n                    if(data && data.statusCode !== 200){\n                        return clientCallback(data.statusCode);\n                    }\n                    clientCallback();\n                };\n            }());\n\n            // detect net::ERR_CONNECTION_REFUSED and call the callback.\n            // xreq.onerror =\n            //     (function() {\n            //       var clientCallback = callback;\n            //       return function() {\n            //           clientCallback();\n            //       };\n            //     }());\n            req.fail = (function() {\n                var clientCallback = callback;\n                return function(err) {\n                    clientCallback(err);\n                };\n            }());\n\n        }\n\n        // xreq.open('POST', this.url, !!async);\n\n        // add custom headers\n        Object.keys(self.customHeaders).forEach(function(prop) {\n            // xreq.setRequestHeader(prop, self.customHeaders[prop]);\n            req.header[prop] = self.customHeaders[prop];\n        });\n\n        // if (xreq.setRequestHeader) {\n        //     // xreq.setRequestHeader('Accept', 'application/vnd.apache.thrift.json; charset=utf-8');\n        //     // xreq.setRequestHeader('Content-Type', 'application/vnd.apache.thrift.json; charset=utf-8');\n        // }\n        req.header['Accept'] = 'application/vnd.apache.thrift.json; charset=utf-8';\n        req.header['Content-Type'] = 'application/vnd.apache.thrift.json; charset=utf-8';\n\n        // xreq.send(this.send_buf);\n        req.data = this.send_buf;\n        req.url = this.url;\n        wx.request(req);\n\n        return;\n        if (async && callback) {\n            return;\n        }\n\n        // if (xreq.readyState != 4) {\n        //     throw 'encountered an unknown ajax ready state: ' + xreq.readyState;\n        // }\n\n        // if (xreq.status != 200) {\n        //     throw 'encountered a unknown request status: ' + xreq.status;\n        // }\n\n        this.recv_buf = self.responseText;\n        this.recv_buf_sz = this.recv_buf.length;\n        this.wpos = this.recv_buf.length;\n        this.rpos = 0;\n    },\n\n    /**\n     * Creates a jQuery XHR object to be used for a Thrift server call.\n     * @param {object} client - The Thrift Service client object generated by the IDL compiler.\n     * @param {object} postData - The message to send to the server.\n     * @param {function} args - The original call arguments with the success call back at the end.\n     * @param {function} recv_method - The Thrift Service Client receive method for the call.\n     * @returns {object} A new jQuery XHR object.\n     * @throws {string} If the jQuery version is prior to 1.5 or if jQuery is not found.\n     */\n    jqRequest: function(client, postData, args, recv_method) {\n        if (typeof jQuery === 'undefined' ||\n            typeof jQuery.Deferred === 'undefined') {\n            throw 'Thrift.js requires jQuery 1.5+ to use asynchronous requests';\n        }\n\n        var thriftTransport = this;\n\n        var jqXHR = jQuery.ajax({\n            url: this.url,\n            data: postData,\n            type: 'POST',\n            cache: false,\n            contentType: 'application/vnd.apache.thrift.json; charset=utf-8',\n            dataType: 'text thrift',\n            converters: {\n                'text thrift' : function(responseData) {\n                    thriftTransport.setRecvBuffer(responseData);\n                    var value = recv_method.call(client);\n                    return value;\n                }\n            },\n            context: client,\n            success: jQuery.makeArray(args).pop()\n        });\n\n        return jqXHR;\n    },\n\n    /**\n     * Sets the buffer to provide the protocol when deserializing.\n     * @param {string} buf - The buffer to supply the protocol.\n     */\n    setRecvBuffer: function(buf) {\n        this.recv_buf = buf;\n        this.recv_buf_sz = this.recv_buf.length;\n        this.wpos = this.recv_buf.length;\n        this.rpos = 0;\n    },\n\n    /**\n     * Returns true if the transport is open, XHR always returns true.\n     * @readonly\n     * @returns {boolean} Always True.\n     */\n    isOpen: function() {\n        return true;\n    },\n\n    /**\n     * Opens the transport connection, with XHR this is a nop.\n     */\n    open: function() {},\n\n    /**\n     * Closes the transport connection, with XHR this is a nop.\n     */\n    close: function() {},\n\n    /**\n     * Returns the specified number of characters from the response\n     * buffer.\n     * @param {number} len - The number of characters to return.\n     * @returns {string} Characters sent by the server.\n     */\n    read: function(len) {\n        var avail = this.wpos - this.rpos;\n\n        if (avail === 0) {\n            return '';\n        }\n\n        var give = len;\n\n        if (avail < len) {\n            give = avail;\n        }\n\n        var ret = this.read_buf.substr(this.rpos, give);\n        this.rpos += give;\n\n        //clear buf when complete?\n        return ret;\n    },\n\n    /**\n     * Returns the entire response buffer.\n     * @returns {string} Characters sent by the server.\n     */\n    readAll: function() {\n        return this.recv_buf;\n    },\n\n    /**\n     * Sets the send buffer to buf.\n     * @param {string} buf - The buffer to send.\n     */\n    write: function(buf) {\n        this.send_buf = buf;\n    },\n\n    /**\n     * Returns the send buffer.\n     * @readonly\n     * @returns {string} The send buffer.\n     */\n    getSendBuffer: function() {\n        return this.send_buf;\n    }\n\n};\n\n\n/**\n * Constructor Function for the WebSocket transport.\n * @constructor\n * @param {string} [url] - The URL to connect to.\n * @classdesc The Apache Thrift Transport layer performs byte level I/O\n * between RPC clients and servers. The JavaScript TWebSocketTransport object\n * uses the WebSocket protocol. Target servers must implement WebSocket.\n * (see: node.js example server_http.js).\n * @example\n *   var transport = new Thrift.TWebSocketTransport(\"http://localhost:8585\");\n */\nThrift.TWebSocketTransport = function(url) {\n    this.__reset(url);\n};\n\nThrift.TWebSocketTransport.prototype = {\n    __reset: function(url) {\n      this.url = url;             //Where to connect\n      this.socket = null;         //The web socket\n      this.callbacks = [];        //Pending callbacks\n      this.send_pending = [];     //Buffers/Callback pairs waiting to be sent\n      this.send_buf = '';         //Outbound data, immutable until sent\n      this.recv_buf = '';         //Inbound data\n      this.rb_wpos = 0;           //Network write position in receive buffer\n      this.rb_rpos = 0;           //Client read position in receive buffer\n    },\n\n    /**\n     * Sends the current WS request and registers callback. The async\n     * parameter is ignored (WS flush is always async) and the callback\n     * function parameter is required.\n     * @param {object} async - Ignored.\n     * @param {object} callback - The client completion callback.\n     * @returns {undefined|string} Nothing (undefined)\n     */\n    flush: function(async, callback) {\n      var self = this;\n      if (this.isOpen()) {\n        //Send data and register a callback to invoke the client callback\n        this.socket.send(this.send_buf);\n        this.callbacks.push((function() {\n          var clientCallback = callback;\n          return function(msg) {\n            self.setRecvBuffer(msg);\n            clientCallback();\n          };\n        }()));\n        if(callback) {\n          this.callbacks.push((function() {\n            var clientCallback = callback;\n            return function(msg) {\n              self.setRecvBuffer(msg);\n              clientCallback();\n            };\n          }()));\n        }\n      } else {\n        //Queue the send to go out __onOpen\n        this.send_pending.push({\n          buf: this.send_buf,\n          cb: callback\n        });\n      }\n    },\n\n    __onOpen: function() {\n       var self = this;\n       if (this.send_pending.length > 0) {\n          //If the user made calls before the connection was fully\n          //open, send them now\n          this.send_pending.forEach(function(elem) {\n             this.socket.send(elem.buf);\n             this.callbacks.push((function() {\n               var clientCallback = elem.cb;\n               return function(msg) {\n                  self.setRecvBuffer(msg);\n                  clientCallback();\n               };\n             }()));\n          });\n          this.send_pending = [];\n       }\n    },\n\n    __onClose: function(evt) {\n      this.__reset(this.url);\n    },\n\n    __onMessage: function(evt) {\n      if (this.callbacks.length) {\n        this.callbacks.shift()(evt.data);\n      }\n    },\n\n    __onError: function(evt) {\n      console.log('Thrift WebSocket Error: ' + evt.toString());\n      this.socket.close();\n    },\n\n    /**\n     * Sets the buffer to use when receiving server responses.\n     * @param {string} buf - The buffer to receive server responses.\n     */\n    setRecvBuffer: function(buf) {\n        this.recv_buf = buf;\n        this.recv_buf_sz = this.recv_buf.length;\n        this.wpos = this.recv_buf.length;\n        this.rpos = 0;\n    },\n\n    /**\n     * Returns true if the transport is open\n     * @readonly\n     * @returns {boolean}\n     */\n    isOpen: function() {\n        return this.socket && this.socket.readyState == this.socket.OPEN;\n    },\n\n    /**\n     * Opens the transport connection\n     */\n    open: function() {\n      //If OPEN/CONNECTING/CLOSING ignore additional opens\n      if (this.socket && this.socket.readyState != this.socket.CLOSED) {\n        return;\n      }\n      //If there is no socket or the socket is closed:\n      this.socket = new WebSocket(this.url);\n      this.socket.onopen = this.__onOpen.bind(this);\n      this.socket.onmessage = this.__onMessage.bind(this);\n      this.socket.onerror = this.__onError.bind(this);\n      this.socket.onclose = this.__onClose.bind(this);\n    },\n\n    /**\n     * Closes the transport connection\n     */\n    close: function() {\n      this.socket.close();\n    },\n\n    /**\n     * Returns the specified number of characters from the response\n     * buffer.\n     * @param {number} len - The number of characters to return.\n     * @returns {string} Characters sent by the server.\n     */\n    read: function(len) {\n        var avail = this.wpos - this.rpos;\n\n        if (avail === 0) {\n            return '';\n        }\n\n        var give = len;\n\n        if (avail < len) {\n            give = avail;\n        }\n\n        var ret = this.read_buf.substr(this.rpos, give);\n        this.rpos += give;\n\n        //clear buf when complete?\n        return ret;\n    },\n\n    /**\n     * Returns the entire response buffer.\n     * @returns {string} Characters sent by the server.\n     */\n    readAll: function() {\n        return this.recv_buf;\n    },\n\n    /**\n     * Sets the send buffer to buf.\n     * @param {string} buf - The buffer to send.\n     */\n    write: function(buf) {\n        this.send_buf = buf;\n    },\n\n    /**\n     * Returns the send buffer.\n     * @readonly\n     * @returns {string} The send buffer.\n     */\n    getSendBuffer: function() {\n        return this.send_buf;\n    }\n\n};\n\n/**\n * Initializes a Thrift JSON protocol instance.\n * @constructor\n * @param {Thrift.Transport} transport - The transport to serialize to/from.\n * @classdesc Apache Thrift Protocols perform serialization which enables cross\n * language RPC. The Protocol type is the JavaScript browser implementation\n * of the Apache Thrift TJSONProtocol.\n * @example\n *     var protocol  = new Thrift.Protocol(transport);\n */\nThrift.TJSONProtocol = Thrift.Protocol = function(transport) {\n    this.tstack = [];\n    this.tpos = [];\n    this.transport = transport;\n};\n\n/**\n * Thrift IDL type Id to string mapping.\n * @readonly\n * @see {@link Thrift.Type}\n */\nThrift.Protocol.Type = {};\nThrift.Protocol.Type[Thrift.Type.BOOL] = '\"tf\"';\nThrift.Protocol.Type[Thrift.Type.BYTE] = '\"i8\"';\nThrift.Protocol.Type[Thrift.Type.I16] = '\"i16\"';\nThrift.Protocol.Type[Thrift.Type.I32] = '\"i32\"';\nThrift.Protocol.Type[Thrift.Type.I64] = '\"i64\"';\nThrift.Protocol.Type[Thrift.Type.DOUBLE] = '\"dbl\"';\nThrift.Protocol.Type[Thrift.Type.STRUCT] = '\"rec\"';\nThrift.Protocol.Type[Thrift.Type.STRING] = '\"str\"';\nThrift.Protocol.Type[Thrift.Type.MAP] = '\"map\"';\nThrift.Protocol.Type[Thrift.Type.LIST] = '\"lst\"';\nThrift.Protocol.Type[Thrift.Type.SET] = '\"set\"';\n\n/**\n * Thrift IDL type string to Id mapping.\n * @readonly\n * @see {@link Thrift.Type}\n */\nThrift.Protocol.RType = {};\nThrift.Protocol.RType.tf = Thrift.Type.BOOL;\nThrift.Protocol.RType.i8 = Thrift.Type.BYTE;\nThrift.Protocol.RType.i16 = Thrift.Type.I16;\nThrift.Protocol.RType.i32 = Thrift.Type.I32;\nThrift.Protocol.RType.i64 = Thrift.Type.I64;\nThrift.Protocol.RType.dbl = Thrift.Type.DOUBLE;\nThrift.Protocol.RType.rec = Thrift.Type.STRUCT;\nThrift.Protocol.RType.str = Thrift.Type.STRING;\nThrift.Protocol.RType.map = Thrift.Type.MAP;\nThrift.Protocol.RType.lst = Thrift.Type.LIST;\nThrift.Protocol.RType.set = Thrift.Type.SET;\n\n/**\n * The TJSONProtocol version number.\n * @readonly\n * @const {number} Version\n * @memberof Thrift.Protocol\n */\n Thrift.Protocol.Version = 1;\n\nThrift.Protocol.prototype = {\n    /**\n     * Returns the underlying transport.\n     * @readonly\n     * @returns {Thrift.Transport} The underlying transport.\n     */\n    getTransport: function() {\n        return this.transport;\n    },\n\n    /**\n     * Serializes the beginning of a Thrift RPC message.\n     * @param {string} name - The service method to call.\n     * @param {Thrift.MessageType} messageType - The type of method call.\n     * @param {number} seqid - The sequence number of this call (always 0 in Apache Thrift).\n     */\n    writeMessageBegin: function(name, messageType, seqid) {\n        this.tstack = [];\n        this.tpos = [];\n\n        this.tstack.push([Thrift.Protocol.Version, '\"' +\n            name + '\"', messageType, seqid]);\n    },\n\n    /**\n     * Serializes the end of a Thrift RPC message.\n     */\n    writeMessageEnd: function() {\n        var obj = this.tstack.pop();\n\n        this.wobj = this.tstack.pop();\n        this.wobj.push(obj);\n\n        this.wbuf = '[' + this.wobj.join(',') + ']';\n\n        this.transport.write(this.wbuf);\n     },\n\n\n    /**\n     * Serializes the beginning of a struct.\n     * @param {string} name - The name of the struct.\n     */\n    writeStructBegin: function(name) {\n        this.tpos.push(this.tstack.length);\n        this.tstack.push({});\n    },\n\n    /**\n     * Serializes the end of a struct.\n     */\n    writeStructEnd: function() {\n\n        var p = this.tpos.pop();\n        var struct = this.tstack[p];\n        var str = '{';\n        var first = true;\n        for (var key in struct) {\n            if (first) {\n                first = false;\n            } else {\n                str += ',';\n            }\n\n            str += key + ':' + struct[key];\n        }\n\n        str += '}';\n        this.tstack[p] = str;\n    },\n\n    /**\n     * Serializes the beginning of a struct field.\n     * @param {string} name - The name of the field.\n     * @param {Thrift.Protocol.Type} fieldType - The data type of the field.\n     * @param {number} fieldId - The field's unique identifier.\n     */\n    writeFieldBegin: function(name, fieldType, fieldId) {\n        this.tpos.push(this.tstack.length);\n        this.tstack.push({ 'fieldId': '\"' +\n            fieldId + '\"', 'fieldType': Thrift.Protocol.Type[fieldType]\n        });\n\n    },\n\n    /**\n     * Serializes the end of a field.\n     */\n    writeFieldEnd: function() {\n        var value = this.tstack.pop();\n        var fieldInfo = this.tstack.pop();\n\n        this.tstack[this.tstack.length - 1][fieldInfo.fieldId] = '{' +\n            fieldInfo.fieldType + ':' + value + '}';\n        this.tpos.pop();\n    },\n\n    /**\n     * Serializes the end of the set of fields for a struct.\n     */\n    writeFieldStop: function() {\n        //na\n    },\n\n    /**\n     * Serializes the beginning of a map collection.\n     * @param {Thrift.Type} keyType - The data type of the key.\n     * @param {Thrift.Type} valType - The data type of the value.\n     * @param {number} [size] - The number of elements in the map (ignored).\n     */\n    writeMapBegin: function(keyType, valType, size) {\n        this.tpos.push(this.tstack.length);\n        this.tstack.push([Thrift.Protocol.Type[keyType],\n            Thrift.Protocol.Type[valType], 0]);\n    },\n\n    /**\n     * Serializes the end of a map.\n     */\n    writeMapEnd: function() {\n        var p = this.tpos.pop();\n\n        if (p == this.tstack.length) {\n            return;\n        }\n\n        if ((this.tstack.length - p - 1) % 2 !== 0) {\n            this.tstack.push('');\n        }\n\n        var size = (this.tstack.length - p - 1) / 2;\n\n        this.tstack[p][this.tstack[p].length - 1] = size;\n\n        var map = '}';\n        var first = true;\n        while (this.tstack.length > p + 1) {\n            var v = this.tstack.pop();\n            var k = this.tstack.pop();\n            if (first) {\n                first = false;\n            } else {\n                map = ',' + map;\n            }\n\n            if (! isNaN(k)) { k = '\"' + k + '\"'; } //json \"keys\" need to be strings\n            map = k + ':' + v + map;\n        }\n        map = '{' + map;\n\n        this.tstack[p].push(map);\n        this.tstack[p] = '[' + this.tstack[p].join(',') + ']';\n    },\n\n    /**\n     * Serializes the beginning of a list collection.\n     * @param {Thrift.Type} elemType - The data type of the elements.\n     * @param {number} size - The number of elements in the list.\n     */\n    writeListBegin: function(elemType, size) {\n        this.tpos.push(this.tstack.length);\n        this.tstack.push([Thrift.Protocol.Type[elemType], size]);\n    },\n\n    /**\n     * Serializes the end of a list.\n     */\n    writeListEnd: function() {\n        var p = this.tpos.pop();\n\n        while (this.tstack.length > p + 1) {\n            var tmpVal = this.tstack[p + 1];\n            this.tstack.splice(p + 1, 1);\n            this.tstack[p].push(tmpVal);\n        }\n\n        this.tstack[p] = '[' + this.tstack[p].join(',') + ']';\n    },\n\n    /**\n     * Serializes the beginning of a set collection.\n     * @param {Thrift.Type} elemType - The data type of the elements.\n     * @param {number} size - The number of elements in the list.\n     */\n    writeSetBegin: function(elemType, size) {\n        this.tpos.push(this.tstack.length);\n        this.tstack.push([Thrift.Protocol.Type[elemType], size]);\n    },\n\n    /**\n     * Serializes the end of a set.\n     */\n    writeSetEnd: function() {\n        var p = this.tpos.pop();\n\n        while (this.tstack.length > p + 1) {\n            var tmpVal = this.tstack[p + 1];\n            this.tstack.splice(p + 1, 1);\n            this.tstack[p].push(tmpVal);\n        }\n\n        this.tstack[p] = '[' + this.tstack[p].join(',') + ']';\n    },\n\n    /** Serializes a boolean */\n    writeBool: function(value) {\n        this.tstack.push(value ? 1 : 0);\n    },\n\n    /** Serializes a number */\n    writeByte: function(i8) {\n        this.tstack.push(i8);\n    },\n\n    /** Serializes a number */\n    writeI16: function(i16) {\n        this.tstack.push(i16);\n    },\n\n    /** Serializes a number */\n    writeI32: function(i32) {\n        this.tstack.push(i32);\n    },\n\n    /** Serializes a number */\n    writeI64: function(i64) {\n        this.tstack.push(i64);\n    },\n\n    /** Serializes a number */\n    writeDouble: function(dbl) {\n        this.tstack.push(dbl);\n    },\n\n    /** Serializes a string */\n    writeString: function(str) {\n        // We do not encode uri components for wire transfer:\n        if (str === null) {\n            this.tstack.push(null);\n        } else {\n            // concat may be slower than building a byte buffer\n            var escapedString = '';\n            for (var i = 0; i < str.length; i++) {\n                var ch = str.charAt(i);      // a single double quote: \"\n                if (ch === '\\\"') {\n                    escapedString += '\\\\\\\"'; // write out as: \\\"\n                } else if (ch === '\\\\') {    // a single backslash\n                    escapedString += '\\\\\\\\'; // write out as double backslash\n                } else if (ch === '\\b') {    // a single backspace: invisible\n                    escapedString += '\\\\b';  // write out as: \\b\"\n                } else if (ch === '\\f') {    // a single formfeed: invisible\n                    escapedString += '\\\\f';  // write out as: \\f\"\n                } else if (ch === '\\n') {    // a single newline: invisible\n                    escapedString += '\\\\n';  // write out as: \\n\"\n                } else if (ch === '\\r') {    // a single return: invisible\n                    escapedString += '\\\\r';  // write out as: \\r\"\n                } else if (ch === '\\t') {    // a single tab: invisible\n                    escapedString += '\\\\t';  // write out as: \\t\"\n                } else {\n                    escapedString += ch;     // Else it need not be escaped\n                }\n            }\n            this.tstack.push('\"' + escapedString + '\"');\n        }\n    },\n\n    /** Serializes a string */\n    writeBinary: function(binary) {\n        var str = '';\n        if (typeof binary == 'string') {\n            str = binary;\n        } else if (binary instanceof Uint8Array) {\n            var arr = binary;\n            for (var i = 0; i < arr.length; ++i) {\n                str += String.fromCharCode(arr[i]);\n            }\n        } else {\n            throw new TypeError('writeBinary only accepts String or Uint8Array.');\n        }\n        this.tstack.push('\"' + btoa(str) + '\"');\n    },\n\n    /**\n       @class\n       @name AnonReadMessageBeginReturn\n       @property {string} fname - The name of the service method.\n       @property {Thrift.MessageType} mtype - The type of message call.\n       @property {number} rseqid - The sequence number of the message (0 in Thrift RPC).\n     */\n    /**\n     * Deserializes the beginning of a message.\n     * @returns {AnonReadMessageBeginReturn}\n     */\n    readMessageBegin: function() {\n        this.rstack = [];\n        this.rpos = [];\n\n        if (typeof JSON !== 'undefined' && typeof JSON.parse === 'function') {\n            var a = this.transport.readAll();\n            this.robj = JSON.parse(a);\n        } else if (typeof jQuery !== 'undefined') {\n            this.robj = jQuery.parseJSON(this.transport.readAll());\n        } else {\n            this.robj = eval(this.transport.readAll());\n        }\n\n        // Agora: this.robj\n        if(this.robj instanceof Array == false) {\n            this.robj = [this.robj];\n        }\n\n        var r = {};\n        var version = this.robj.shift();\n\n        if (version != Thrift.Protocol.Version) {\n            throw 'Wrong thrift protocol version: ' + version;\n        }\n\n        r.fname = this.robj.shift();\n        r.mtype = this.robj.shift();\n        r.rseqid = this.robj.shift();\n\n\n        //get to the main obj\n        this.rstack.push(this.robj.shift());\n\n        return r;\n    },\n\n    /** Deserializes the end of a message. */\n    readMessageEnd: function() {\n    },\n\n    /**\n     * Deserializes the beginning of a struct.\n     * @param {string} [name] - The name of the struct (ignored)\n     * @returns {object} - An object with an empty string fname property\n     */\n    readStructBegin: function(name) {\n        var r = {};\n        r.fname = '';\n\n        //incase this is an array of structs\n        if (this.rstack[this.rstack.length - 1] instanceof Array) {\n            this.rstack.push(this.rstack[this.rstack.length - 1].shift());\n        }\n\n        return r;\n    },\n\n    /** Deserializes the end of a struct. */\n    readStructEnd: function() {\n        if (this.rstack[this.rstack.length - 2] instanceof Array) {\n            this.rstack.pop();\n        }\n    },\n\n    /**\n       @class\n       @name AnonReadFieldBeginReturn\n       @property {string} fname - The name of the field (always '').\n       @property {Thrift.Type} ftype - The data type of the field.\n       @property {number} fid - The unique identifier of the field.\n     */\n    /**\n     * Deserializes the beginning of a field.\n     * @returns {AnonReadFieldBeginReturn}\n     */\n    readFieldBegin: function() {\n        var r = {};\n\n        var fid = -1;\n        var ftype = Thrift.Type.STOP;\n\n        //get a fieldId\n        for (var f in (this.rstack[this.rstack.length - 1])) {\n            if (f === null) {\n              continue;\n            }\n\n            fid = parseInt(f, 10);\n            this.rpos.push(this.rstack.length);\n\n            var field = this.rstack[this.rstack.length - 1][fid];\n\n            //remove so we don't see it again\n            delete this.rstack[this.rstack.length - 1][fid];\n\n            this.rstack.push(field);\n\n            break;\n        }\n\n        if (fid != -1) {\n\n            //should only be 1 of these but this is the only\n            //way to match a key\n            for (var i in (this.rstack[this.rstack.length - 1])) {\n                if (Thrift.Protocol.RType[i] === null) {\n                    continue;\n                }\n\n                ftype = Thrift.Protocol.RType[i];\n                this.rstack[this.rstack.length - 1] =\n                    this.rstack[this.rstack.length - 1][i];\n            }\n        }\n\n        r.fname = '';\n        r.ftype = ftype;\n        r.fid = fid;\n\n        return r;\n    },\n\n    /** Deserializes the end of a field. */\n    readFieldEnd: function() {\n        var pos = this.rpos.pop();\n\n        //get back to the right place in the stack\n        while (this.rstack.length > pos) {\n            this.rstack.pop();\n        }\n\n    },\n\n    /**\n       @class\n       @name AnonReadMapBeginReturn\n       @property {Thrift.Type} ktype - The data type of the key.\n       @property {Thrift.Type} vtype - The data type of the value.\n       @property {number} size - The number of elements in the map.\n     */\n    /**\n     * Deserializes the beginning of a map.\n     * @returns {AnonReadMapBeginReturn}\n     */\n    readMapBegin: function() {\n        var map = this.rstack.pop();\n        var first = map.shift();\n        if (first instanceof Array) {\n          this.rstack.push(map);\n          map = first;\n          first = map.shift();\n        }\n\n        var r = {};\n        r.ktype = Thrift.Protocol.RType[first];\n        r.vtype = Thrift.Protocol.RType[map.shift()];\n        r.size = map.shift();\n\n\n        this.rpos.push(this.rstack.length);\n        this.rstack.push(map.shift());\n\n        return r;\n    },\n\n    /** Deserializes the end of a map. */\n    readMapEnd: function() {\n        this.readFieldEnd();\n    },\n\n    /**\n       @class\n       @name AnonReadColBeginReturn\n       @property {Thrift.Type} etype - The data type of the element.\n       @property {number} size - The number of elements in the collection.\n     */\n    /**\n     * Deserializes the beginning of a list.\n     * @returns {AnonReadColBeginReturn}\n     */\n    readListBegin: function() {\n        var list = this.rstack[this.rstack.length - 1];\n\n        var r = {};\n        r.etype = Thrift.Protocol.RType[list.shift()];\n        r.size = list.shift();\n\n        this.rpos.push(this.rstack.length);\n        this.rstack.push(list.shift());\n\n        return r;\n    },\n\n    /** Deserializes the end of a list. */\n    readListEnd: function() {\n        this.readFieldEnd();\n    },\n\n    /**\n     * Deserializes the beginning of a set.\n     * @returns {AnonReadColBeginReturn}\n     */\n    readSetBegin: function(elemType, size) {\n        return this.readListBegin(elemType, size);\n    },\n\n    /** Deserializes the end of a set. */\n    readSetEnd: function() {\n        return this.readListEnd();\n    },\n\n    /** Returns an object with a value property set to\n     *  False unless the next number in the protocol buffer\n     *  is 1, in which case the value property is True */\n    readBool: function() {\n        var r = this.readI32();\n\n        if (r !== null && r.value == '1') {\n            r.value = true;\n        } else {\n            r.value = false;\n        }\n\n        return r;\n    },\n\n    /** Returns the an object with a value property set to the\n        next value found in the protocol buffer */\n    readByte: function() {\n        return this.readI32();\n    },\n\n    /** Returns the an object with a value property set to the\n        next value found in the protocol buffer */\n    readI16: function() {\n        return this.readI32();\n    },\n\n    /** Returns the an object with a value property set to the\n        next value found in the protocol buffer */\n    readI32: function(f) {\n        if (f === undefined) {\n            f = this.rstack[this.rstack.length - 1];\n        }\n\n        var r = {};\n\n        if (f instanceof Array) {\n            if (f.length === 0) {\n                r.value = undefined;\n            } else {\n                r.value = f.shift();\n            }\n        } else if (f instanceof Object) {\n           for (var i in f) {\n                if (i === null) {\n                  continue;\n                }\n                this.rstack.push(f[i]);\n                delete f[i];\n\n                r.value = i;\n                break;\n           }\n        } else {\n            r.value = f;\n            this.rstack.pop();\n        }\n\n        return r;\n    },\n\n    /** Returns the an object with a value property set to the\n        next value found in the protocol buffer */\n    readI64: function() {\n        return this.readI32();\n    },\n\n    /** Returns the an object with a value property set to the\n        next value found in the protocol buffer */\n    readDouble: function() {\n        return this.readI32();\n    },\n\n    /** Returns the an object with a value property set to the\n        next value found in the protocol buffer */\n    readString: function() {\n        var r = this.readI32();\n        return r;\n    },\n\n    /** Returns the an object with a value property set to the\n        next value found in the protocol buffer */\n    readBinary: function() {\n        var r = this.readI32();\n        r.value = atob(r.value);\n        return r;\n    },\n\n    /**\n     * Method to arbitrarily skip over data */\n    skip: function(type) {\n        var ret, i;\n        switch (type) {\n            case Thrift.Type.STOP:\n                return null;\n\n            case Thrift.Type.BOOL:\n                return this.readBool();\n\n            case Thrift.Type.BYTE:\n                return this.readByte();\n\n            case Thrift.Type.I16:\n                return this.readI16();\n\n            case Thrift.Type.I32:\n                return this.readI32();\n\n            case Thrift.Type.I64:\n                return this.readI64();\n\n            case Thrift.Type.DOUBLE:\n                return this.readDouble();\n\n            case Thrift.Type.STRING:\n                return this.readString();\n\n            case Thrift.Type.STRUCT:\n                this.readStructBegin();\n                while (true) {\n                    ret = this.readFieldBegin();\n                    if (ret.ftype == Thrift.Type.STOP) {\n                        break;\n                    }\n                    this.skip(ret.ftype);\n                    this.readFieldEnd();\n                }\n                this.readStructEnd();\n                return null;\n\n            case Thrift.Type.MAP:\n                ret = this.readMapBegin();\n                for (i = 0; i < ret.size; i++) {\n                    if (i > 0) {\n                        if (this.rstack.length > this.rpos[this.rpos.length - 1] + 1) {\n                            this.rstack.pop();\n                        }\n                    }\n                    this.skip(ret.ktype);\n                    this.skip(ret.vtype);\n                }\n                this.readMapEnd();\n                return null;\n\n            case Thrift.Type.SET:\n                ret = this.readSetBegin();\n                for (i = 0; i < ret.size; i++) {\n                    this.skip(ret.etype);\n                }\n                this.readSetEnd();\n                return null;\n\n            case Thrift.Type.LIST:\n                ret = this.readListBegin();\n                for (i = 0; i < ret.size; i++) {\n                    this.skip(ret.etype);\n                }\n                this.readListEnd();\n                return null;\n        }\n    }\n};\n\n\n/**\n * Initializes a MutilplexProtocol Implementation as a Wrapper for Thrift.Protocol\n * @constructor\n */\nThrift.MultiplexProtocol = function(srvName, trans, strictRead, strictWrite) {\n    Thrift.Protocol.call(this, trans, strictRead, strictWrite);\n    this.serviceName = srvName;\n};\nThrift.inherits(Thrift.MultiplexProtocol, Thrift.Protocol, 'multiplexProtocol');\n\n/** Override writeMessageBegin method of prototype*/\nThrift.MultiplexProtocol.prototype.writeMessageBegin = function(name, type, seqid) {\n\n    if (type === Thrift.MessageType.CALL || type === Thrift.MessageType.ONEWAY) {\n        Thrift.Protocol.prototype.writeMessageBegin.call(this, this.serviceName + ':' + name, type, seqid);\n    } else {\n        Thrift.Protocol.prototype.writeMessageBegin.call(this, name, type, seqid);\n    }\n};\n\nThrift.Multiplexer = function() {\n    this.seqid = 0;\n};\n\n/** Instantiates a multiplexed client for a specific service\n * @constructor\n * @param {String} serviceName - The transport to serialize to/from.\n * @param {Thrift.ServiceClient} SCl - The Service Client Class\n * @param {Thrift.Transport} transport - Thrift.Transport instance which provides remote host:port\n * @example\n *    var mp = new Thrift.Multiplexer();\n *    var transport = new Thrift.Transport(\"http://localhost:9090/foo.thrift\");\n *    var protocol = new Thrift.Protocol(transport);\n *    var client = mp.createClient('AuthService', AuthServiceClient, transport);\n*/\nThrift.Multiplexer.prototype.createClient = function(serviceName, SCl, transport) {\n    if (SCl.Client) {\n        SCl = SCl.Client;\n    }\n    var self = this;\n    SCl.prototype.new_seqid = function() {\n        self.seqid += 1;\n        return self.seqid;\n    };\n    var client = new SCl(new Thrift.MultiplexProtocol(serviceName, transport));\n\n    return client;\n};\n\n\n\nvar copyList, copyMap;\n\ncopyList = function(lst, types) {\n\n  if (!lst) {return lst; }\n\n  var type;\n\n  if (types.shift === undefined) {\n    type = types;\n  }\n  else {\n    type = types[0];\n  }\n  var Type = type;\n\n  var len = lst.length, result = [], i, val;\n  for (i = 0; i < len; i++) {\n    val = lst[i];\n    if (type === null) {\n      result.push(val);\n    }\n    else if (type === copyMap || type === copyList) {\n      result.push(type(val, types.slice(1)));\n    }\n    else {\n      result.push(new Type(val));\n    }\n  }\n  return result;\n};\n\ncopyMap = function(obj, types) {\n\n  if (!obj) {return obj; }\n\n  var type;\n\n  if (types.shift === undefined) {\n    type = types;\n  }\n  else {\n    type = types[0];\n  }\n  var Type = type;\n\n  var result = {}, val;\n  for (var prop in obj) {\n    if (obj.hasOwnProperty(prop)) {\n      val = obj[prop];\n      if (type === null) {\n        result[prop] = val;\n      }\n      else if (type === copyMap || type === copyList) {\n        result[prop] = type(val, types.slice(1));\n      }\n      else {\n        result[prop] = new Type(val);\n      }\n    }\n  }\n  return result;\n};\n\nThrift.copyMap = copyMap;\nThrift.copyList = copyList;\n\nexport default Thrift","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray;","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","//\n// Autogenerated by Thrift Compiler (0.11.0)\n//\n// DO NOT EDIT UNLESS YOU ARE SURE THAT YOU KNOW WHAT YOU ARE DOING\n//\nvar Thrift = require('../Thrift/thrift').default;\nvar MiniappSDK = require('./miniapp_types');\n\nvar MiniappSession = MiniappSDK.MiniappSession;\nvar MiniappJoinChooseServer = MiniappSDK.MiniappJoinChooseServer;\nvar MiniappConnectWebSocket = MiniappSDK.MiniappConnectWebSocket;\nvar MiniappJoin = MiniappSDK.MiniappJoin;\nvar MiniappPublish = MiniappSDK.MiniappPublish;\nvar MiniappUnpublish = MiniappSDK.MiniappUnpublish;\nvar MiniappSubscribe = MiniappSDK.MiniappSubscribe;\nvar MiniappUnsubscribe = MiniappSDK.MiniappUnsubscribe;\nvar MiniappLeave = MiniappSDK.MiniappLeave;\nvar MiniappServerEvent = MiniappSDK.MiniappServerEvent;\nvar MiniappPusherState = MiniappSDK.MiniappPusherState;\nvar MiniappPlayerState = MiniappSDK.MiniappPlayerState;\n\nvar ReportItem = function(args) {\n  this.uri = null;\n  this.miniappSession = null;\n  this.miniappJoinChooseServer = null;\n  this.miniappConnectWebSocket = null;\n  this.miniappJoin = null;\n  this.miniappPublish = null;\n  this.miniappUnpublish = null;\n  this.miniappSubscribe = null;\n  this.miniappUnsubscribe = null;\n  this.miniappLeave = null;\n  this.miniappServerEvent = null;\n  this.miniappPusherState = null;\n  this.miniappPlayerState = null;\n  if (args) {\n    if (args.uri !== undefined && args.uri !== null) {\n      this.uri = args.uri;\n    }\n    if (args.miniappSession !== undefined && args.miniappSession !== null) {\n      this.miniappSession = new MiniappSession(args.miniappSession);\n    }\n    if (args.miniappJoinChooseServer !== undefined && args.miniappJoinChooseServer !== null) {\n      this.miniappJoinChooseServer = new MiniappJoinChooseServer(args.miniappJoinChooseServer);\n    }\n    if (args.miniappConnectWebSocket !== undefined && args.miniappConnectWebSocket !== null) {\n      this.miniappConnectWebSocket = new MiniappConnectWebSocket(args.miniappConnectWebSocket);\n    }\n    if (args.miniappJoin !== undefined && args.miniappJoin !== null) {\n      this.miniappJoin = new MiniappJoin(args.miniappJoin);\n    }\n    if (args.miniappPublish !== undefined && args.miniappPublish !== null) {\n      this.miniappPublish = new MiniappPublish(args.miniappPublish);\n    }\n    if (args.miniappUnpublish !== undefined && args.miniappUnpublish !== null) {\n      this.miniappUnpublish = new MiniappUnpublish(args.miniappUnpublish);\n    }\n    if (args.miniappSubscribe !== undefined && args.miniappSubscribe !== null) {\n      this.miniappSubscribe = new MiniappSubscribe(args.miniappSubscribe);\n    }\n    if (args.miniappUnsubscribe !== undefined && args.miniappUnsubscribe !== null) {\n      this.miniappUnsubscribe = new MiniappUnsubscribe(args.miniappUnsubscribe);\n    }\n    if (args.miniappLeave !== undefined && args.miniappLeave !== null) {\n      this.miniappLeave = new MiniappLeave(args.miniappLeave);\n    }\n    if (args.miniappServerEvent !== undefined && args.miniappServerEvent !== null) {\n      this.miniappServerEvent = new MiniappServerEvent(args.miniappServerEvent);\n    }\n    if (args.miniappPusherState !== undefined && args.miniappPusherState !== null) {\n      this.miniappPusherState = new MiniappPusherState(args.miniappPusherState);\n    }\n    if (args.miniappPlayerState !== undefined && args.miniappPlayerState !== null) {\n      this.miniappPlayerState = new MiniappPlayerState(args.miniappPlayerState);\n    }\n  }\n};\nReportItem.prototype = {};\nReportItem.prototype.read = function(input) {\n  input.readStructBegin();\n  while (true)\n  {\n    var ret = input.readFieldBegin();\n    var fname = ret.fname;\n    var ftype = ret.ftype;\n    var fid = ret.fid;\n    if (ftype == Thrift.Type.STOP) {\n      break;\n    }\n    switch (fid)\n    {\n      case 1:\n      if (ftype == Thrift.Type.I32) {\n        this.uri = input.readI32().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 8000:\n      if (ftype == Thrift.Type.STRUCT) {\n        this.miniappSession = new MiniappSession();\n        this.miniappSession.read(input);\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 8001:\n      if (ftype == Thrift.Type.STRUCT) {\n        this.miniappJoinChooseServer = new MiniappJoinChooseServer();\n        this.miniappJoinChooseServer.read(input);\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 8002:\n      if (ftype == Thrift.Type.STRUCT) {\n        this.miniappConnectWebSocket = new MiniappConnectWebSocket();\n        this.miniappConnectWebSocket.read(input);\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 8003:\n      if (ftype == Thrift.Type.STRUCT) {\n        this.miniappJoin = new MiniappJoin();\n        this.miniappJoin.read(input);\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 8004:\n      if (ftype == Thrift.Type.STRUCT) {\n        this.miniappPublish = new MiniappPublish();\n        this.miniappPublish.read(input);\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 8005:\n      if (ftype == Thrift.Type.STRUCT) {\n        this.miniappUnpublish = new MiniappUnpublish();\n        this.miniappUnpublish.read(input);\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 8006:\n      if (ftype == Thrift.Type.STRUCT) {\n        this.miniappSubscribe = new MiniappSubscribe();\n        this.miniappSubscribe.read(input);\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 8007:\n      if (ftype == Thrift.Type.STRUCT) {\n        this.miniappUnsubscribe = new MiniappUnsubscribe();\n        this.miniappUnsubscribe.read(input);\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 8008:\n      if (ftype == Thrift.Type.STRUCT) {\n        this.miniappLeave = new MiniappLeave();\n        this.miniappLeave.read(input);\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 8009:\n      if (ftype == Thrift.Type.STRUCT) {\n        this.miniappServerEvent = new MiniappServerEvent();\n        this.miniappServerEvent.read(input);\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 8010:\n      if (ftype == Thrift.Type.STRUCT) {\n        this.miniappPusherStateEvent = new MiniappPusherStateEvent();\n        this.miniappPusherStateEvent.read(input);\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 8011:\n      if (ftype == Thrift.Type.STRUCT) {\n        this.miniappPlayerStateEvent = new MiniappPlayerStateEvent();\n        this.miniappPlayerStateEvent.read(input);\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      default:\n        input.skip(ftype);\n    }\n    input.readFieldEnd();\n  }\n  input.readStructEnd();\n  return;\n};\n\nReportItem.prototype.write = function(output) {\n  output.writeStructBegin('ReportItem');\n  if (this.uri !== null && this.uri !== undefined) {\n    output.writeFieldBegin('uri', Thrift.Type.I32, 1);\n    output.writeI32(this.uri);\n    output.writeFieldEnd();\n  }\n  if (this.miniappSession !== null && this.miniappSession !== undefined) {\n    output.writeFieldBegin('miniappSession', Thrift.Type.STRUCT, 8000);\n    this.miniappSession.write(output);\n    output.writeFieldEnd();\n  }\n  if (this.miniappJoinChooseServer !== null && this.miniappJoinChooseServer !== undefined) {\n    output.writeFieldBegin('miniappJoinChooseServer', Thrift.Type.STRUCT, 8001);\n    this.miniappJoinChooseServer.write(output);\n    output.writeFieldEnd();\n  }\n  if (this.miniappConnectWebSocket !== null && this.miniappConnectWebSocket !== undefined) {\n    output.writeFieldBegin('miniappConnectWebSocket', Thrift.Type.STRUCT, 8002);\n    this.miniappConnectWebSocket.write(output);\n    output.writeFieldEnd();\n  }\n  if (this.miniappJoin !== null && this.miniappJoin !== undefined) {\n    output.writeFieldBegin('miniappJoin', Thrift.Type.STRUCT, 8003);\n    this.miniappJoin.write(output);\n    output.writeFieldEnd();\n  }\n  if (this.miniappPublish !== null && this.miniappPublish !== undefined) {\n    output.writeFieldBegin('miniappPublish', Thrift.Type.STRUCT, 8004);\n    this.miniappPublish.write(output);\n    output.writeFieldEnd();\n  }\n  if (this.miniappUnpublish !== null && this.miniappUnpublish !== undefined) {\n    output.writeFieldBegin('miniappUnpublish', Thrift.Type.STRUCT, 8005);\n    this.miniappUnpublish.write(output);\n    output.writeFieldEnd();\n  }\n  if (this.miniappSubscribe !== null && this.miniappSubscribe !== undefined) {\n    output.writeFieldBegin('miniappSubscribe', Thrift.Type.STRUCT, 8006);\n    this.miniappSubscribe.write(output);\n    output.writeFieldEnd();\n  }\n  if (this.miniappUnsubscribe !== null && this.miniappUnsubscribe !== undefined) {\n    output.writeFieldBegin('miniappUnsubscribe', Thrift.Type.STRUCT, 8007);\n    this.miniappUnsubscribe.write(output);\n    output.writeFieldEnd();\n  }\n  if (this.miniappLeave !== null && this.miniappLeave !== undefined) {\n    output.writeFieldBegin('miniappLeave', Thrift.Type.STRUCT, 8008);\n    this.miniappLeave.write(output);\n    output.writeFieldEnd();\n  }\n  if (this.miniappServerEvent !== null && this.miniappServerEvent !== undefined) {\n    output.writeFieldBegin('miniappServerEvent', Thrift.Type.STRUCT, 8009);\n    this.miniappServerEvent.write(output);\n    output.writeFieldEnd();\n  }\n  if (this.miniappPusherStateEvent !== null && this.miniappPusherStateEvent !== undefined) {\n    output.writeFieldBegin('miniappPusherStateEvent', Thrift.Type.STRUCT, 8010);\n    this.miniappPusherStateEvent.write(output);\n    output.writeFieldEnd();\n  }\n  if (this.miniappPlayerStateEvent !== null && this.miniappPlayerStateEvent !== undefined) {\n    output.writeFieldBegin('miniappPlayerStateEvent', Thrift.Type.STRUCT, 8011);\n    this.miniappPlayerStateEvent.write(output);\n    output.writeFieldEnd();\n  }\n  output.writeFieldStop();\n  output.writeStructEnd();\n  return;\n};\n\nmodule.exports = ReportItem;","//\n// Autogenerated by Thrift Compiler (0.11.0)\n//\n// DO NOT EDIT UNLESS YOU ARE SURE THAT YOU KNOW WHAT YOU ARE DOING\n//\nvar Thrift = require('../Thrift/thrift').default;\n\nvar VosdkHeader = function(args) {\n  this.sid = null;\n  this.cname = null;\n  this.cid = null;\n  this.lts = null;\n  this.ip = null;\n  this.uid = null;\n  this.success = null;\n  this.elapse = null;\n  this.peer = null;\n  if (args) {\n    if (args.sid !== undefined && args.sid !== null) {\n      this.sid = args.sid;\n    }\n    if (args.cname !== undefined && args.cname !== null) {\n      this.cname = args.cname;\n    }\n    if (args.cid !== undefined && args.cid !== null) {\n      this.cid = args.cid;\n    }\n    if (args.lts !== undefined && args.lts !== null) {\n      this.lts = args.lts;\n    }\n    if (args.ip !== undefined && args.ip !== null) {\n      this.ip = args.ip;\n    }\n    if (args.uid !== undefined && args.uid !== null) {\n      this.uid = args.uid;\n    }\n    if (args.success !== undefined && args.success !== null) {\n      this.success = args.success;\n    }\n    if (args.elapse !== undefined && args.elapse !== null) {\n      this.elapse = args.elapse;\n    }\n    if (args.peer !== undefined && args.peer !== null) {\n      this.peer = args.peer;\n    }\n  }\n};\nVosdkHeader.prototype = {};\nVosdkHeader.prototype.read = function(input) {\n  input.readStructBegin();\n  while (true)\n  {\n    var ret = input.readFieldBegin();\n    var fname = ret.fname;\n    var ftype = ret.ftype;\n    var fid = ret.fid;\n    if (ftype == Thrift.Type.STOP) {\n      break;\n    }\n    switch (fid)\n    {\n      case 1:\n      if (ftype == Thrift.Type.STRING) {\n        this.sid = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 2:\n      if (ftype == Thrift.Type.STRING) {\n        this.cname = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 3:\n      if (ftype == Thrift.Type.I64) {\n        this.cid = input.readI64().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 4:\n      if (ftype == Thrift.Type.I64) {\n        this.lts = input.readI64().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 5:\n      if (ftype == Thrift.Type.STRING) {\n        this.ip = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 6:\n      if (ftype == Thrift.Type.I64) {\n        this.uid = input.readI64().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 7:\n      if (ftype == Thrift.Type.BOOL) {\n        this.success = input.readBool().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 8:\n      if (ftype == Thrift.Type.I64) {\n        this.elapse = input.readI64().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 9:\n      if (ftype == Thrift.Type.I64) {\n        this.peer = input.readI64().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      default:\n        input.skip(ftype);\n    }\n    input.readFieldEnd();\n  }\n  input.readStructEnd();\n  return;\n};\n\nVosdkHeader.prototype.write = function(output) {\n  output.writeStructBegin('VosdkHeader');\n  if (this.sid !== null && this.sid !== undefined) {\n    output.writeFieldBegin('sid', Thrift.Type.STRING, 1);\n    output.writeString(this.sid);\n    output.writeFieldEnd();\n  }\n  if (this.cname !== null && this.cname !== undefined) {\n    output.writeFieldBegin('cname', Thrift.Type.STRING, 2);\n    output.writeString(this.cname);\n    output.writeFieldEnd();\n  }\n  if (this.cid !== null && this.cid !== undefined) {\n    output.writeFieldBegin('cid', Thrift.Type.I64, 3);\n    output.writeI64(this.cid);\n    output.writeFieldEnd();\n  }\n  if (this.lts !== null && this.lts !== undefined) {\n    output.writeFieldBegin('lts', Thrift.Type.I64, 4);\n    output.writeI64(this.lts);\n    output.writeFieldEnd();\n  }\n  if (this.ip !== null && this.ip !== undefined) {\n    output.writeFieldBegin('ip', Thrift.Type.STRING, 5);\n    output.writeString(this.ip);\n    output.writeFieldEnd();\n  }\n  if (this.uid !== null && this.uid !== undefined) {\n    output.writeFieldBegin('uid', Thrift.Type.I64, 6);\n    output.writeI64(this.uid);\n    output.writeFieldEnd();\n  }\n  if (this.success !== null && this.success !== undefined) {\n    output.writeFieldBegin('success', Thrift.Type.BOOL, 7);\n    output.writeBool(this.success);\n    output.writeFieldEnd();\n  }\n  if (this.elapse !== null && this.elapse !== undefined) {\n    output.writeFieldBegin('elapse', Thrift.Type.I64, 8);\n    output.writeI64(this.elapse);\n    output.writeFieldEnd();\n  }\n  if (this.peer !== null && this.peer !== undefined) {\n    output.writeFieldBegin('peer', Thrift.Type.I64, 9);\n    output.writeI64(this.peer);\n    output.writeFieldEnd();\n  }\n  output.writeFieldStop();\n  output.writeStructEnd();\n  return;\n};\n\nvar VosdkCounterItem = function(args) {\n  this.name = null;\n  this.lts = null;\n  this.value = null;\n  this.id = null;\n  this.tagErrorCode = null;\n  if (args) {\n    if (args.name !== undefined && args.name !== null) {\n      this.name = args.name;\n    }\n    if (args.lts !== undefined && args.lts !== null) {\n      this.lts = args.lts;\n    }\n    if (args.value !== undefined && args.value !== null) {\n      this.value = args.value;\n    }\n    if (args.id !== undefined && args.id !== null) {\n      this.id = args.id;\n    }\n    if (args.tagErrorCode !== undefined && args.tagErrorCode !== null) {\n      this.tagErrorCode = args.tagErrorCode;\n    }\n  }\n};\nVosdkCounterItem.prototype = {};\nVosdkCounterItem.prototype.read = function(input) {\n  input.readStructBegin();\n  while (true)\n  {\n    var ret = input.readFieldBegin();\n    var fname = ret.fname;\n    var ftype = ret.ftype;\n    var fid = ret.fid;\n    if (ftype == Thrift.Type.STOP) {\n      break;\n    }\n    switch (fid)\n    {\n      case 1:\n      if (ftype == Thrift.Type.STRING) {\n        this.name = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 2:\n      if (ftype == Thrift.Type.I64) {\n        this.lts = input.readI64().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 3:\n      if (ftype == Thrift.Type.I32) {\n        this.value = input.readI32().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 4:\n      if (ftype == Thrift.Type.I32) {\n        this.id = input.readI32().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 5:\n      if (ftype == Thrift.Type.I32) {\n        this.tagErrorCode = input.readI32().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      default:\n        input.skip(ftype);\n    }\n    input.readFieldEnd();\n  }\n  input.readStructEnd();\n  return;\n};\n\nVosdkCounterItem.prototype.write = function(output) {\n  output.writeStructBegin('VosdkCounterItem');\n  if (this.name !== null && this.name !== undefined) {\n    output.writeFieldBegin('name', Thrift.Type.STRING, 1);\n    output.writeString(this.name);\n    output.writeFieldEnd();\n  }\n  if (this.lts !== null && this.lts !== undefined) {\n    output.writeFieldBegin('lts', Thrift.Type.I64, 2);\n    output.writeI64(this.lts);\n    output.writeFieldEnd();\n  }\n  if (this.value !== null && this.value !== undefined) {\n    output.writeFieldBegin('value', Thrift.Type.I32, 3);\n    output.writeI32(this.value);\n    output.writeFieldEnd();\n  }\n  if (this.id !== null && this.id !== undefined) {\n    output.writeFieldBegin('id', Thrift.Type.I32, 4);\n    output.writeI32(this.id);\n    output.writeFieldEnd();\n  }\n  if (this.tagErrorCode !== null && this.tagErrorCode !== undefined) {\n    output.writeFieldBegin('tagErrorCode', Thrift.Type.I32, 5);\n    output.writeI32(this.tagErrorCode);\n    output.writeFieldEnd();\n  }\n  output.writeFieldStop();\n  output.writeStructEnd();\n  return;\n};\n\nvar VosdkCounter = function(args) {\n  this.header = null;\n  this.items = null;\n  if (args) {\n    if (args.header !== undefined && args.header !== null) {\n      this.header = new VosdkHeader(args.header);\n    }\n    if (args.items !== undefined && args.items !== null) {\n      this.items = Thrift.copyList(args.items, [VosdkCounterItem]);\n    }\n  }\n};\nVosdkCounter.prototype = {};\nVosdkCounter.prototype.read = function(input) {\n  input.readStructBegin();\n  while (true)\n  {\n    var ret = input.readFieldBegin();\n    var fname = ret.fname;\n    var ftype = ret.ftype;\n    var fid = ret.fid;\n    if (ftype == Thrift.Type.STOP) {\n      break;\n    }\n    switch (fid)\n    {\n      case 1:\n      if (ftype == Thrift.Type.STRUCT) {\n        this.header = new VosdkHeader();\n        this.header.read(input);\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 2:\n      if (ftype == Thrift.Type.LIST) {\n        var _size0 = 0;\n        var _rtmp34;\n        this.items = [];\n        var _etype3 = 0;\n        _rtmp34 = input.readListBegin();\n        _etype3 = _rtmp34.etype;\n        _size0 = _rtmp34.size;\n        for (var _i5 = 0; _i5 < _size0; ++_i5)\n        {\n          var elem6 = null;\n          elem6 = new VosdkCounterItem();\n          elem6.read(input);\n          this.items.push(elem6);\n        }\n        input.readListEnd();\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      default:\n        input.skip(ftype);\n    }\n    input.readFieldEnd();\n  }\n  input.readStructEnd();\n  return;\n};\n\nVosdkCounter.prototype.write = function(output) {\n  output.writeStructBegin('VosdkCounter');\n  if (this.header !== null && this.header !== undefined) {\n    output.writeFieldBegin('header', Thrift.Type.STRUCT, 1);\n    this.header.write(output);\n    output.writeFieldEnd();\n  }\n  if (this.items !== null && this.items !== undefined) {\n    output.writeFieldBegin('items', Thrift.Type.LIST, 2);\n    output.writeListBegin(Thrift.Type.STRUCT, this.items.length);\n    for (var iter7 in this.items)\n    {\n      if (this.items.hasOwnProperty(iter7))\n      {\n        iter7 = this.items[iter7];\n        iter7.write(output);\n      }\n    }\n    output.writeListEnd();\n    output.writeFieldEnd();\n  }\n  output.writeFieldStop();\n  output.writeStructEnd();\n  return;\n};\n\nmodule.exports = {\n  VosdkHeader,\n  VosdkCounter,\n  VosdkCounterItem\n};","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]]\n  ]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread;","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 68\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/*!\n * EventEmitter v5.2.9 - git.io/ee\n * Unlicense - http://unlicense.org/\n * Oliver Caldwell - https://oli.me.uk/\n * @preserve\n */\n\n;(function (exports) {\n    'use strict';\n\n    /**\n     * Class for managing events.\n     * Can be extended to provide event functionality in other classes.\n     *\n     * @class EventEmitter Manages event registering and emitting.\n     */\n    function EventEmitter() {}\n\n    // Shortcuts to improve speed and size\n    var proto = EventEmitter.prototype;\n    var originalGlobalValue = exports.EventEmitter;\n\n    /**\n     * Finds the index of the listener for the event in its storage array.\n     *\n     * @param {Function[]} listeners Array of listeners to search through.\n     * @param {Function} listener Method to look for.\n     * @return {Number} Index of the specified listener, -1 if not found\n     * @api private\n     */\n    function indexOfListener(listeners, listener) {\n        var i = listeners.length;\n        while (i--) {\n            if (listeners[i].listener === listener) {\n                return i;\n            }\n        }\n\n        return -1;\n    }\n\n    /**\n     * Alias a method while keeping the context correct, to allow for overwriting of target method.\n     *\n     * @param {String} name The name of the target method.\n     * @return {Function} The aliased method\n     * @api private\n     */\n    function alias(name) {\n        return function aliasClosure() {\n            return this[name].apply(this, arguments);\n        };\n    }\n\n    /**\n     * Returns the listener array for the specified event.\n     * Will initialise the event object and listener arrays if required.\n     * Will return an object if you use a regex search. The object contains keys for each matched event. So /ba[rz]/ might return an object containing bar and baz. But only if you have either defined them with defineEvent or added some listeners to them.\n     * Each property in the object response is an array of listener functions.\n     *\n     * @param {String|RegExp} evt Name of the event to return the listeners from.\n     * @return {Function[]|Object} All listener functions for the event.\n     */\n    proto.getListeners = function getListeners(evt) {\n        var events = this._getEvents();\n        var response;\n        var key;\n\n        // Return a concatenated array of all matching events if\n        // the selector is a regular expression.\n        if (evt instanceof RegExp) {\n            response = {};\n            for (key in events) {\n                if (events.hasOwnProperty(key) && evt.test(key)) {\n                    response[key] = events[key];\n                }\n            }\n        }\n        else {\n            response = events[evt] || (events[evt] = []);\n        }\n\n        return response;\n    };\n\n    /**\n     * Takes a list of listener objects and flattens it into a list of listener functions.\n     *\n     * @param {Object[]} listeners Raw listener objects.\n     * @return {Function[]} Just the listener functions.\n     */\n    proto.flattenListeners = function flattenListeners(listeners) {\n        var flatListeners = [];\n        var i;\n\n        for (i = 0; i < listeners.length; i += 1) {\n            flatListeners.push(listeners[i].listener);\n        }\n\n        return flatListeners;\n    };\n\n    /**\n     * Fetches the requested listeners via getListeners but will always return the results inside an object. This is mainly for internal use but others may find it useful.\n     *\n     * @param {String|RegExp} evt Name of the event to return the listeners from.\n     * @return {Object} All listener functions for an event in an object.\n     */\n    proto.getListenersAsObject = function getListenersAsObject(evt) {\n        var listeners = this.getListeners(evt);\n        var response;\n\n        if (listeners instanceof Array) {\n            response = {};\n            response[evt] = listeners;\n        }\n\n        return response || listeners;\n    };\n\n    function isValidListener (listener) {\n        if (typeof listener === 'function' || listener instanceof RegExp) {\n            return true\n        } else if (listener && typeof listener === 'object') {\n            return isValidListener(listener.listener)\n        } else {\n            return false\n        }\n    }\n\n    /**\n     * Adds a listener function to the specified event.\n     * The listener will not be added if it is a duplicate.\n     * If the listener returns true then it will be removed after it is called.\n     * If you pass a regular expression as the event name then the listener will be added to all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to attach the listener to.\n     * @param {Function} listener Method to be called when the event is emitted. If the function returns true then it will be removed after calling.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.addListener = function addListener(evt, listener) {\n        if (!isValidListener(listener)) {\n            throw new TypeError('listener must be a function');\n        }\n\n        var listeners = this.getListenersAsObject(evt);\n        var listenerIsWrapped = typeof listener === 'object';\n        var key;\n\n        for (key in listeners) {\n            if (listeners.hasOwnProperty(key) && indexOfListener(listeners[key], listener) === -1) {\n                listeners[key].push(listenerIsWrapped ? listener : {\n                    listener: listener,\n                    once: false\n                });\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of addListener\n     */\n    proto.on = alias('addListener');\n\n    /**\n     * Semi-alias of addListener. It will add a listener that will be\n     * automatically removed after its first execution.\n     *\n     * @param {String|RegExp} evt Name of the event to attach the listener to.\n     * @param {Function} listener Method to be called when the event is emitted. If the function returns true then it will be removed after calling.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.addOnceListener = function addOnceListener(evt, listener) {\n        return this.addListener(evt, {\n            listener: listener,\n            once: true\n        });\n    };\n\n    /**\n     * Alias of addOnceListener.\n     */\n    proto.once = alias('addOnceListener');\n\n    /**\n     * Defines an event name. This is required if you want to use a regex to add a listener to multiple events at once. If you don't do this then how do you expect it to know what event to add to? Should it just add to every possible match for a regex? No. That is scary and bad.\n     * You need to tell it what event names should be matched by a regex.\n     *\n     * @param {String} evt Name of the event to create.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.defineEvent = function defineEvent(evt) {\n        this.getListeners(evt);\n        return this;\n    };\n\n    /**\n     * Uses defineEvent to define multiple events.\n     *\n     * @param {String[]} evts An array of event names to define.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.defineEvents = function defineEvents(evts) {\n        for (var i = 0; i < evts.length; i += 1) {\n            this.defineEvent(evts[i]);\n        }\n        return this;\n    };\n\n    /**\n     * Removes a listener function from the specified event.\n     * When passed a regular expression as the event name, it will remove the listener from all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to remove the listener from.\n     * @param {Function} listener Method to remove from the event.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.removeListener = function removeListener(evt, listener) {\n        var listeners = this.getListenersAsObject(evt);\n        var index;\n        var key;\n\n        for (key in listeners) {\n            if (listeners.hasOwnProperty(key)) {\n                index = indexOfListener(listeners[key], listener);\n\n                if (index !== -1) {\n                    listeners[key].splice(index, 1);\n                }\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of removeListener\n     */\n    proto.off = alias('removeListener');\n\n    /**\n     * Adds listeners in bulk using the manipulateListeners method.\n     * If you pass an object as the first argument you can add to multiple events at once. The object should contain key value pairs of events and listeners or listener arrays. You can also pass it an event name and an array of listeners to be added.\n     * You can also pass it a regular expression to add the array of listeners to all events that match it.\n     * Yeah, this function does quite a bit. That's probably a bad thing.\n     *\n     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to add to multiple events at once.\n     * @param {Function[]} [listeners] An optional array of listener functions to add.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.addListeners = function addListeners(evt, listeners) {\n        // Pass through to manipulateListeners\n        return this.manipulateListeners(false, evt, listeners);\n    };\n\n    /**\n     * Removes listeners in bulk using the manipulateListeners method.\n     * If you pass an object as the first argument you can remove from multiple events at once. The object should contain key value pairs of events and listeners or listener arrays.\n     * You can also pass it an event name and an array of listeners to be removed.\n     * You can also pass it a regular expression to remove the listeners from all events that match it.\n     *\n     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to remove from multiple events at once.\n     * @param {Function[]} [listeners] An optional array of listener functions to remove.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.removeListeners = function removeListeners(evt, listeners) {\n        // Pass through to manipulateListeners\n        return this.manipulateListeners(true, evt, listeners);\n    };\n\n    /**\n     * Edits listeners in bulk. The addListeners and removeListeners methods both use this to do their job. You should really use those instead, this is a little lower level.\n     * The first argument will determine if the listeners are removed (true) or added (false).\n     * If you pass an object as the second argument you can add/remove from multiple events at once. The object should contain key value pairs of events and listeners or listener arrays.\n     * You can also pass it an event name and an array of listeners to be added/removed.\n     * You can also pass it a regular expression to manipulate the listeners of all events that match it.\n     *\n     * @param {Boolean} remove True if you want to remove listeners, false if you want to add.\n     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to add/remove from multiple events at once.\n     * @param {Function[]} [listeners] An optional array of listener functions to add/remove.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.manipulateListeners = function manipulateListeners(remove, evt, listeners) {\n        var i;\n        var value;\n        var single = remove ? this.removeListener : this.addListener;\n        var multiple = remove ? this.removeListeners : this.addListeners;\n\n        // If evt is an object then pass each of its properties to this method\n        if (typeof evt === 'object' && !(evt instanceof RegExp)) {\n            for (i in evt) {\n                if (evt.hasOwnProperty(i) && (value = evt[i])) {\n                    // Pass the single listener straight through to the singular method\n                    if (typeof value === 'function') {\n                        single.call(this, i, value);\n                    }\n                    else {\n                        // Otherwise pass back to the multiple function\n                        multiple.call(this, i, value);\n                    }\n                }\n            }\n        }\n        else {\n            // So evt must be a string\n            // And listeners must be an array of listeners\n            // Loop over it and pass each one to the multiple method\n            i = listeners.length;\n            while (i--) {\n                single.call(this, evt, listeners[i]);\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Removes all listeners from a specified event.\n     * If you do not specify an event then all listeners will be removed.\n     * That means every event will be emptied.\n     * You can also pass a regex to remove all events that match it.\n     *\n     * @param {String|RegExp} [evt] Optional name of the event to remove all listeners for. Will remove from every event if not passed.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.removeEvent = function removeEvent(evt) {\n        var type = typeof evt;\n        var events = this._getEvents();\n        var key;\n\n        // Remove different things depending on the state of evt\n        if (type === 'string') {\n            // Remove all listeners for the specified event\n            delete events[evt];\n        }\n        else if (evt instanceof RegExp) {\n            // Remove all events matching the regex.\n            for (key in events) {\n                if (events.hasOwnProperty(key) && evt.test(key)) {\n                    delete events[key];\n                }\n            }\n        }\n        else {\n            // Remove all listeners in all events\n            delete this._events;\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of removeEvent.\n     *\n     * Added to mirror the node API.\n     */\n    proto.removeAllListeners = alias('removeEvent');\n\n    /**\n     * Emits an event of your choice.\n     * When emitted, every listener attached to that event will be executed.\n     * If you pass the optional argument array then those arguments will be passed to every listener upon execution.\n     * Because it uses `apply`, your array of arguments will be passed as if you wrote them out separately.\n     * So they will not arrive within the array on the other side, they will be separate.\n     * You can also pass a regular expression to emit to all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to emit and execute listeners for.\n     * @param {Array} [args] Optional array of arguments to be passed to each listener.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.emitEvent = function emitEvent(evt, args) {\n        var listenersMap = this.getListenersAsObject(evt);\n        var listeners;\n        var listener;\n        var i;\n        var key;\n        var response;\n\n        for (key in listenersMap) {\n            if (listenersMap.hasOwnProperty(key)) {\n                listeners = listenersMap[key].slice(0);\n\n                for (i = 0; i < listeners.length; i++) {\n                    // If the listener returns true then it shall be removed from the event\n                    // The function is executed either with a basic call or an apply if there is an args array\n                    listener = listeners[i];\n\n                    if (listener.once === true) {\n                        this.removeListener(evt, listener.listener);\n                    }\n\n                    response = listener.listener.apply(this, args || []);\n\n                    if (response === this._getOnceReturnValue()) {\n                        this.removeListener(evt, listener.listener);\n                    }\n                }\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of emitEvent\n     */\n    proto.trigger = alias('emitEvent');\n\n    /**\n     * Subtly different from emitEvent in that it will pass its arguments on to the listeners, as opposed to taking a single array of arguments to pass on.\n     * As with emitEvent, you can pass a regex in place of the event name to emit to all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to emit and execute listeners for.\n     * @param {...*} Optional additional arguments to be passed to each listener.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.emit = function emit(evt) {\n        var args = Array.prototype.slice.call(arguments, 1);\n        return this.emitEvent(evt, args);\n    };\n\n    /**\n     * Sets the current value to check against when executing listeners. If a\n     * listeners return value matches the one set here then it will be removed\n     * after execution. This value defaults to true.\n     *\n     * @param {*} value The new value to check for when executing listeners.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.setOnceReturnValue = function setOnceReturnValue(value) {\n        this._onceReturnValue = value;\n        return this;\n    };\n\n    /**\n     * Fetches the current value to check against when executing listeners. If\n     * the listeners return value matches this one then it should be removed\n     * automatically. It will return true by default.\n     *\n     * @return {*|Boolean} The current value to check for or the default, true.\n     * @api private\n     */\n    proto._getOnceReturnValue = function _getOnceReturnValue() {\n        if (this.hasOwnProperty('_onceReturnValue')) {\n            return this._onceReturnValue;\n        }\n        else {\n            return true;\n        }\n    };\n\n    /**\n     * Fetches the events object and creates one if required.\n     *\n     * @return {Object} The events storage object.\n     * @api private\n     */\n    proto._getEvents = function _getEvents() {\n        return this._events || (this._events = {});\n    };\n\n    /**\n     * Reverts the global {@link EventEmitter} to its previous value and returns a reference to this version.\n     *\n     * @return {Function} Non conflicting EventEmitter class.\n     */\n    EventEmitter.noConflict = function noConflict() {\n        exports.EventEmitter = originalGlobalValue;\n        return EventEmitter;\n    };\n\n    // Expose the class either via AMD, CommonJS or the global object\n    if (typeof define === 'function' && define.amd) {\n        define(function () {\n            return EventEmitter;\n        });\n    }\n    else if (typeof module === 'object' && module.exports){\n        module.exports = EventEmitter;\n    }\n    else {\n        exports.EventEmitter = EventEmitter;\n    }\n}(typeof window !== 'undefined' ? window : this || {}));\n","//\n// Autogenerated by Thrift Compiler (0.11.0)\n//\n// DO NOT EDIT UNLESS YOU ARE SURE THAT YOU KNOW WHAT YOU ARE DOING\n//\n\n\n//HELPER FUNCTIONS AND STRUCTURES\nvar Thrift = require('../Thrift/thrift').default;\nvar ReportItem = require('./report_item_miniapp_types');\n\nvar ReportService_Report_args = function(args) {\n  this.item = null;\n  if (args) {\n    if (args.item !== undefined && args.item !== null) {\n      this.item = new ReportItem(args.item);\n    }\n  }\n};\nReportService_Report_args.prototype = {};\nReportService_Report_args.prototype.read = function(input) {\n  input.readStructBegin();\n  while (true)\n  {\n    var ret = input.readFieldBegin();\n    var fname = ret.fname;\n    var ftype = ret.ftype;\n    var fid = ret.fid;\n    if (ftype == Thrift.Type.STOP) {\n      break;\n    }\n    switch (fid)\n    {\n      case 1:\n      if (ftype == Thrift.Type.STRUCT) {\n        this.item = new ReportItem();\n        this.item.read(input);\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 0:\n        input.skip(ftype);\n        break;\n      default:\n        input.skip(ftype);\n    }\n    input.readFieldEnd();\n  }\n  input.readStructEnd();\n  return;\n};\n\nReportService_Report_args.prototype.write = function(output) {\n  output.writeStructBegin('ReportService_Report_args');\n  if (this.item !== null && this.item !== undefined) {\n    output.writeFieldBegin('item', Thrift.Type.STRUCT, 1);\n    this.item.write(output);\n    output.writeFieldEnd();\n  }\n  output.writeFieldStop();\n  output.writeStructEnd();\n  return;\n};\n\nvar ReportService_Report_result = function(args) {\n};\nReportService_Report_result.prototype = {};\nReportService_Report_result.prototype.read = function(input) {\n  input.readStructBegin();\n  while (true)\n  {\n    var ret = input.readFieldBegin();\n    var fname = ret.fname;\n    var ftype = ret.ftype;\n    var fid = ret.fid;\n    if (ftype == Thrift.Type.STOP) {\n      break;\n    }\n    input.skip(ftype);\n    input.readFieldEnd();\n  }\n  input.readStructEnd();\n  return;\n};\n\nReportService_Report_result.prototype.write = function(output) {\n  output.writeStructBegin('ReportService_Report_result');\n  output.writeFieldStop();\n  output.writeStructEnd();\n  return;\n};\n\nvar ReportServiceClient = function(input, output) {\n    this.input = input;\n    this.output = (!output) ? input : output;\n    this.seqid = 0;\n};\nReportServiceClient.prototype = {};\nReportServiceClient.prototype.Report = function(item, callback) {\n  this.send_Report(item, callback); \n  if (!callback) {\n  this.recv_Report();\n  }\n};\n\nReportServiceClient.prototype.send_Report = function(item, callback) {\n  this.output.writeMessageBegin('Report', Thrift.MessageType.CALL, this.seqid);\n  var params = {\n    item: item\n  };\n  var args = new ReportService_Report_args(params);\n  args.write(this.output);\n  this.output.writeMessageEnd();\n  if (callback) {\n    var self = this;\n    this.output.getTransport().flush(true, function(err) {\n      // \n      // var result = null;\n      // try {\n      //   result = self.recv_Report();\n      // } catch (e) {\n      //   result = e;\n      // }\n      callback(err);\n    });\n  } else {\n    return this.output.getTransport().flush();\n  }\n};\n\nReportServiceClient.prototype.recv_Report = function() {\n  var ret = this.input.readMessageBegin();\n  var fname = ret.fname;\n  var mtype = ret.mtype;\n  var rseqid = ret.rseqid;\n  if (mtype == Thrift.MessageType.EXCEPTION) {\n    var x = new Thrift.TApplicationException();\n    x.read(this.input);\n    this.input.readMessageEnd();\n    throw x;\n  }\n  var result = new ReportService_Report_result();\n  result.read(this.input);\n  this.input.readMessageEnd();\n\n  return;\n};\n\nmodule.exports = {\n  ReportService_Report_args,\n  ReportService_Report_result,\n  ReportServiceClient\n};","//\n// Autogenerated by Thrift Compiler (0.11.0)\n//\n// DO NOT EDIT UNLESS YOU ARE SURE THAT YOU KNOW WHAT YOU ARE DOING\n//\nvar Thrift = require('../Thrift/thrift').default;\nvar VosdkHeader = require('./VosdkCommon_types').VosdkHeader;\n\nvar MiniappSession = function(args) {\n  this.header = null;\n  this.appid = null;\n  this.uname = null;\n  this.ver = null;\n  this.dk = null;\n  this.details = null;\n  if (args) {\n    if (args.header !== undefined && args.header !== null) {\n      this.header = new VosdkHeader(args.header);\n    }\n    if (args.appid !== undefined && args.appid !== null) {\n      this.appid = args.appid;\n    }\n    if (args.uname !== undefined && args.uname !== null) {\n      this.uname = args.uname;\n    }\n    if (args.ver !== undefined && args.ver !== null) {\n      this.ver = args.ver;\n    }\n    if (args.dk !== undefined && args.dk !== null) {\n      this.dk = args.dk;\n    }\n    if (args.details !== undefined && args.details !== null) {\n      this.details = args.details;\n    }\n  }\n};\nMiniappSession.prototype = {};\nMiniappSession.prototype.read = function(input) {\n  input.readStructBegin();\n  while (true)\n  {\n    var ret = input.readFieldBegin();\n    var fname = ret.fname;\n    var ftype = ret.ftype;\n    var fid = ret.fid;\n    if (ftype == Thrift.Type.STOP) {\n      break;\n    }\n    switch (fid)\n    {\n      case 1:\n      if (ftype == Thrift.Type.STRUCT) {\n        this.header = new VosdkHeader();\n        this.header.read(input);\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 2:\n      if (ftype == Thrift.Type.STRING) {\n        this.appid = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 3:\n      if (ftype == Thrift.Type.STRING) {\n        this.uname = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 4:\n      if (ftype == Thrift.Type.STRING) {\n        this.ver = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 5:\n      if (ftype == Thrift.Type.STRING) {\n        this.dk = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 6:\n      if (ftype == Thrift.Type.STRING) {\n        this.details = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      default:\n        input.skip(ftype);\n    }\n    input.readFieldEnd();\n  }\n  input.readStructEnd();\n  return;\n};\n\nMiniappSession.prototype.write = function(output) {\n  output.writeStructBegin('MiniappSession');\n  if (this.header !== null && this.header !== undefined) {\n    output.writeFieldBegin('header', Thrift.Type.STRUCT, 1);\n    this.header.write(output);\n    output.writeFieldEnd();\n  }\n  if (this.appid !== null && this.appid !== undefined) {\n    output.writeFieldBegin('appid', Thrift.Type.STRING, 2);\n    output.writeString(this.appid);\n    output.writeFieldEnd();\n  }\n  if (this.uname !== null && this.uname !== undefined) {\n    output.writeFieldBegin('uname', Thrift.Type.STRING, 3);\n    output.writeString(this.uname);\n    output.writeFieldEnd();\n  }\n  if (this.ver !== null && this.ver !== undefined) {\n    output.writeFieldBegin('ver', Thrift.Type.STRING, 4);\n    output.writeString(this.ver);\n    output.writeFieldEnd();\n  }\n  if (this.dk !== null && this.dk !== undefined) {\n    output.writeFieldBegin('dk', Thrift.Type.STRING, 5);\n    output.writeString(this.dk);\n    output.writeFieldEnd();\n  }\n  if (this.details !== null && this.details !== undefined) {\n    output.writeFieldBegin('details', Thrift.Type.STRING, 6);\n    output.writeString(this.details);\n    output.writeFieldEnd();\n  }\n  output.writeFieldStop();\n  output.writeStructEnd();\n  return;\n};\n\nvar MiniappJoinChooseServer = function(args) {\n  this.header = null;\n  this.csurl = null;\n  this.ec = null;\n  this.gatewaylist = null;\n  this.details = null;\n  if (args) {\n    if (args.header !== undefined && args.header !== null) {\n      this.header = new VosdkHeader(args.header);\n    }\n    if (args.csurl !== undefined && args.csurl !== null) {\n      this.csurl = args.csurl;\n    }\n    if (args.ec !== undefined && args.ec !== null) {\n      this.ec = args.ec;\n    }\n    if (args.gatewaylist !== undefined && args.gatewaylist !== null) {\n      this.gatewaylist = Thrift.copyList(args.gatewaylist, [null]);\n    }\n    if (args.details !== undefined && args.details !== null) {\n      this.details = args.details;\n    }\n  }\n};\nMiniappJoinChooseServer.prototype = {};\nMiniappJoinChooseServer.prototype.read = function(input) {\n  input.readStructBegin();\n  while (true)\n  {\n    var ret = input.readFieldBegin();\n    var fname = ret.fname;\n    var ftype = ret.ftype;\n    var fid = ret.fid;\n    if (ftype == Thrift.Type.STOP) {\n      break;\n    }\n    switch (fid)\n    {\n      case 1:\n      if (ftype == Thrift.Type.STRUCT) {\n        this.header = new VosdkHeader();\n        this.header.read(input);\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 2:\n      if (ftype == Thrift.Type.STRING) {\n        this.csurl = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 3:\n      if (ftype == Thrift.Type.STRING) {\n        this.ec = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 4:\n      if (ftype == Thrift.Type.LIST) {\n        var _size0 = 0;\n        var _rtmp34;\n        this.gatewaylist = [];\n        var _etype3 = 0;\n        _rtmp34 = input.readListBegin();\n        _etype3 = _rtmp34.etype;\n        _size0 = _rtmp34.size;\n        for (var _i5 = 0; _i5 < _size0; ++_i5)\n        {\n          var elem6 = null;\n          elem6 = input.readString().value;\n          this.gatewaylist.push(elem6);\n        }\n        input.readListEnd();\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 5:\n      if (ftype == Thrift.Type.STRING) {\n        this.details = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      default:\n        input.skip(ftype);\n    }\n    input.readFieldEnd();\n  }\n  input.readStructEnd();\n  return;\n};\n\nMiniappJoinChooseServer.prototype.write = function(output) {\n  output.writeStructBegin('MiniappJoinChooseServer');\n  if (this.header !== null && this.header !== undefined) {\n    output.writeFieldBegin('header', Thrift.Type.STRUCT, 1);\n    this.header.write(output);\n    output.writeFieldEnd();\n  }\n  if (this.csurl !== null && this.csurl !== undefined) {\n    output.writeFieldBegin('csurl', Thrift.Type.STRING, 2);\n    output.writeString(this.csurl);\n    output.writeFieldEnd();\n  }\n  if (this.ec !== null && this.ec !== undefined) {\n    output.writeFieldBegin('ec', Thrift.Type.STRING, 3);\n    output.writeString(this.ec);\n    output.writeFieldEnd();\n  }\n  if (this.gatewaylist !== null && this.gatewaylist !== undefined) {\n    output.writeFieldBegin('gatewaylist', Thrift.Type.LIST, 4);\n    output.writeListBegin(Thrift.Type.STRING, this.gatewaylist.length);\n    for (var iter7 in this.gatewaylist)\n    {\n      if (this.gatewaylist.hasOwnProperty(iter7))\n      {\n        iter7 = this.gatewaylist[iter7];\n        output.writeString(iter7);\n      }\n    }\n    output.writeListEnd();\n    output.writeFieldEnd();\n  }\n  if (this.details !== null && this.details !== undefined) {\n    output.writeFieldBegin('details', Thrift.Type.STRING, 5);\n    output.writeString(this.details);\n    output.writeFieldEnd();\n  }\n  output.writeFieldStop();\n  output.writeStructEnd();\n  return;\n};\n\nvar MiniappConnectWebSocket = function(args) {\n  this.header = null;\n  this.gateway = null;\n  this.ec = null;\n  this.wsurl = null;\n  this.details = null;\n  if (args) {\n    if (args.header !== undefined && args.header !== null) {\n      this.header = new VosdkHeader(args.header);\n    }\n    if (args.gateway !== undefined && args.gateway !== null) {\n      this.gateway = args.gateway;\n    }\n    if (args.ec !== undefined && args.ec !== null) {\n      this.ec = args.ec;\n    }\n    if (args.wsurl !== undefined && args.wsurl !== null) {\n      this.wsurl = args.wsurl;\n    }\n    if (args.details !== undefined && args.details !== null) {\n      this.details = args.details;\n    }\n  }\n};\nMiniappConnectWebSocket.prototype = {};\nMiniappConnectWebSocket.prototype.read = function(input) {\n  input.readStructBegin();\n  while (true)\n  {\n    var ret = input.readFieldBegin();\n    var fname = ret.fname;\n    var ftype = ret.ftype;\n    var fid = ret.fid;\n    if (ftype == Thrift.Type.STOP) {\n      break;\n    }\n    switch (fid)\n    {\n      case 1:\n      if (ftype == Thrift.Type.STRUCT) {\n        this.header = new VosdkHeader();\n        this.header.read(input);\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 2:\n      if (ftype == Thrift.Type.STRING) {\n        this.gateway = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 3:\n      if (ftype == Thrift.Type.STRING) {\n        this.ec = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 4:\n      if (ftype == Thrift.Type.STRING) {\n        this.wsurl = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 5:\n      if (ftype == Thrift.Type.STRING) {\n        this.details = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      default:\n        input.skip(ftype);\n    }\n    input.readFieldEnd();\n  }\n  input.readStructEnd();\n  return;\n};\n\nMiniappConnectWebSocket.prototype.write = function(output) {\n  output.writeStructBegin('MiniappConnectWebSocket');\n  if (this.header !== null && this.header !== undefined) {\n    output.writeFieldBegin('header', Thrift.Type.STRUCT, 1);\n    this.header.write(output);\n    output.writeFieldEnd();\n  }\n  if (this.gateway !== null && this.gateway !== undefined) {\n    output.writeFieldBegin('gateway', Thrift.Type.STRING, 2);\n    output.writeString(this.gateway);\n    output.writeFieldEnd();\n  }\n  if (this.ec !== null && this.ec !== undefined) {\n    output.writeFieldBegin('ec', Thrift.Type.STRING, 3);\n    output.writeString(this.ec);\n    output.writeFieldEnd();\n  }\n  if (this.wsurl !== null && this.wsurl !== undefined) {\n    output.writeFieldBegin('wsurl', Thrift.Type.STRING, 4);\n    output.writeString(this.wsurl);\n    output.writeFieldEnd();\n  }\n  if (this.details !== null && this.details !== undefined) {\n    output.writeFieldBegin('details', Thrift.Type.STRING, 5);\n    output.writeString(this.details);\n    output.writeFieldEnd();\n  }\n  output.writeFieldStop();\n  output.writeStructEnd();\n  return;\n};\n\nvar MiniappJoin = function(args) {\n  this.header = null;\n  this.uid = null;\n  this.ec = null;\n  this.isrejoin = null;\n  this.details = null;\n  if (args) {\n    if (args.header !== undefined && args.header !== null) {\n      this.header = new VosdkHeader(args.header);\n    }\n    if (args.uid !== undefined && args.uid !== null) {\n      this.uid = args.uid;\n    }\n    if (args.ec !== undefined && args.ec !== null) {\n      this.ec = args.ec;\n    }\n    if (args.isrejoin !== undefined && args.isrejoin !== null) {\n      this.isrejoin = args.isrejoin;\n    }\n    if (args.details !== undefined && args.details !== null) {\n      this.details = args.details;\n    }\n  }\n};\nMiniappJoin.prototype = {};\nMiniappJoin.prototype.read = function(input) {\n  input.readStructBegin();\n  while (true)\n  {\n    var ret = input.readFieldBegin();\n    var fname = ret.fname;\n    var ftype = ret.ftype;\n    var fid = ret.fid;\n    if (ftype == Thrift.Type.STOP) {\n      break;\n    }\n    switch (fid)\n    {\n      case 1:\n      if (ftype == Thrift.Type.STRUCT) {\n        this.header = new VosdkHeader();\n        this.header.read(input);\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 2:\n      if (ftype == Thrift.Type.STRING) {\n        this.uid = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 3:\n      if (ftype == Thrift.Type.STRING) {\n        this.ec = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 4:\n      if (ftype == Thrift.Type.BOOL) {\n        this.isrejoin = input.readBool().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 5:\n      if (ftype == Thrift.Type.STRING) {\n        this.details = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      default:\n        input.skip(ftype);\n    }\n    input.readFieldEnd();\n  }\n  input.readStructEnd();\n  return;\n};\n\nMiniappJoin.prototype.write = function(output) {\n  output.writeStructBegin('MiniappJoin');\n  if (this.header !== null && this.header !== undefined) {\n    output.writeFieldBegin('header', Thrift.Type.STRUCT, 1);\n    this.header.write(output);\n    output.writeFieldEnd();\n  }\n  if (this.uid !== null && this.uid !== undefined) {\n    output.writeFieldBegin('uid', Thrift.Type.STRING, 2);\n    output.writeString(this.uid);\n    output.writeFieldEnd();\n  }\n  if (this.ec !== null && this.ec !== undefined) {\n    output.writeFieldBegin('ec', Thrift.Type.STRING, 3);\n    output.writeString(this.ec);\n    output.writeFieldEnd();\n  }\n  if (this.isrejoin !== null && this.isrejoin !== undefined) {\n    output.writeFieldBegin('isrejoin', Thrift.Type.BOOL, 4);\n    output.writeBool(this.isrejoin);\n    output.writeFieldEnd();\n  }\n  if (this.details !== null && this.details !== undefined) {\n    output.writeFieldBegin('details', Thrift.Type.STRING, 5);\n    output.writeString(this.details);\n    output.writeFieldEnd();\n  }\n  output.writeFieldStop();\n  output.writeStructEnd();\n  return;\n};\n\nvar MiniappPublish = function(args) {\n  this.header = null;\n  this.ec = null;\n  this.pushurl = null;\n  this.uid = null;\n  this.details = null;\n  if (args) {\n    if (args.header !== undefined && args.header !== null) {\n      this.header = new VosdkHeader(args.header);\n    }\n    if (args.ec !== undefined && args.ec !== null) {\n      this.ec = args.ec;\n    }\n    if (args.pushurl !== undefined && args.pushurl !== null) {\n      this.pushurl = args.pushurl;\n    }\n    if (args.uid !== undefined && args.uid !== null) {\n      this.uid = args.uid;\n    }\n    if (args.details !== undefined && args.details !== null) {\n      this.details = args.details;\n    }\n  }\n};\nMiniappPublish.prototype = {};\nMiniappPublish.prototype.read = function(input) {\n  input.readStructBegin();\n  while (true)\n  {\n    var ret = input.readFieldBegin();\n    var fname = ret.fname;\n    var ftype = ret.ftype;\n    var fid = ret.fid;\n    if (ftype == Thrift.Type.STOP) {\n      break;\n    }\n    switch (fid)\n    {\n      case 1:\n      if (ftype == Thrift.Type.STRUCT) {\n        this.header = new VosdkHeader();\n        this.header.read(input);\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 2:\n      if (ftype == Thrift.Type.STRING) {\n        this.ec = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 3:\n      if (ftype == Thrift.Type.STRING) {\n        this.pushurl = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 4:\n      if (ftype == Thrift.Type.STRING) {\n        this.uid = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 5:\n      if (ftype == Thrift.Type.STRING) {\n        this.details = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      default:\n        input.skip(ftype);\n    }\n    input.readFieldEnd();\n  }\n  input.readStructEnd();\n  return;\n};\n\nMiniappPublish.prototype.write = function(output) {\n  output.writeStructBegin('MiniappPublish');\n  if (this.header !== null && this.header !== undefined) {\n    output.writeFieldBegin('header', Thrift.Type.STRUCT, 1);\n    this.header.write(output);\n    output.writeFieldEnd();\n  }\n  if (this.ec !== null && this.ec !== undefined) {\n    output.writeFieldBegin('ec', Thrift.Type.STRING, 2);\n    output.writeString(this.ec);\n    output.writeFieldEnd();\n  }\n  if (this.pushurl !== null && this.pushurl !== undefined) {\n    output.writeFieldBegin('pushurl', Thrift.Type.STRING, 3);\n    output.writeString(this.pushurl);\n    output.writeFieldEnd();\n  }\n  if (this.uid !== null && this.uid !== undefined) {\n    output.writeFieldBegin('uid', Thrift.Type.STRING, 4);\n    output.writeString(this.uid);\n    output.writeFieldEnd();\n  }\n  if (this.details !== null && this.details !== undefined) {\n    output.writeFieldBegin('details', Thrift.Type.STRING, 5);\n    output.writeString(this.details);\n    output.writeFieldEnd();\n  }\n  output.writeFieldStop();\n  output.writeStructEnd();\n  return;\n};\n\nvar MiniappUnpublish = function(args) {\n  this.header = null;\n  this.ec = null;\n  this.uid = null;\n  this.details = null;\n  if (args) {\n    if (args.header !== undefined && args.header !== null) {\n      this.header = new VosdkHeader(args.header);\n    }\n    if (args.ec !== undefined && args.ec !== null) {\n      this.ec = args.ec;\n    }\n    if (args.uid !== undefined && args.uid !== null) {\n      this.uid = args.uid;\n    }\n    if (args.details !== undefined && args.details !== null) {\n      this.details = args.details;\n    }\n  }\n};\nMiniappUnpublish.prototype = {};\nMiniappUnpublish.prototype.read = function(input) {\n  input.readStructBegin();\n  while (true)\n  {\n    var ret = input.readFieldBegin();\n    var fname = ret.fname;\n    var ftype = ret.ftype;\n    var fid = ret.fid;\n    if (ftype == Thrift.Type.STOP) {\n      break;\n    }\n    switch (fid)\n    {\n      case 1:\n      if (ftype == Thrift.Type.STRUCT) {\n        this.header = new VosdkHeader();\n        this.header.read(input);\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 2:\n      if (ftype == Thrift.Type.STRING) {\n        this.ec = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 3:\n      if (ftype == Thrift.Type.STRING) {\n        this.uid = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 5:\n      if (ftype == Thrift.Type.STRING) {\n        this.details = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      default:\n        input.skip(ftype);\n    }\n    input.readFieldEnd();\n  }\n  input.readStructEnd();\n  return;\n};\n\nMiniappUnpublish.prototype.write = function(output) {\n  output.writeStructBegin('MiniappUnpublish');\n  if (this.header !== null && this.header !== undefined) {\n    output.writeFieldBegin('header', Thrift.Type.STRUCT, 1);\n    this.header.write(output);\n    output.writeFieldEnd();\n  }\n  if (this.ec !== null && this.ec !== undefined) {\n    output.writeFieldBegin('ec', Thrift.Type.STRING, 2);\n    output.writeString(this.ec);\n    output.writeFieldEnd();\n  }\n  if (this.uid !== null && this.uid !== undefined) {\n    output.writeFieldBegin('uid', Thrift.Type.STRING, 3);\n    output.writeString(this.uid);\n    output.writeFieldEnd();\n  }\n  if (this.details !== null && this.details !== undefined) {\n    output.writeFieldBegin('details', Thrift.Type.STRING, 5);\n    output.writeString(this.details);\n    output.writeFieldEnd();\n  }\n  output.writeFieldStop();\n  output.writeStructEnd();\n  return;\n};\n\nvar MiniappSubscribe = function(args) {\n  this.header = null;\n  this.ec = null;\n  this.pullurl = null;\n  this.peerid = null;\n  this.details = null;\n  if (args) {\n    if (args.header !== undefined && args.header !== null) {\n      this.header = new VosdkHeader(args.header);\n    }\n    if (args.ec !== undefined && args.ec !== null) {\n      this.ec = args.ec;\n    }\n    if (args.pullurl !== undefined && args.pullurl !== null) {\n      this.pullurl = args.pullurl;\n    }\n    if (args.peerid !== undefined && args.peerid !== null) {\n      this.peerid = args.peerid;\n    }\n    if (args.details !== undefined && args.details !== null) {\n      this.details = args.details;\n    }\n  }\n};\nMiniappSubscribe.prototype = {};\nMiniappSubscribe.prototype.read = function(input) {\n  input.readStructBegin();\n  while (true)\n  {\n    var ret = input.readFieldBegin();\n    var fname = ret.fname;\n    var ftype = ret.ftype;\n    var fid = ret.fid;\n    if (ftype == Thrift.Type.STOP) {\n      break;\n    }\n    switch (fid)\n    {\n      case 1:\n      if (ftype == Thrift.Type.STRUCT) {\n        this.header = new VosdkHeader();\n        this.header.read(input);\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 2:\n      if (ftype == Thrift.Type.STRING) {\n        this.ec = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 3:\n      if (ftype == Thrift.Type.STRING) {\n        this.pullurl = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 4:\n      if (ftype == Thrift.Type.STRING) {\n        this.peerid = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 5:\n      if (ftype == Thrift.Type.STRING) {\n        this.details = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      default:\n        input.skip(ftype);\n    }\n    input.readFieldEnd();\n  }\n  input.readStructEnd();\n  return;\n};\n\nMiniappSubscribe.prototype.write = function(output) {\n  output.writeStructBegin('MiniappSubscribe');\n  if (this.header !== null && this.header !== undefined) {\n    output.writeFieldBegin('header', Thrift.Type.STRUCT, 1);\n    this.header.write(output);\n    output.writeFieldEnd();\n  }\n  if (this.ec !== null && this.ec !== undefined) {\n    output.writeFieldBegin('ec', Thrift.Type.STRING, 2);\n    output.writeString(this.ec);\n    output.writeFieldEnd();\n  }\n  if (this.pullurl !== null && this.pullurl !== undefined) {\n    output.writeFieldBegin('pullurl', Thrift.Type.STRING, 3);\n    output.writeString(this.pullurl);\n    output.writeFieldEnd();\n  }\n  if (this.peerid !== null && this.peerid !== undefined) {\n    output.writeFieldBegin('peerid', Thrift.Type.STRING, 4);\n    output.writeString(this.peerid);\n    output.writeFieldEnd();\n  }\n  if (this.details !== null && this.details !== undefined) {\n    output.writeFieldBegin('details', Thrift.Type.STRING, 5);\n    output.writeString(this.details);\n    output.writeFieldEnd();\n  }\n  output.writeFieldStop();\n  output.writeStructEnd();\n  return;\n};\n\nvar MiniappUnsubscribe = function(args) {\n  this.header = null;\n  this.ec = null;\n  this.peerid = null;\n  this.details = null;\n  if (args) {\n    if (args.header !== undefined && args.header !== null) {\n      this.header = new VosdkHeader(args.header);\n    }\n    if (args.ec !== undefined && args.ec !== null) {\n      this.ec = args.ec;\n    }\n    if (args.peerid !== undefined && args.peerid !== null) {\n      this.peerid = args.peerid;\n    }\n    if (args.details !== undefined && args.details !== null) {\n      this.details = args.details;\n    }\n  }\n};\nMiniappUnsubscribe.prototype = {};\nMiniappUnsubscribe.prototype.read = function(input) {\n  input.readStructBegin();\n  while (true)\n  {\n    var ret = input.readFieldBegin();\n    var fname = ret.fname;\n    var ftype = ret.ftype;\n    var fid = ret.fid;\n    if (ftype == Thrift.Type.STOP) {\n      break;\n    }\n    switch (fid)\n    {\n      case 1:\n      if (ftype == Thrift.Type.STRUCT) {\n        this.header = new VosdkHeader();\n        this.header.read(input);\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 2:\n      if (ftype == Thrift.Type.STRING) {\n        this.ec = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 3:\n      if (ftype == Thrift.Type.STRING) {\n        this.peerid = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 4:\n      if (ftype == Thrift.Type.STRING) {\n        this.details = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      default:\n        input.skip(ftype);\n    }\n    input.readFieldEnd();\n  }\n  input.readStructEnd();\n  return;\n};\n\nMiniappUnsubscribe.prototype.write = function(output) {\n  output.writeStructBegin('MiniappUnsubscribe');\n  if (this.header !== null && this.header !== undefined) {\n    output.writeFieldBegin('header', Thrift.Type.STRUCT, 1);\n    this.header.write(output);\n    output.writeFieldEnd();\n  }\n  if (this.ec !== null && this.ec !== undefined) {\n    output.writeFieldBegin('ec', Thrift.Type.STRING, 2);\n    output.writeString(this.ec);\n    output.writeFieldEnd();\n  }\n  if (this.peerid !== null && this.peerid !== undefined) {\n    output.writeFieldBegin('peerid', Thrift.Type.STRING, 3);\n    output.writeString(this.peerid);\n    output.writeFieldEnd();\n  }\n  if (this.details !== null && this.details !== undefined) {\n    output.writeFieldBegin('details', Thrift.Type.STRING, 4);\n    output.writeString(this.details);\n    output.writeFieldEnd();\n  }\n  output.writeFieldStop();\n  output.writeStructEnd();\n  return;\n};\n\nvar MiniappLeave = function(args) {\n  this.header = null;\n  this.uid = null;\n  this.details = null;\n  if (args) {\n    if (args.header !== undefined && args.header !== null) {\n      this.header = new VosdkHeader(args.header);\n    }\n    if (args.uid !== undefined && args.uid !== null) {\n      this.uid = args.uid;\n    }\n    if (args.details !== undefined && args.details !== null) {\n      this.details = args.details;\n    }\n  }\n};\nMiniappLeave.prototype = {};\nMiniappLeave.prototype.read = function(input) {\n  input.readStructBegin();\n  while (true)\n  {\n    var ret = input.readFieldBegin();\n    var fname = ret.fname;\n    var ftype = ret.ftype;\n    var fid = ret.fid;\n    if (ftype == Thrift.Type.STOP) {\n      break;\n    }\n    switch (fid)\n    {\n      case 1:\n      if (ftype == Thrift.Type.STRUCT) {\n        this.header = new VosdkHeader();\n        this.header.read(input);\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 2:\n      if (ftype == Thrift.Type.STRING) {\n        this.uid = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 3:\n      if (ftype == Thrift.Type.STRING) {\n        this.details = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      default:\n        input.skip(ftype);\n    }\n    input.readFieldEnd();\n  }\n  input.readStructEnd();\n  return;\n};\n\nMiniappLeave.prototype.write = function(output) {\n  output.writeStructBegin('MiniappLeave');\n  if (this.header !== null && this.header !== undefined) {\n    output.writeFieldBegin('header', Thrift.Type.STRUCT, 1);\n    this.header.write(output);\n    output.writeFieldEnd();\n  }\n  if (this.uid !== null && this.uid !== undefined) {\n    output.writeFieldBegin('uid', Thrift.Type.STRING, 2);\n    output.writeString(this.uid);\n    output.writeFieldEnd();\n  }\n  if (this.details !== null && this.details !== undefined) {\n    output.writeFieldBegin('details', Thrift.Type.STRING, 3);\n    output.writeString(this.details);\n    output.writeFieldEnd();\n  }\n  output.writeFieldStop();\n  output.writeStructEnd();\n  return;\n};\n\nvar MiniappServerEvent = function(args) {\n  this.header = null;\n  this.action = null;\n  this.details = null;\n  this.req_ts = null;\n  if (args) {\n    if (args.header !== undefined && args.header !== null) {\n      this.header = new VosdkHeader(args.header);\n    }\n    if (args.action !== undefined && args.action !== null) {\n      this.action = args.action;\n    }\n    if (args.details !== undefined && args.details !== null) {\n      this.details = args.details;\n    }\n    if (args.req_ts !== undefined && args.req_ts !== null) {\n      this.req_ts = args.req_ts;\n    }\n  }\n};\nMiniappServerEvent.prototype = {};\nMiniappServerEvent.prototype.read = function(input) {\n  input.readStructBegin();\n  while (true)\n  {\n    var ret = input.readFieldBegin();\n    var fname = ret.fname;\n    var ftype = ret.ftype;\n    var fid = ret.fid;\n    if (ftype == Thrift.Type.STOP) {\n      break;\n    }\n    switch (fid)\n    {\n      case 1:\n      if (ftype == Thrift.Type.STRUCT) {\n        this.header = new VosdkHeader();\n        this.header.read(input);\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 2:\n      if (ftype == Thrift.Type.STRING) {\n        this.action = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 3:\n      if (ftype == Thrift.Type.STRING) {\n        this.details = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 4:\n      if (ftype == Thrift.Type.I64) {\n        this.req_ts = input.readI64().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      default:\n        input.skip(ftype);\n    }\n    input.readFieldEnd();\n  }\n  input.readStructEnd();\n  return;\n};\n\nMiniappServerEvent.prototype.write = function(output) {\n  output.writeStructBegin('MiniappServerEvent');\n  if (this.header !== null && this.header !== undefined) {\n    output.writeFieldBegin('header', Thrift.Type.STRUCT, 1);\n    this.header.write(output);\n    output.writeFieldEnd();\n  }\n  if (this.action !== null && this.action !== undefined) {\n    output.writeFieldBegin('action', Thrift.Type.STRING, 2);\n    output.writeString(this.action);\n    output.writeFieldEnd();\n  }\n  if (this.details !== null && this.details !== undefined) {\n    output.writeFieldBegin('details', Thrift.Type.STRING, 3);\n    output.writeString(this.details);\n    output.writeFieldEnd();\n  }\n  if (this.req_ts !== null && this.req_ts !== undefined) {\n    output.writeFieldBegin('req_ts', Thrift.Type.I64, 4);\n    output.writeI64(this.req_ts);\n    output.writeFieldEnd();\n  }\n  output.writeFieldStop();\n  output.writeStructEnd();\n  return;\n};\n\nvar MiniappPusherState = function(args) {\n  this.header = null;\n  this.url = null;\n  this.code = null;\n  this.status = null;\n  this.error = null;\n  this.details = null;\n  if (args) {\n    if (args.header !== undefined && args.header !== null) {\n      this.header = new VosdkHeader(args.header);\n    }\n    if (args.url !== undefined && args.url !== null) {\n      this.url = args.url;\n    }\n    if (args.code !== undefined && args.code !== null) {\n      this.code = args.code;\n    }\n    if (args.status !== undefined && args.status !== null) {\n      this.status = args.status;\n    }\n    if (args.error !== undefined && args.error !== null) {\n      this.error = args.error;\n    }\n    if (args.details !== undefined && args.details !== null) {\n      this.details = args.details;\n    }\n  }\n};\nMiniappPusherState.prototype = {};\nMiniappPusherState.prototype.read = function(input) {\n  input.readStructBegin();\n  while (true)\n  {\n    var ret = input.readFieldBegin();\n    var fname = ret.fname;\n    var ftype = ret.ftype;\n    var fid = ret.fid;\n    if (ftype == Thrift.Type.STOP) {\n      break;\n    }\n    switch (fid)\n    {\n      case 1:\n      if (ftype == Thrift.Type.STRUCT) {\n        this.header = new VosdkHeader();\n        this.header.read(input);\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 2:\n      if (ftype == Thrift.Type.STRING) {\n        this.url = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 3:\n      if (ftype == Thrift.Type.STRING) {\n        this.code = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 4:\n      if (ftype == Thrift.Type.STRING) {\n        this.status = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 5:\n      if (ftype == Thrift.Type.STRING) {\n        this.error = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 6:\n      if (ftype == Thrift.Type.STRING) {\n        this.details = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      default:\n        input.skip(ftype);\n    }\n    input.readFieldEnd();\n  }\n  input.readStructEnd();\n  return;\n};\n\nMiniappPusherState.prototype.write = function(output) {\n  output.writeStructBegin('MiniappPusherState');\n  if (this.header !== null && this.header !== undefined) {\n    output.writeFieldBegin('header', Thrift.Type.STRUCT, 1);\n    this.header.write(output);\n    output.writeFieldEnd();\n  }\n  if (this.url !== null && this.url !== undefined) {\n    output.writeFieldBegin('url', Thrift.Type.STRING, 2);\n    output.writeString(this.url);\n    output.writeFieldEnd();\n  }\n  if (this.code !== null && this.code !== undefined) {\n    output.writeFieldBegin('code', Thrift.Type.STRING, 3);\n    output.writeString(this.code);\n    output.writeFieldEnd();\n  }\n  if (this.status !== null && this.status !== undefined) {\n    output.writeFieldBegin('status', Thrift.Type.STRING, 4);\n    output.writeString(this.status);\n    output.writeFieldEnd();\n  }\n  if (this.error !== null && this.error !== undefined) {\n    output.writeFieldBegin('error', Thrift.Type.STRING, 5);\n    output.writeString(this.error);\n    output.writeFieldEnd();\n  }\n  if (this.details !== null && this.details !== undefined) {\n    output.writeFieldBegin('details', Thrift.Type.STRING, 6);\n    output.writeString(this.details);\n    output.writeFieldEnd();\n  }\n  output.writeFieldStop();\n  output.writeStructEnd();\n  return;\n};\n\nvar MiniappPlayerState = function(args) {\n  this.header = null;\n  this.url = null;\n  this.code = null;\n  this.status = null;\n  this.error = null;\n  this.details = null;\n  if (args) {\n    if (args.header !== undefined && args.header !== null) {\n      this.header = new VosdkHeader(args.header);\n    }\n    if (args.url !== undefined && args.url !== null) {\n      this.url = args.url;\n    }\n    if (args.code !== undefined && args.code !== null) {\n      this.code = args.code;\n    }\n    if (args.status !== undefined && args.status !== null) {\n      this.status = args.status;\n    }\n    if (args.error !== undefined && args.error !== null) {\n      this.error = args.error;\n    }\n    if (args.details !== undefined && args.details !== null) {\n      this.details = args.details;\n    }\n  }\n};\nMiniappPlayerState.prototype = {};\nMiniappPlayerState.prototype.read = function(input) {\n  input.readStructBegin();\n  while (true)\n  {\n    var ret = input.readFieldBegin();\n    var fname = ret.fname;\n    var ftype = ret.ftype;\n    var fid = ret.fid;\n    if (ftype == Thrift.Type.STOP) {\n      break;\n    }\n    switch (fid)\n    {\n      case 1:\n      if (ftype == Thrift.Type.STRUCT) {\n        this.header = new VosdkHeader();\n        this.header.read(input);\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 2:\n      if (ftype == Thrift.Type.STRING) {\n        this.url = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 3:\n      if (ftype == Thrift.Type.STRING) {\n        this.code = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 4:\n      if (ftype == Thrift.Type.STRING) {\n        this.status = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 5:\n      if (ftype == Thrift.Type.STRING) {\n        this.error = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 6:\n      if (ftype == Thrift.Type.STRING) {\n        this.details = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      default:\n        input.skip(ftype);\n    }\n    input.readFieldEnd();\n  }\n  input.readStructEnd();\n  return;\n};\n\nMiniappPlayerState.prototype.write = function(output) {\n  output.writeStructBegin('MiniappPlayerState');\n  if (this.header !== null && this.header !== undefined) {\n    output.writeFieldBegin('header', Thrift.Type.STRUCT, 1);\n    this.header.write(output);\n    output.writeFieldEnd();\n  }\n  if (this.url !== null && this.url !== undefined) {\n    output.writeFieldBegin('url', Thrift.Type.STRING, 2);\n    output.writeString(this.url);\n    output.writeFieldEnd();\n  }\n  if (this.code !== null && this.code !== undefined) {\n    output.writeFieldBegin('code', Thrift.Type.STRING, 3);\n    output.writeString(this.code);\n    output.writeFieldEnd();\n  }\n  if (this.status !== null && this.status !== undefined) {\n    output.writeFieldBegin('status', Thrift.Type.STRING, 4);\n    output.writeString(this.status);\n    output.writeFieldEnd();\n  }\n  if (this.error !== null && this.error !== undefined) {\n    output.writeFieldBegin('error', Thrift.Type.STRING, 5);\n    output.writeString(this.error);\n    output.writeFieldEnd();\n  }\n  if (this.details !== null && this.details !== undefined) {\n    output.writeFieldBegin('details', Thrift.Type.STRING, 6);\n    output.writeString(this.details);\n    output.writeFieldEnd();\n  }\n  output.writeFieldStop();\n  output.writeStructEnd();\n  return;\n};\n\nmodule.exports = {\n  MiniappSession,\n  MiniappJoinChooseServer,\n  MiniappConnectWebSocket,\n  MiniappJoin,\n  MiniappPublish,\n  MiniappUnpublish,\n  MiniappSubscribe,\n  MiniappUnsubscribe,\n  MiniappLeave,\n  MiniappServerEvent,\n  MiniappPusherState,\n  MiniappPlayerState\n};","//      \n// An event handler can take an optional event argument\n// and should not return a value\n                                          \n                                                               \n\n// An array of all currently registered event handlers for a type\n                                            \n                                                            \n// A map of event types and their corresponding event handlers.\n                        \n                                 \n                                   \n  \n\n/** Mitt: Tiny (~200b) functional event emitter / pubsub.\n *  @name mitt\n *  @returns {Mitt}\n */\nfunction mitt(all                 ) {\n\tall = all || Object.create(null);\n\n\treturn {\n\t\t/**\n\t\t * Register an event handler for the given type.\n\t\t *\n\t\t * @param  {String} type\tType of event to listen for, or `\"*\"` for all events\n\t\t * @param  {Function} handler Function to call in response to given event\n\t\t * @memberOf mitt\n\t\t */\n\t\ton: function on(type        , handler              ) {\n\t\t\t(all[type] || (all[type] = [])).push(handler);\n\t\t},\n\n\t\t/**\n\t\t * Remove an event handler for the given type.\n\t\t *\n\t\t * @param  {String} type\tType of event to unregister `handler` from, or `\"*\"`\n\t\t * @param  {Function} handler Handler function to remove\n\t\t * @memberOf mitt\n\t\t */\n\t\toff: function off(type        , handler              ) {\n\t\t\tif (all[type]) {\n\t\t\t\tall[type].splice(all[type].indexOf(handler) >>> 0, 1);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Invoke all handlers for the given type.\n\t\t * If present, `\"*\"` handlers are invoked after type-matched handlers.\n\t\t *\n\t\t * @param {String} type  The event type to invoke\n\t\t * @param {Any} [evt]  Any value (object is recommended and powerful), passed to each handler\n\t\t * @memberOf mitt\n\t\t */\n\t\temit: function emit(type        , evt     ) {\n\t\t\t(all[type] || []).slice().map(function (handler) { handler(evt); });\n\t\t\t(all['*'] || []).slice().map(function (handler) { handler(type, evt); });\n\t\t}\n\t};\n}\n\nexport default mitt;\n//# sourceMappingURL=mitt.es.js.map\n","import { VERSION } from './Config'\nimport { isWeiXin } from './Helper'\nimport LOG from './Log';\nimport { setTimeout } from 'timers';\n\nconst ERROR_NO_NEED_RECONNECT = [\n  // \"invalid key\"\n  'service unavailable',\n  'no channel',\n  'too many users',\n  'invalid key',\n  'master available',\n  'invalid channel name',\n  'internal error',\n  'no authorized',\n  'dynamic key timeout',\n  'no active status',\n  'invalid uid',\n  'dynamic key expired',\n  'vendor over load',\n];\nconst CHOOSE_SERVER_LIST = [\n  \"https://miniapp-1.agoraio.cn/appcenter/1-1-1/getWorkerManager/\",\n  \"https://miniapp-2.agoraio.cn/appcenter/1-1-1/getWorkerManager/\",\n  \"https://miniapp-3.agoraio.cn/appcenter/1-1-1/getWorkerManager/\",\n  \"https://miniapp-4.agoraio.cn/appcenter/1-1-1/getWorkerManager/\",\n\n]\n\nconst addressRedirect = servers => {\n  return servers.map(url => {\n    url = url.address\n    let arr = url.split('.');\n    let length = arr.length;\n    return `wss://miniapp.agoraio.cn/${arr[length-4]}-${arr[length-3]}-${arr[length-2]}-${arr[length-1]}/api`\n  })\n}\n\nconst getServerList = (option) => {\n  const reportManager = option.reportManager;\n  let payload = {\n    command: \"convergeAllocateEdge\",\n    sid: option.sid,\n    appId: option.appId,\n    token: option.appId,\n    uid: option.uid + '',\n    cname: option.channel,\n    ts: Math.floor(Date.now() / 1000),\n    version: VERSION,\n    seq: 0,\n    requestId: 1\n  };\n\n  return new Promise((resolve, reject) => {\n    let failedCounter = 0;\n    const failed = (err, url) => {\n      try {\n        reportManager.report('chooseServer', {\n          header: {\n            sid: option.sid,\n            cname: option.channel,\n            uid: option.uid,\n            success: false\n          },\n          body: {\n            csurl: url,\n            ec: JSON.stringify(err)\n          }\n        })\n      } catch (error) {}\n      failedCounter++;\n      if(failedCounter === 4) {\n        reject(err);\n      }\n      return \n    }\n\n    const request = csIndex => {\n      var url = CHOOSE_SERVER_LIST[csIndex];\n      //..........................................................................................................\n      wx.request({\n        url: url, \n        data: payload,\n        header: {\n          'content-type': 'application/json'\n        },\n        method: 'POST',\n        success: (res) => {\n          // TODO : data may be null\n          let data = res.data;\n          LOG.debug('From choose server', res);\n          if(data.code !== 200) {\n            failed({\n              code: 901,\n              reason: data.error || 'choose server fail'\n            }, url);\n          } else {\n            let servers = addressRedirect(data.servers);\n            reportManager.report('chooseServer', {\n              header: {\n                sid: option.sid,\n                cname: option.channel,\n                uid: option.uid,\n                success: true\n              },\n              body: {\n                csurl: url,\n                gatewaylist: servers\n              }\n            })\n            resolve({\n              serverlist: servers, \n              url: url\n            });\n          }\n        },\n        fail: (err) => {\n          failed({\n            code: 901,\n            reason: err.errMsg || 'choose server fail'\n          }, url);\n        }\n      })\n      //..........................................................................................................\n    }\n    CHOOSE_SERVER_LIST.map((server, index) => {\n      request(index);\n    })\n    \n  })\n}\n\nexport {\n  getServerList\n}\n\n\n  \n\n\n","import mitt from 'mitt'\nimport LOG from './Log';\nimport {getServerList} from './ChooseServer';\n\nconst CONNECTED = 'connected';\nconst CONNECTING = 'connecting';\nconst DISCONNECTED = 'disconnected';\n\nclass Socket {\n  constructor(option, emitter) {\n    this.serverlist = [];\n    this.option = option;\n    this.index = 0;\n    this.isInit = true;\n    this.state = DISCONNECTED;\n    this.hasInvokeClose = false;\n\n    this.emitter = emitter;\n    this.on = this.emitter.on;\n    this.off = this.emitter.off;\n    this.emit = this.emitter.emit;\n  }\n\n  connect() {\n    this.state !== DISCONNECTED && this.close();\n    getServerList(this.option).then(res => {\n      const {serverlist, url} = res;\n      LOG.debug('Get server list from ' + url);\n      this.index = 0;\n      this.serverlist = serverlist;\n      if(this.option && this.option.servers) {\n        this.serverlist = this.option.servers;\n      }\n      LOG.debug('Connect server with list: ', this.serverlist);\n      this.connectWorker(this.serverlist[this.index]);\n    }).catch(err => {\n      this.emit && this.emit('socketError', err);\n    });\n  }\n\n  connectWorker() {\n    this.state = CONNECTING;\n    let url = this.serverlist[this.index];\n    // url = 'wss://miniapp.agoraio.cn/58-211-82-170/api';\n    LOG.debug('Connect server: ', url);\n\n    let {\n      sid,\n      channel,\n      uid,\n      reportManager\n    } = this.option\n\n    this.ws = new wx.connectSocket({\n      url: url,\n      complete: res => LOG.debug('wxSocket: complete: ', res),\n      fail: res => {\n        LOG.debug('wxSocket: fail: ', res);\n        if(reportManager) {\n          reportManager.report('connectWebSocket', {\n            header: {\n              sid: sid,\n              cname: channel, \n              uid: uid,\n              success: false\n            },\n            body: {\n              wsurl: url,\n              ec: JSON.stringify(res)\n            }\n          })\n        }\n      },\n      success: res => {\n        LOG.debug('wxSocket success: ', res)\n        if(reportManager) {\n          reportManager.report('connectWebSocket', {\n            header: {\n              sid: sid,\n              cname: channel, \n              uid: uid,\n              success: true\n            },\n            body: {\n              wsurl: url,\n            }\n          })\n        }\n      },\n    });\n    this.ws.onOpen(this._onopen.bind(this));\n    this.ws.onMessage(this._onmessage.bind(this));\n    this.establishWSTimeoutTimer = setTimeout(() => {\t\n      if(this.state !== CONNECTED) {\t\n        this.connectNextWorker();\n      }\t\n    }, 5000);\n  }\n\n  connectNextWorker() {\n    this.state !== DISCONNECTED && this.close();\n    LOG.debug(this.index, this.serverlist.length)\n    if(this.index >= this.serverlist.length-1) {\n      this.emit && this.emit('socketError', {\n        code: 905,\n        reason: 'connect websocket failed',\n        wsurl: JSON.stringify(this.serverlist),\n      });\n    } else {\n      this.index++;\n      this.connectWorker();\n    }\n  }\n\n  _onopen() {\n    LOG.info('websocket onopen');\n    clearTimeout(this.establishWSTimeoutTimer);\n    this.state = CONNECTED;\n    this.isInit = false;\n    // wsws.closewsonopen\n    //  hasInvokeClose \n    if(this.hasInvokeClose) {\n      LOG.debug('Alread invoke ws.Close, will not throw onopen event');\n      return;\n    }\n    this.ws.onClose(this._onclose.bind(this));\n    this.emit && this.emit('onopen');\n  }\n\n  _onclose(err) {\n    LOG.info('websocket onclose:' + JSON.stringify(err));\n    this.emitter.emit('_wsClose');\n    clearTimeout(this.establishWSTimeoutTimer);\n    this.state = DISCONNECTED;\n    // err.reasonws.closebugreasonnull\n    if(err && err.reason == 'close') return;\n    /** \n     * wsonclose3\n     * 1ws.close onClose return; -> return;\n     * 2ws connectNextWorker -> this.connectNextWorker();\n     * 3ws onClose  -> this.emit('onclose')\n     */  \n    if(this.hasInvokeClose) return;\n    if(this.isInit) {\n      this.connectNextWorker();\n    } else {\n      this.emit && this.emit('onclose');\n    }\n  }\n\n  _onmessage(msg) {\n    if(this.hasInvokeClose) return;\n    LOG.blind('receive message: ', JSON.stringify(msg));\n    if(this.isConnected() && this.emit) {\n      this.emit('onmessage', msg);\n    }\n  }\n\n  isConnected() {\n    return this.state === CONNECTED;\n  }\n\n  sendMessage(msg) {\n    LOG.blind('send message: ', msg);\n    if(this.isConnected() && this.ws) {\n      this.ws.send({\n        data: msg\n      });\n    }\n  }\n\n  _checkServerList(serverlist) {\n    if(serverlist instanceof Array == false || serverlist.length == 0) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  destroy(callback) {\n    if(this.state !== DISCONNECTED) {\n      this.close();\n    }\n    const closeCallback = () => {\n      this.off('_wsClose', closeCallback);\n      this.serverlist = null;\n      this.ws = null;\n\n      this.emitter = null;\n      this.on = null;\n      this.off = null;\n      this.emit = null;\n      callback && callback();\n    }\n    this.on('_wsClose', closeCallback);\n  }\n\n  close() {\n    LOG.debug('Close websocket');\n    clearTimeout(this.establishWSTimeoutTimer);\n    this.hasInvokeClose = true;\n    this.state = DISCONNECTED;\n    this.ws && this.ws.close({\n      reason: 'close'\n    });\n    // this.ws && this.ws.close();\n    this.ws = null;\n  }\n\n}\n\n\nexport default Socket\n","import { VERSION } from './Config'\n\nclass MessageManager {\n  constructor(option) {\n    this.appId = option.appId;\n    this.channel = option.channel;\n    this.uid = option.uid + '';\n    this.sid = option.sid;\n    \n    this.seq = 1;\n    this.requestId = 2;\n  }\n\n  setSid(sid) {\n    this.sid = sid;\n  }\n\n  _getWorkerManagerMsg() {\n    return {\n      appId: this.appId,\n      cname: this.channel,\n      uid: this.uid, \n      sid: this.sid,\n      sdkVersion: VERSION,\n      seq: ++this.seq,\n      requestId: ++this.requestId,\n      ts:  Math.floor(Date.now() / 1000)\n    }\n  }\n\n  send(opt) {\n    let msg = this._getWorkerManagerMsg();\n    msg.clientRequest = opt\n    return msg;\n  }\n\n  updatePushUrl() {\n    let msg = this._getWorkerManagerMsg();\n    msg.clientRequest = {\n      action: 'update_url',\n      role: 'publish',\n      uid: +this.uid\n    }\n    return msg;\n  }\n\n  ping() {\n    return {\n      command: 'ping',\n      requestId: ++this.requestId,\n      appId: this.appId,\n      cname: this.channel,\n      uid: this.uid + '', \n      sid: this.sid, \n      ts: Math.floor(Date.now() / 1000)\n    }\n  }\n\n  ping2() {\n    let msg = this._getWorkerManagerMsg();\n    msg.clientRequest = {\n      action: 'ping',\n    }\n    return msg;\n  }\n\n  setRole(role) {\n    let msg = this._getWorkerManagerMsg();\n    msg.clientRequest = {\n      action: 'set_role',\n      role: role\n    }\n    return msg;\n  }\n\n  rejoin(appId, cname, uid, dynamicKey, uids, role) {\n    let msg = this._getWorkerManagerMsg();\n    msg.clientRequest = {\n      action: 'join',\n      role: role,\n      appId: appId,\n      key_vocs: dynamicKey || appId,\n      key_vos: dynamicKey || appId,\n      channel_name: cname,\n      uid: uid + '',\n      known_speakers: uids\n    }\n    return msg;\n  }\n\n  join(appId, cname, uid, dynamicKey, role) {\n    let msg = this._getWorkerManagerMsg();\n    msg.clientRequest = {\n      action: 'join',\n      role: role,\n      appId: appId,\n      key_vocs: dynamicKey || appId,\n      key_vos: dynamicKey || appId,\n      channel_name: cname,\n      uid: uid + ''\n    }\n    return msg;\n  }\n  \n  muteLocal(uid, target) {\n    let msg = this._getWorkerManagerMsg();\n    msg.clientRequest = {\n      action: 'mute_local',\n      uid: +uid,\n      target: target,\n      mute: true\n    }\n    return msg;\n  }\n\n  unmuteLocal(uid, target) {\n    let msg = this._getWorkerManagerMsg();\n    msg.clientRequest = {\n      action: 'mute_local',\n      uid: +uid,\n      target: target,\n      mute: false\n    }\n    return msg;\n  }\n\n  mute(uid, target) {\n    let msg = this._getWorkerManagerMsg();\n    msg.clientRequest = {\n      action: 'mute',\n      uid: +uid,\n      target: target\n    }\n    return msg;\n  }\n\n  unmute(uid, target) {\n    let msg = this._getWorkerManagerMsg();\n    msg.clientRequest = {\n      action: 'unmute',\n      uid: +uid,\n      target: target\n    }\n    return msg;\n  }\n  \n  publish(uid) {\n    let msg = this._getWorkerManagerMsg();\n    msg.clientRequest = {\n      action: 'publish',\n      uid: +uid\n    }\n    return msg;\n  }\n  \n  unpublish(uid) {\n    let msg = this._getWorkerManagerMsg();\n    msg.clientRequest = {\n      action: 'unpublish',\n      uid: +uid\n    }\n    return msg;\n  }\n  \n  subscribe(uid) {\n    let msg = this._getWorkerManagerMsg();\n    msg.clientRequest = {\n      action: 'subscribe',\n      uid: +uid\n    }\n    return msg;\n  }\n  \n  unsubscribe(uid) {\n    let msg = this._getWorkerManagerMsg();\n    msg.clientRequest = {\n      action: 'unsubscribe',\n      uid: [+uid]\n    }\n    return msg;\n  }\n  \n  leave(uid) {\n    let msg = this._getWorkerManagerMsg();\n    msg.clientRequest = {\n      action: 'leave',\n      uid: +uid\n    }\n    return msg;\n  }\n\n}\n\nexport default MessageManager;","import LOG from './Log';\nimport Socket from './WXSocket';\nimport MessageManager from './Message';\nimport mitt from 'mitt'\nimport ChannelMediaRelayController, {\n  CHANNEL_MEDIA_RELAY_EVENT, \n  CHANNEL_MEDIA_RELAY_STATE, \n  ChannelMediaError,\n  CHANNEL_MEDIA_RELAY_ERROR,\n  CHANNEL_MEDIA_ERROR} from \"./ChannelMediaRelay.ts\";\n\n\nclass Worker {\n  constructor(option, emitter) {\n    this.appId = option.appId;\n    this.channel = option.channel;\n    this.uid = option.uid;\n    this.sid = option.sid;\n    this.role = option.role;\n    this.channelKey = option.channelKey;\n    this.clientId = \"client\";\n    this.option = option;\n    this.timers = new Set();\n    this.reportManager = option.reportManager;\n    \n    this.clientEmitter = emitter;\n    this.emitter = new mitt();\n    this.on = this.emitter.on;\n    this.off = this.emitter.off;\n    this.emit = this.emitter.emit;\n\n    this.join = this.join.bind(this);\n    this.msgManager = new MessageManager(option); \n  }\n\n  connect() {\n    return new Promise((resolve, reject) => {\n      this.ws = new Socket(this.option, this.emitter);\n      this.ws.connect();\n      this.on('onmessage', this._onMessage.bind(this));\n      const onopen = () => {\n        this.off && this.off('onopen', onopen);\n        this._ping();\n        resolve();\n      }\n      this.on('socketError', reject);\n      this.on('onopen', onopen);\n      this.on('onclose', () => this.clientEmitter.emit('error', {\n        code: 904,\n        reason: 'websocket disconnected',\n      }));\n    })\n  }\n\n  _onMessage(msg) {\n    if(msg && msg.data) {\n      let data = JSON.parse(msg.data);\n      if(data && data.command !== 'pong') {\n        LOG.debug('worker message: ', data);\n        try {\n          this.reportManager.report('serverEvent', {\n            header: {\n              sid: this.sid,\n              cname: this.channel, \n              uid: this.uid,\n              success: true\n            }, \n            body: {\n              action: \"serverEvent\",\n              details: data,\n              req_ts: +new Date(),\n            }\n          });\n        } catch (error) {}\n      }\n      if(data.requestId) {\n        this.emit(data.requestId, data);\n      }\n      if(data.command === 'serverStatus' ) {\n        if(data.code && data.code !== 200) {\n          if(data.code === 503) {\n            return;\n          }\n          this.clientEmitter.emit('error', {\n            code: data.code,\n            reason: data.reason || 'server error',\n          }); \n        }\n        if(data.serverStatus) {\n          LOG.info(`Receive message from server: ${JSON.stringify(data.serverStatus)}`);\n          let action = data.serverStatus.action;\n          // audio-mute  video-mute \n          // mute/unmuteaction\n          // rtc\n          if(action == \"audio-mute\") {\n            if(data.serverStatus.mute) {\n              return this.clientEmitter.emit(\"mute-audio\", {uid: data.serverStatus.uid});\n            } else {\n              return this.clientEmitter.emit(\"unmute-audio\", {uid: data.serverStatus.uid});\n            }\n          }\n          if(action == \"video-mute\") {\n            if(data.serverStatus.mute) {\n              return this.clientEmitter.emit(\"mute-video\", {uid: data.serverStatus.uid});\n            } else {\n              return this.clientEmitter.emit(\"unmute-video\", {uid: data.serverStatus.uid});\n            }\n          }\n          this.clientEmitter.emit(action, data.serverStatus);\n        }\n      }\n    }\n  }\n\n  _sendMessage(msg) {\n    if(!this.ws) return;\n    return new Promise((resolve, reject) => {\n      if(!this.isWSConnected()){\n        return reject({\n          code: 904,\n          reason: 'websocket disconnected',\n          wsurl: this.getWSUrl()\n        });\n      }\n      if(msg.command !== 'ping') {\n        LOG.debug('send to woker: ', msg);\n      }\n      let requestId = msg ? msg.requestId : null;\n      let timer;\n      const handleResponse = (res) => {\n        if(!this.ws) return;\n        this.off(requestId, handleResponse);\n        clearTimeout(timer);\n        this.timers.delete(timer);\n        if (res.code == 200){\n          return resolve(res.serverResponse);\n        }else{\n          return reject({\n            code: res.code,\n            reason: res.msg || res.reason,\n            serverResponse: res.serverResponse,\n            wsurl: this.getWSUrl()\n          });\n        }\n      };\n\n      if (requestId){\n        this.ws.sendMessage(JSON.stringify(msg));\n        this.on(requestId, handleResponse);\n        timer = setTimeout(() => handleResponse({code: 903, reason: 'time out'}), 10000);\n        this.timers.add(timer);\n      }else{\n        return reject({code: 902, reason: 'no requestid'}); \n      }\n    })\n  }\n\n  _ping() {\n    // ping workermanager\n    this.pingTimer = setInterval(() => {\n      this.ws.sendMessage(JSON.stringify(this.msgManager.ping()));\n    }, 3000);\n\n    // ping worker\n    // 8.22: \n    // this.ping2Timer = setInterval(() => {\n    //   this.ws.sendMessage(JSON.stringify(this.msgManager.ping2()));\n    // }, 3000);\n  }\n\n  setRole(role) {\n    return this._sendMessage(this.msgManager.setRole(role));\n  }\n\n  rejoin(uids) {\n    return this._sendMessage(this.msgManager.rejoin(this.appId, this.channel, this.uid, this.channelKey, uids, this.role));\n  }\n\n  join() {\n    return this._sendMessage(this.msgManager.join(this.appId, this.channel, this.uid, this.channelKey, this.role));\n  }\n\n  send(option) {\n    return this._sendMessage(this.msgManager.send(option));\n  }\n\n  updatePushUrl() {\n    return this._sendMessage(this.msgManager.updatePushUrl());\n  }\n\n  publish() {\n    return this._sendMessage(this.msgManager.publish(this.uid));\n  }\n\n  unpublish() {\n    return this._sendMessage(this.msgManager.unpublish(this.uid));\n  }\n\n  subscribe(uid) {\n    return this._sendMessage(this.msgManager.subscribe(uid));\n  }\n\n  unsubscribe(uid) {\n    return this._sendMessage(this.msgManager.unsubscribe(uid));\n  }\n\n  mute(uid, target) {\n    return this._sendMessage(this.msgManager.mute(uid, target));\n  }\n\n  unmute(uid, target) {\n    return this._sendMessage(this.msgManager.unmute(uid, target));\n  }\n\n  muteLocal(target) {\n    return this._sendMessage(this.msgManager.muteLocal(this.uid, target));\n  }\n\n  unmuteLocal(target) {\n    return this._sendMessage(this.msgManager.unmuteLocal(this.uid, target));\n  }\n\n  leave() {\n    return this._sendMessage(this.msgManager.leave(this.uid));\n  }\n\n  isWSConnected() {\n    return !!this.ws && this.ws.isConnected();\n  }\n\n  getWSUrl() {\n    return this.ws.serverlist[this.ws.index];\n  }\n\n  destroy(callback) {\n    clearInterval(this.pingTimer);\n    // clearInterval(this.ping2Timer);\n  \n    this.timers.forEach(timer => {\n      clearInterval(timer);\n    });\n    this.timers = null;\n\n    this.ws && this.ws.destroy(() => {\n      this.ws = null;\n\n      this.emitter = null;\n      this.on = null;\n      this.off = null;\n      this.emit = null;\n      callback && callback();\n    })\n  }\n\n  async startChannelMediaRelay(config) {\n    if(this.channelMediaRelayController) {\n      throw new ChannelMediaError(\"RELAY_ALREADY_START\", \"\", CHANNEL_MEDIA_RELAY_ERROR.RELAY_ALREADY_START);\n    }\n\n    const onEvent = (e) => {\n      this.clientEmitter.emit({\n        type: \"channel-media-relay-event\",\n        code: e,\n      });\n    }\n    const onState = (e, code, data) => {\n      if(e === CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE && code === CHANNEL_MEDIA_RELAY_ERROR.SERVER_CONNECTION_LOST) {\n        this.channelMediaRelayController.dispose();\n        /** \n         * \n         * joingatewayp2p,join\n         *  SERVER_CONNECTION_LOST rejoin   channelMediaConfig  Client.js rejoin \n         * channelMediaConfig\n         */\n        // this.channelMediaConfig = null;\n        this.channelMediaRelayController = null;\n      }\n      this.clientEmitter.emit({\n        type: \"channel-media-relay-state\",\n        state: e,\n        code: code,\n        data\n      });\n    }\n\n    const joinInfo = {\n      token: this.appId,\n      appId: this.appId,\n      cname: this.channel,\n      uid: this.uid,\n      sid: this.sid,\n      clientId: this.clientId\n    }\n\n    this.channelMediaRelayController = new ChannelMediaRelayController(joinInfo, this.clientId);\n    this.channelMediaRelayController.on(\"event\", onEvent);\n    this.channelMediaRelayController.on(\"state\", onState);\n    try {\n      await this.channelMediaRelayController.startChannelMediaRelay(config);\n    } catch (e) {\n      LOG.debug(`[${this.clientId}] startChannelMediaRelay exception: ${JSON.stringify(e)}`);\n      const stateCode = CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE;\n      let code = \"\";\n      if(e instanceof ChannelMediaError) {\n        if(e.data === \"SetSourceChannelStatus\" || (e.data && e.data.serverResponse && e.data.serverResponse.command === \"SetSourceChannel\")) {\n          code = \"FAILED_JOIN_SRC\";\n        } else if(e.data === \"SetDestChannelStatus\" || (e.data && e.data.serverResponse && e.data.serverResponse.command === \"SetDestChannel\")) {\n          code = \"FAILED_JOIN_DEST\";\n        } else if(e.data && e.data.serverResponse && e.data.serverResponse.command === \"StartPacketTransfer\") {\n          code = \"FAILED_PACKET_SENT_TO_DEST\";\n        } else if(e.message === CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT || e.message === CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT) {\n          code = \"SERVER_NO_RESPONSE\";\n        } else if(e.message === CHANNEL_MEDIA_ERROR.REQUEST_FAILED || e.message === CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR) {\n          code = \"SERVER_ERROR_RESPONSE\";\n        } else if(e.message === CHANNEL_MEDIA_ERROR.AP_REQUEST_TIMEOUT) {\n          code = \"NO_RESOURCE_AVAILABLE\";\n        } else if(e.message === CHANNEL_MEDIA_ERROR.WS_ABORT || e.message === CHANNEL_MEDIA_ERROR.AP_REQUEST_ABORT) {\n          code = \"OPERATION_ABORT\";\n        } else {\n          code = \"INTERNAL_ERROR\";\n        }\n      } else {\n        code = \"INTERNAL_ERROR\";\n      }\n      \n      this.clientEmitter.emit({\n        type: \"channel-media-relay-state\",\n        state: stateCode,\n        code: CHANNEL_MEDIA_RELAY_ERROR[code],\n      });\n      /** \n       * \"\"\n       * \"\"\n       * \"\"\n       */\n      if(this.channelMediaRelayController) {\n        this.channelMediaRelayController.dispose();\n        this.channelMediaConfig = null;\n        this.channelMediaRelayController = null;\n      }\n      this.clientEmitter.emit({\n        type: \"channel-media-relay-state\",\n        state: CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE,\n      });\n      throw new ChannelMediaError(code, null, CHANNEL_MEDIA_RELAY_ERROR[code]);\n    }\n    this.clientEmitter.emit({\n      type: \"channel-media-relay-state\",\n      state: CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_RUNNING,\n      code: CHANNEL_MEDIA_RELAY_ERROR[\"RELAY_OK\"],\n    });\n    this.channelMediaConfig = config;\n  }\n\n  async updateChannelMediaRelay(config) {\n    if(!this.channelMediaRelayController) {\n      throw new ChannelMediaError(\"RELAY_NOT_START\", null, CHANNEL_MEDIA_RELAY_ERROR.RELAY_NOT_START);\n    }\n    try {\n      await this.channelMediaRelayController.updateChannelMediaRelay(config);\n    } catch (e) {\n      LOG.debug(`[${this.clientId}] updateChannelMediaRelay exception: ${JSON.stringify(e)}`);\n      const stateCode = CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE;\n      let code = \"\";\n      if(e instanceof ChannelMediaError) {\n      if(e.message === CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT || e.message === CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT) {\n          code = \"SERVER_NO_RESPONSE\";\n        } else if(e.message === CHANNEL_MEDIA_ERROR.REQUEST_FAILED || e.message === CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR) {\n          code = \"SERVER_ERROR_RESPONSE\";\n        } else if(e.message === CHANNEL_MEDIA_ERROR.WS_ABORT || e.message === CHANNEL_MEDIA_ERROR.AP_REQUEST_ABORT) {\n          code = \"OPERATION_ABORT\";\n        } else {\n          code = \"INTERNAL_ERROR\";\n        }\n      } else {\n        code = \"INTERNAL_ERROR\";\n      }\n      this.clientEmitter.emit({\n        type: \"channel-media-relay-event\",\n        code: CHANNEL_MEDIA_RELAY_EVENT.PACKET_UPDATE_DEST_CHANNEL_REFUSED,\n      });\n      this.clientEmitter.emit({\n        type: \"channel-media-relay-state\",\n        state: stateCode,\n        code: CHANNEL_MEDIA_RELAY_ERROR[code],\n      });\n      /** \n       * \"\"\n       * \"\"\n       * \"\"\n       */\n      if(this.channelMediaRelayController) {\n        this.channelMediaRelayController.dispose();\n        this.channelMediaConfig = null;\n        this.channelMediaRelayController = null;\n      }\n      this.clientEmitter.emit({\n        type: \"channel-media-relay-state\",\n        state: CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE,\n      });\n      throw new ChannelMediaError(code, null, CHANNEL_MEDIA_RELAY_ERROR[code]);\n    }\n    this.channelMediaConfig = config;\n  }\n\n  async stopChannelMediaRelay() {\n    if(!this.channelMediaRelayController) {\n      throw new ChannelMediaError(\"RELAY_NOT_START\", null, CHANNEL_MEDIA_RELAY_ERROR.RELAY_NOT_START);\n    }\n    try {\n      await this.channelMediaRelayController.stopChannelMediaRelay();\n    } catch (e) {\n      LOG.debug(`[${this.clientId}] stopChannelMediaRelay exception: ${JSON.stringify(e)}`);\n      const stateCode = CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE;\n      let code = \"\";\n      if(e instanceof ChannelMediaError) {\n      if(e.message === CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT || e.message === CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT) {\n          code = \"SERVER_NO_RESPONSE\";\n        } else if(e.message === CHANNEL_MEDIA_ERROR.REQUEST_FAILED || e.message === CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR) {\n          code = \"SERVER_ERROR_RESPONSE\";\n        } else {\n          code = \"INTERNAL_ERROR\";\n        }\n      } else {\n        code = \"INTERNAL_ERROR\";\n      }\n      this.clientEmitter.emit({\n        type: \"channel-media-relay-state\",\n        state: stateCode,\n        code: CHANNEL_MEDIA_RELAY_ERROR[code],\n      });\n      /** \n       * \"\"\n       * \"\"\n       * \"\"\n       */\n      if(this.channelMediaRelayController) {\n        this.channelMediaRelayController.dispose();\n        this.channelMediaConfig = null;\n        this.channelMediaRelayController = null;\n      }\n      this.emit({\n        type: \"channel-media-relay-state\",\n        state: CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE,\n      });\n      throw new ChannelMediaError(code, null, CHANNEL_MEDIA_RELAY_ERROR[code]);\n    }\n    this.channelMediaConfig = null;\n    this.channelMediaRelayController = null;\n  }\n}\n\nexport default Worker","import { SDK_VERSION } from './Config.js';\nimport LOG from './Log';\n\nconst ReportServiceClient = require('../report_service/gen-js/ReportService').ReportServiceClient;\nconst Thrift = require('../report_service/Thrift/thrift').default;\nconst VosdkHeader = require('../report_service/gen-js/VosdkCommon_types').VosdkHeader;\nconst ReportItem = require('../report_service/gen-js/report_item_miniapp_types');\n\n\nclass ReportManager {\n  constructor() {\n    this.transport = new Thrift.TXHRTransport(\"https://uni-webcollector.agora.io/report\");\n    this.protocol  = new Thrift.TJSONProtocol(this.transport);\n    this.client    = new ReportServiceClient(this.protocol);\n    this.seqId = 0;\n    this._cache = [];\n    this.isReporting = false;\n    this.retryCount = 0;\n  }\n\n  generateHeader(header) {\n    if(header && header.sid) {\n      return new VosdkHeader({\n        sid: header.sid,\n        cname: header.cname || '', \n        lts: header.lts, \n        elapse: header.lts - this.startTime,\n        uid: header.uid,\n        success: header.success\n      })\n    }\n  }\n\n  report(eventName, option) {\n    let header = null;\n    if(option.header) {\n      option.header.lts = +new Date();\n      if(eventName === 'sessionStart') {\n        this.startTime = option.header.lts\n      }\n      header = this.generateHeader(option.header);\n    }\n  \n    if(option.body && header) {\n      let body = option.body;\n      var eventItem;\n      switch(eventName) {\n        case 'sessionStart':\n          eventItem = new ReportItem({\n            miniappSession: true\n          });\n          eventItem.uri = 8000;\n          eventItem['miniappSession'].header = header;\n          eventItem['miniappSession'].appid = body.appId ;\n          eventItem['miniappSession'].uname = body.uname;\n          eventItem['miniappSession'].ver = SDK_VERSION;\n          eventItem['miniappSession'].dk = body.dk;\n          eventItem['miniappSession'].details = JSON.stringify({seq: this.seqId++});\n          break;\n  \n        case 'chooseServer':\n          eventItem = new ReportItem({\n            miniappJoinChooseServer: true\n          });\n          eventItem.uri = 8001;\n          eventItem['miniappJoinChooseServer'].header = header;\n          eventItem['miniappJoinChooseServer'].csurl = body.csurl ;\n          eventItem['miniappJoinChooseServer'].ec = body.ec;\n          eventItem['miniappJoinChooseServer'].gatewaylist = body.gatewaylist;\n          eventItem['miniappJoinChooseServer'].details = JSON.stringify({seq: this.seqId++});\n          break;\n        \n        case 'connectWebSocket':\n          eventItem = new ReportItem({\n            miniappConnectWebSocket: true\n          });\n          eventItem.uri = 8002;\n          eventItem['miniappConnectWebSocket'].header = header;\n          eventItem['miniappConnectWebSocket'].ec = body.ec;\n          eventItem['miniappConnectWebSocket'].wsurl = body.wsurl;\n          eventItem['miniappConnectWebSocket'].details = JSON.stringify({seq: this.seqId++});\n          break;\n        \n        case 'join':\n          eventItem = new ReportItem({\n            miniappJoin: true\n          });\n          eventItem.uri = 8003;\n          eventItem['miniappJoin'].header = header;\n          eventItem['miniappJoin'].ec = body.ec;\n          eventItem['miniappJoin'].isrejoin = body.isrejoin;\n          eventItem['miniappJoin'].details = JSON.stringify({\n            seq: this.seqId++,\n            appId: body.appId,\n            wsurl: body.wsurl\n          });\n          break;\n        \n        case 'publish':\n          eventItem = new ReportItem({\n            miniappPublish: true\n          });\n          eventItem.uri = 8004;\n          eventItem['miniappPublish'].header = header;\n          eventItem['miniappPublish'].ec = body.ec;\n          eventItem['miniappPublish'].pushurl = body.pushurl;\n          eventItem['miniappPublish'].details = JSON.stringify({seq: this.seqId++});\n          break;\n\n        case 'unpublish':\n          eventItem = new ReportItem({\n            miniappUnpublish: true\n          });\n          eventItem.uri = 8005;\n          eventItem['miniappUnpublish'].header = header;\n          eventItem['miniappUnpublish'].ec = body.ec;\n          eventItem['miniappUnpublish'].details = JSON.stringify({seq: this.seqId++});\n          break;\n\n        case 'subscribe':\n          eventItem = new ReportItem({\n            miniappSubscribe: true\n          });\n          eventItem.uri = 8006;\n          eventItem['miniappSubscribe'].header = header;\n          eventItem['miniappSubscribe'].ec = body.ec;\n          eventItem['miniappSubscribe'].pullurl = body.pullurl;\n          eventItem['miniappSubscribe'].peerid = body.peerid;\n          eventItem['miniappSubscribe'].details = JSON.stringify({seq: this.seqId++});\n          break;\n\n        case 'unsubscribe':\n          eventItem = new ReportItem({\n            miniappUnsubscribe: true\n          });\n          eventItem.uri = 8007;\n          eventItem['miniappUnsubscribe'].header = header;\n          eventItem['miniappUnsubscribe'].ec = body.ec;\n          eventItem['miniappUnsubscribe'].peerid = body.peerid;\n          eventItem['miniappUnsubscribe'].details = JSON.stringify({seq: this.seqId++});\n          break;\n        \n        case 'leave':\n          eventItem = new ReportItem({\n            miniappLeave: true\n          });\n          eventItem.uri = 8008;\n          eventItem['miniappLeave'].header = header;\n          eventItem['miniappLeave'].ec = body.ec;\n          eventItem['miniappLeave'].details = JSON.stringify({seq: this.seqId++});\n          break;\n        \n        case 'pusherState':\n          eventItem = new ReportItem({\n            miniappPusherState: true\n          });\n          eventItem.uri = 8010;\n          eventItem['miniappPusherState'].header = header;\n          eventItem['miniappPusherState'].url = body.url;\n          eventItem['miniappPusherState'].code = body.code;\n          eventItem['miniappPusherState'].status = body.status;\n          eventItem['miniappPusherState'].error = body.error;\n          eventItem['miniappPusherState'].details = JSON.stringify({seq: this.seqId++});\n          break;\n\n        case 'playerState':\n          eventItem = new ReportItem({\n            miniappPlayerState: true\n          });\n          eventItem.uri = 8011;\n          eventItem['miniappPlayerState'].header = header;\n          eventItem['miniappPlayerState'].url = body.url;\n          eventItem['miniappPlayerState'].code = body.code;\n          eventItem['miniappPlayerState'].status = body.status;\n          eventItem['miniappPlayerState'].error = body.error;\n          eventItem['miniappPlayerState'].details = JSON.stringify({seq: this.seqId++});\n          break;\n\n        case 'serverEvent':\n          eventItem = new ReportItem({\n            miniappServerEvent: true\n          });\n          eventItem.uri = 8009;\n          eventItem['miniappServerEvent'].header = header;\n          eventItem['miniappServerEvent'].action = body.action;\n          eventItem['miniappServerEvent'].details = JSON.stringify(body.details);\n          eventItem['miniappServerEvent'].req_ts = body.req_ts;\n          break;\n        \n      }\n    }\n    \n    this._cache.push(eventItem);\n    if(!this.isReporting && this._cache.length > 0) {\n      var eventItem = this._cache.shift();\n      this._report(eventItem);\n    }\n  }\n\n  _report(eventItem) {\n    this.isReporting = true;\n    this.client.Report(eventItem, (err) => {\n      if(!err) {\n        LOG.debug(\"Report succcess: \", eventItem);\n        var nextEventItem = this._cache.shift();\n        if(nextEventItem) {\n          this._report(nextEventItem);\n        } else {\n          this.isReporting = false;\n        }\n      } else {\n        LOG.debug(\"Report failed: \", err, eventItem);\n        var delay = this.retryCount++ < 2 ? 200 : 10*1000;\n        setTimeout(() => {\n          this._report(eventItem);\n        }, delay);\n      }\n    });\n  }\n}\n\nexport default ReportManager;","import {random, generateSessionId, is32Uint} from './Helper'; \nimport * as config from './Config';\nimport Worker from './Worker';\nimport mitt from 'mitt';\nimport ReportManager from './Report';\nimport  { ChannelMediaRelayConfiguration } from \"./ChannelMediaRelay.ts\"; \nimport {\n  isEmpty,\n  isValidToken,\n  isValidChannelName,\n} from \"./utils/Check\";\n\nclass Client {\n  constructor(option) {\n    this.emitter = new mitt();\n    this.on = this.emitter.on;\n    this.off = this.emitter.off;\n    this.sid = generateSessionId();\n    this.pushUrl = null;\n    this.playUrls = new Map();\n    this.servers = option && option.servers;\n    this.reportManager = new ReportManager();\n    this.role = 'broadcaster';\n    \n    this.emitter.on('stream-removed', evt => {\n      if(!this.playUrls) return;\n      this.playUrls.delete(evt.uid);\n    })\n  }\n\n  init(appId, onSuccess, onFailure) {\n    if(!appId || typeof appId !== 'string' || appId.toLowerCase() === 'null') {\n      throw Error(\"Invalid appId\");\n    }\n    this.appId = appId.trim();\n    this.reportManager.report('sessionStart', {\n      header: {\n        sid: this.sid,\n        lts: +new Date(), \n        success: true,\n      },\n      body: {\n        appId : appId,\n      }\n    })\n    onSuccess && onSuccess();\n  }\n\n  setRole(role, onSuccess, onFailure) {\n    if(!role === 'broadcaster' && !role === 'audience') {\n      throw Error(\"Invalid role\");\n    } \n    this.role = role;\n    if(this.worker) {\n      this.worker.setRole(role).then((res) => {\n        setTimeout(() => {\n          if(!res) return onSuccess && onSuccess();\n          onSuccess && onSuccess({\n            updateURL: res['update-url']\n          });\n        }, 1);\n      }).catch(() => {\n        onFailure && onFailure();\n      })\n    }\n  }\n\n  rejoin(channelKey, channel, uid, uids, onSuccess, onFailure) {\n    if(this.worker) {\n      return;\n    }\n    if(!channelKey) {\n      channelKey = this.appId;\n    } else if(typeof channelKey !== 'string' || channelKey.toLowerCase() === 'null'){\n      throw Error(\"Invalid channelKey\");\n    }\n\n    if(!channel || typeof channel !== 'string' || channel.toLowerCase() === 'null' || channel.length > 128) {\n      throw Error(\"Invalid channel\");\n    }\n    this.uid = uid || random(10000000);\n    this.uid = Number.parseInt(this.uid);\n    if(!is32Uint(this.uid)) {\n      throw new Error('Invalid uid type');\n    }\n    this.channel = channel;\n\n    this.worker = new Worker({\n      appId: this.appId,\n      channel: this.channel,\n      uid: this.uid,\n      sid: this.sid,\n      role: this.role,\n      servers: this.servers,\n      channelKey: channelKey,\n      reportManager: this.reportManager\n    }, this.emitter);\n\n    this.worker.connect()\n      .then(() => this.worker.rejoin(uids))\n      .then(() => {\n        try {\n          this.reportManager.report('join', {\n            header: {\n              sid: this.sid,\n              cname: this.channel, \n              uid: this.uid,\n              success: true\n            }, \n            body: {\n              isrejoin: true,\n              appId: this.appId,\n              wsurl: this.worker && this.worker.getWSUrl()\n            }\n          });\n        } catch (error) {}\n        setTimeout(function() {\n          onSuccess && onSuccess(this.uid);\n        }, 1);\n        \n      })\n      .catch(err => {\n        try {\n          this.reportManager.report('join', {\n            header: {\n              sid: this.sid,\n              cname: this.channel, \n              uid: this.uid,\n              success: false\n            }, \n            body: {\n              ec: JSON.stringify(err),\n              appId: this.appId,\n              wsurl: this.worker && this.worker.getWSUrl()\n            }\n          });\n        } catch (error) {}\n        this.destroy();\n        onFailure && onFailure(err)\n      });\n  }\n\n  join(channelKey, channel, uid, onSuccess, onFailure) {\n    if(this.worker) {\n      return;\n    }\n    if(!channelKey) {\n      channelKey = this.appId;\n    } else if(typeof channelKey !== 'string' || channelKey.toLowerCase() === 'null'){\n      throw Error(\"Invalid channelKey\");\n    }\n\n    if(!channel || typeof channel !== 'string' || channel.toLowerCase() === 'null' || channel.length > 128) {\n      throw Error(\"Invalid channel\");\n    }\n    this.uid = uid || random(10000000);\n    this.uid = Number.parseInt(this.uid);\n    if(!is32Uint(this.uid)) {\n      throw new Error('Invalid uid type');\n    }\n    this.channel = channel;\n\n    this.worker = new Worker({\n      appId: this.appId,\n      channel: this.channel,\n      uid: this.uid,\n      sid: this.sid,\n      role: this.role,\n      servers: this.servers,\n      channelKey: channelKey,\n      reportManager: this.reportManager\n    }, this.emitter);\n\n    this.worker.connect()\n      .then(() => this.worker.join())\n      .then(() => {\n        try {\n          this.reportManager.report('join', {\n            header: {\n              sid: this.sid,\n              cname: this.channel, \n              uid: this.uid,\n              success: true\n            }, \n            body: {\n              isrejoin: false,\n              appId: this.appId,\n              wsurl: this.worker && this.worker.getWSUrl()\n            }\n          });\n        } catch (error) {}\n        setTimeout(function() {\n          onSuccess && onSuccess(this.uid);\n        }, 1);\n        \n      })\n      .catch(err => {\n        try {\n          this.reportManager.report('join', {\n            header: {\n              sid: this.sid,\n              cname: this.channel, \n              uid: this.uid,\n              success: false\n            }, \n            body: {\n              ec: JSON.stringify(err),\n              appId: this.appId,\n              wsurl: err.wsurl || (this.worker && this.worker.getWSUrl())\n            }\n          });\n        } catch (error) {}\n        this.destroy();\n        onFailure && onFailure(err)\n      });\n  }\n\n  publish(onSuccess, onFailure) {\n    this._checkWorker();\n    this.worker.publish()\n    .then(res => {\n      this.pushUrl = res.url;\n      try {\n        this.reportManager.report('publish', {\n          header: {\n            sid: this.sid,\n            cname: this.channel, \n            uid: this.uid,\n            success: true\n          }, \n          body: {\n            pushurl: res.url\n          }\n        });\n      } catch (error) {}\n      setTimeout(() => {\n        onSuccess && onSuccess(res.url);\n      }, 1);\n    })\n    .catch(err => {\n      this.reportManager.report('publish', {\n        header: {\n          sid: this.sid,\n          cname: this.channel, \n          uid: this.uid,\n          success: false\n        }, \n        body: {\n          ec: JSON.stringify(err)\n        }\n      });\n      onFailure && onFailure(err);\n    });\n  }\n\n  unpublish(onSuccess, onFailure) {\n    this._checkWorker();\n    this.worker.unpublish()\n    .then(res => {\n      this.pushUrl = null;\n      try {\n        this.reportManager.report('unpublish', {\n          header: {\n            sid: this.sid,\n            cname: this.channel, \n            uid: this.uid,\n            success: true\n          }, \n          body: {}\n        });\n      } catch (error) {}\n      setTimeout(function() {\n        onSuccess && onSuccess();\n      },1);\n    })\n    .catch(err => {\n      this.reportManager.report('unpublish', {\n        header: {\n          sid: this.sid,\n          cname: this.channel, \n          uid: this.uid,\n          success: false\n        }, \n        body: {\n          ec: JSON.stringify(err)\n        }\n      });\n      onFailure && onFailure(err)\n    });\n  }\n  \n  subscribe(uid, onSuccess, onFailure) {\n    // var url = `rtmp://${config.DOMAIN_NAME}/live/${this.appId}_${Base64.encode(this.channel)}_${uid}`;\n    this._checkUid(uid);\n    this._checkWorker();\n    this.worker.subscribe(uid)\n      .then(res => {\n        this.playUrls.set(uid, res.url);\n        try {\n          this.reportManager.report('subscribe', {\n            header: {\n              sid: this.sid,\n              cname: this.channel, \n              uid: this.uid,\n              success: true\n            }, \n            body: {\n              pullurl: res.url,\n            }\n          });\n        } catch (error) {}\n        setTimeout(() => {\n          onSuccess && onSuccess(res.url, res.rotation);\n        }, 1);\n      })\n      .catch(err => {\n        this.reportManager.report('subscribe', {\n          header: {\n            sid: this.sid,\n            cname: this.channel, \n            uid: this.uid,\n            success: false\n          }, \n          body: {\n            ec: JSON.stringify(err),\n          }\n        });\n        onFailure && onFailure(err)\n      });\n  }\n\n  unsubscribe(uid, onSuccess, onFailure) {\n    this._checkUid(uid);\n    this._checkWorker();\n    this.worker.unsubscribe(uid)\n      .then(res => {\n        this.playUrls.delete(uid);\n        try {\n          this.reportManager.report('unsubscribe', {\n            header: {\n              sid: this.sid,\n              cname: this.channel, \n              uid: this.uid,\n              success: false\n            }, \n            body: {}\n          });\n        } catch (error) {}\n        setTimeout(() => {\n          onSuccess && onSuccess();\n        }, 1);\n      })\n      .catch(err => {\n        this.reportManager.report('unsubscribe', {\n          header: {\n            sid: this.sid,\n            cname: this.channel, \n            uid: this.uid,\n            success: false\n          }, \n          body: {\n            ec: JSON.stringify(err)\n          }\n        });\n        onFailure && onFailure(err)\n      });\n  }\n\n  mute(uid, target, onSuccess, onFailure) {\n    this._checkUid(uid);\n    this._checkWorker();\n    if(target !== 'video' && target !== 'audio' && target !== 'all') {\n      throw new Error('target should be \"video\", \"audio\" or \"all\"');\n    }\n    this.worker.mute(uid, target)\n      .then(res => {\n        setTimeout(() => {\n          onSuccess && onSuccess();\n        }, 1);\n      }).catch(err => {\n        onFailure && onFailure(err);\n      })\n  }\n\n  unmute(uid, target, onSuccess, onFailure) {\n    this._checkUid(uid);\n    this._checkWorker();\n    if(target !== 'video' && target !== 'audio' && target !== 'all') {\n      throw new Error('target should be \"video\", \"audio\" or \"all\"');\n    }\n    this.worker.unmute(uid, target)\n      .then(res => {\n        setTimeout(() => {\n          onSuccess && onSuccess();\n        }, 1);\n      }).catch(err => {\n        onFailure && onFailure(err);\n      })\n  }\n\n  muteLocal(target, onSuccess, onFailure) {\n    this._checkWorker();\n    if(target !== 'video' && target !== 'audio' && target !== 'all') {\n      throw new Error('target should be \"video\", \"audio\" or \"all\"');\n    }\n    this.worker.muteLocal(target)\n      .then(res => {\n        setTimeout(() => {\n          onSuccess && onSuccess();\n        }, 1);\n      }).catch(err => {\n        onFailure && onFailure(err);\n      })\n  }\n\n  unmuteLocal(target, onSuccess, onFailure) {\n    this._checkWorker();\n    if(target !== 'video' && target !== 'audio' && target !== 'all') {\n      throw new Error('target should be \"video\", \"audio\" or \"all\"');\n    }\n    this.worker.unmuteLocal(target)\n      .then(res => {\n        setTimeout(() => {\n          onSuccess && onSuccess();\n        }, 1);\n      }).catch(err => {\n        onFailure && onFailure(err);\n      })\n  }\n\n  leave(onSuccess, onFailure) {\n    if(this.worker && this.worker.isWSConnected()) {\n      this.worker.leave()\n      .then(res => {\n        try {\n          this.reportManager.report('leave', {\n            header: {\n              sid: this.sid,\n              cname: this.channel, \n              uid: this.uid,\n              success: true\n            }, \n            body: {}\n          });\n        } catch (error) {}\n        this.destroy(() => {\n          setTimeout(() => {\n            onSuccess && onSuccess();\n          }, 1);\n        })\n      }).catch(err => {\n        onFailure && onFailure(err);\n      })\n    }\n  }\n\n  _checkUid(uid) {\n    if(!uid || typeof uid !== 'number' || !is32Uint(uid)) {\n      throw new Error('Invalid uid type');\n    }\n  }\n\n  _checkWorker() {\n    if(!this.worker || !this.worker.isWSConnected()) {\n      throw new Error('Disconnected from server');\n    }\n  }\n\n  isConnected() {\n    if(!this.worker || !this.worker.isWSConnected()) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  updatePusherStateChange(e) {\n    if(this.pushUrl) {\n      let code = e.detail.code;\n      if(code == 1008 || code < 0) {\n        let success = code == 1008 ? true : false;\n        // \n        this.reportManager && this.reportManager.report('pusherState', {\n          header: {\n            sid: this.sid,\n            cname: this.channel, \n            uid: this.uid,\n            success: success\n          }, \n          body: {\n            url: this.pushUrl,\n            code: code\n          }\n        });\n      }\n    }\n  }\n\n  updatePlayerStateChange(uid, e) {\n    let playUrl = this.playUrls.get(uid);\n    if(playUrl) {\n      let code = e.detail.code;\n      if(code == 2004 || (code < 0 || code > 3000)) {\n        let success = code == 2004 ? true : false;\n        // \n        this.reportManager && this.reportManager.report('playerState', {\n          header: {\n            sid: this.sid,\n            cname: this.channel, \n            uid: uid,\n            success: success\n          }, \n          body: {\n            url: playUrl,\n            code: code\n          }\n        });\n      }\n    }\n  }\n\n  updatePusherNetStatus(e) {\n    \n  }\n\n  updatePlayerNetStatus(uid, e) {\n\n  }\n\n  updatePusherError(e) {\n    \n  }\n\n  updatePlayerError(uid, e) {\n\n  }\n\n  send(option, onSuccess, onFailure) {\n    this._checkWorker();\n    this.worker.send(option).then(res => {\n      onSuccess && onSuccess(res);\n    }).catch(err => {\n      onFailure && onFailure(err);\n    })\n  }\n\n  updatePushUrl(onSuccess, onFailure) {\n    this._checkWorker();\n    this.worker.updatePushUrl().then(res => {\n      setTimeout(function() {\n        onSuccess && onSuccess(res);\n      }, 1);\n    }).catch(err => {\n      onFailure && onFailure(err);\n    })\n  }\n\n  destroy(onSuccess, onFailure) {\n    if(this.worker) {\n      this.worker.destroy(() => {\n        this.pushUrl = null;\n        this.playUrls = null;\n        onSuccess && onSuccess();\n      });\n      this.worker = null;\n    } else {\n      this.pushUrl = null;\n      this.playUrls = null;\n      onSuccess && onSuccess();\n    }\n  }\n\n  startChannelMediaRelay(config, callback) {\n    /**\n     * param check\n     */\n    if(!(config instanceof ChannelMediaRelayConfiguration)) {\n      throw \"Configration should be instance of [ChannelMediaRelayConfiguration]\";\n    }\n    const srcInfo = config.getSrcChannelMediaInfo();\n    const destInfo = config.getDestChannelMediaInfos();\n\n    if(isEmpty(srcInfo)) {\n      throw \"srcChannelMediaInfo should not be empty\";\n    }\n    if(isEmpty(destInfo) || destInfo.length === 0) {\n      throw \"destChannelMediaInfos should not be empty\";\n    }\n\n    if(!is32Uint(srcInfo.uid)) {\n      throw \"Invalid uid in srcChannelMediaInfo\";\n    }\n    if(!isValidChannelName(srcInfo.channelName)) {\n      throw \"Invalid channelName in srcChannelMediaInfo\";\n    }\n    if(srcInfo.token && !isValidToken(srcInfo.token)) {\n      throw \"Invalid token in srcChannelMediaInfo\";\n    }\n\n    destInfo.forEach((info) => {\n      if(!is32Uint(info.uid)) {\n        throw \"Invalid uid in destChannelMediaInfo\";\n      }\n      if(!isValidChannelName(info.channelName)) {\n        throw \"Invalid channelName in destChannelMediaInfo\";\n      }\n      if(info.token && !isValidToken(info.token)) {\n        throw \"Invalid token in destChannelMediaInfo\";\n      }\n    });\n\n    if(!this.worker) {\n      throw \"startChannelMediaRelay should be used after join\";\n    }\n\n    this.worker.startChannelMediaRelay(config).then(() => {\n      callback && callback();\n    }).catch((e) => {\n      callback && callback(e);\n    });\n  }\n\n  updateChannelMediaRelay(config, callback) {\n    /**\n     * param check\n     */\n    if(!(config instanceof ChannelMediaRelayConfiguration)) {\n      throw \"Configration should be instance of [ChannelMediaRelayConfiguration]\";\n    }\n    const srcInfo = config.getSrcChannelMediaInfo();\n    const destInfo = config.getDestChannelMediaInfos();\n\n    if(isEmpty(srcInfo)) {\n      throw \"srcChannelMediaInfo should not be empty\";\n    }\n    if(isEmpty(destInfo) || destInfo.length === 0) {\n      throw \"destChannelMediaInfos should not be empty\";\n    }\n\n    if(!is32Uint(srcInfo.uid)) {\n      throw \"Invalid uid in srcChannelMediaInfo\";\n    }\n    if(!isValidChannelName(srcInfo.channelName)) {\n      throw \"Invalid channelName in srcChannelMediaInfo\";\n    }\n    if(srcInfo.token && !isValidToken(srcInfo.token)) {\n      throw \"Invalid token in srcChannelMediaInfo\";\n    }\n\n    destInfo.forEach((info) => {\n      if(!is32Uint(info.uid)) {\n        throw \"Invalid uid in destChannelMediaInfo\";\n      }\n      if(!isValidChannelName(info.channelName)) {\n        throw \"Invalid channelName in destChannelMediaInfo\";\n      }\n      if(info.token && !isValidToken(info.token)) {\n        throw \"Invalid token in destChannelMediaInfo\";\n      }\n    });\n\n    if(!this.worker) {\n      throw \"updateChannelMediaRelay should be used after join\";\n    }\n\n    this.worker.updateChannelMediaRelay(config).then(() => {\n      callback && callback();\n    }).catch((e) => {\n      callback && callback(e);\n    });\n  }\n\n  stopChannelMediaRelay(callback) {\n    this.worker.stopChannelMediaRelay().then(() => {\n      callback && callback();\n    }).catch((e) => {\n      callback && callback(e);\n    });\n  }\n  \n}\n\nexport default Client;\n"],"sourceRoot":""}